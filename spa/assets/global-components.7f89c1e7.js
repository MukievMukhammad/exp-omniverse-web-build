import{i as bl,e as Pa,t as Do,r as F,c as f,o as ga,a as to,w as at,R as St,h as m,s as ut,b as Bo,d as zo,Q as Ie,f as ao,g as st,j as jt,k as je,l as it,p as xo,m as oo,n as lo,q as na,u as La,v as Fo,x as Uo,T as yl,y as Ea,z as Ke,A as zt,_ as et,B as k,C as oe,D as s,E as lt,F as E,G as l,H as pe,I as ne,J as Z,K as U,L as Ue,M as Ht,N as va,O as Ho,P as ba,S as ya,U as Sl,V as ct,W as bt,X as We,Y as wl,Z as kl,$ as Na,a0 as no,a1 as io,a2 as aa,a3 as Wt,a4 as Cl,a5 as Da,a6 as x,a7 as Al,a8 as Bt,a9 as Tl,aa as Ml,ab as Kt,ac as ro,ad as $l,ae as ht,af as Vl,ag as gt,ah as fo,ai as vo,aj as Ll,ak as Ft,al as po,am as Ba,an as pa,ao as Wo,ap as El,aq as za,ar as $t,as as _l,at as ho,au as Ol,av as Il,aw as ql,ax as Rl,ay as Pl,az as Nl,aA as xa,aB as Dl,aC as go,aD as Bl,aE as zl,aF as xl,aG as Fl,aH as Ul,aI as jo,aJ as Hl}from"./index.2fde324e.js";import{u as Wl,a as Fa,b as bo,Q as jl,c as Jt,d as Xt,e as Kl,f as Ql,g as Ct,A as Ko,h as Gt,i as dt,j as yo,k as _a,l as so,m as Gl,n as Yl,o as Jl,p as Ua,q as Me,r as W,s as wt,t as So,v as Xl,w as Zl}from"./audioIO.a640172e.js";import{u as en,a as tn,b as an,c as on,Q as Et,d as Qt,T as Qo,e as ye,t as ln,f as nn,g as Go,h as uo,i as Yo,j as Jo,k as Xo,n as wo,l as ko,m as rn,o as sn}from"./QBadge.9ae919c2.js";import{Q as Zo,a as un,J as dn}from"./JitsiContainer.d4a44580.js";let cn=0;const mn=["click","keydown"],fn={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${cn++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function vn(e,t,a,i){const n=bl(Do,Pa);if(n===Pa)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Pa;const{proxy:c}=st(),r=F(null),o=F(null),v=F(null),b=f(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),y=f(()=>n.currentModel.value===e.name),V=f(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(y.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(i!==void 0?i.linkClass.value:"")),h=f(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),g=f(()=>e.disable===!0||n.hasFocus.value===!0||y.value===!1&&n.hasActiveTab.value===!0?-1:e.tabindex||0);function _(S,L){if(L!==!0&&r.value!==null&&r.value.focus(),e.disable===!0){i!==void 0&&i.hasRouterLink.value===!0&&ut(S);return}if(i===void 0){n.updateModel({name:e.name}),a("click",S);return}if(i.hasRouterLink.value===!0){const B=(le={})=>{let me;const Ee=le.to===void 0||jt(le.to,e.to)===!0?n.avoidRouteWatcher=Wl():null;return i.navigateToRouterLink(S,{...le,returnRouterError:!0}).catch(Pe=>{me=Pe}).then(Pe=>{if(Ee===n.avoidRouteWatcher&&(n.avoidRouteWatcher=!1,me===void 0&&(Pe===void 0||Pe.message.startsWith("Avoided redundant navigation")===!0)&&n.updateModel({name:e.name})),le.returnRouterError===!0)return me!==void 0?Promise.reject(me):Pe})};a("click",S,B),S.defaultPrevented!==!0&&B();return}a("click",S)}function H(S){Bo(S,[13,32])?_(S,!0):zo(S)!==!0&&S.keyCode>=35&&S.keyCode<=40&&S.altKey!==!0&&S.metaKey!==!0&&n.onKbdNavigate(S.keyCode,c.$el)===!0&&ut(S),a("keydown",S)}function N(){const S=n.tabProps.value.narrowIndicator,L=[],B=m("div",{ref:v,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});e.icon!==void 0&&L.push(m(Ie,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&L.push(m("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&L.push(e.alertIcon!==void 0?m(Ie,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):m("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),S===!0&&L.push(B);const le=[m("div",{class:"q-focus-helper",tabindex:-1,ref:r}),m("div",{class:h.value},ao(t.default,L))];return S===!1&&le.push(B),le}const ie={name:f(()=>e.name),rootRef:o,tabIndicatorRef:v,routeData:i};ga(()=>{n.unregisterTab(ie)}),to(()=>{n.registerTab(ie)});function j(S,L){const B={ref:o,class:V.value,tabindex:g.value,role:"tab","aria-selected":y.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:_,onKeydown:H,...L};return at(m(S,B,N()),[[St,b.value]])}return{renderTab:j,$tabs:n}}var Xe=je({name:"QTab",props:fn,emits:mn,setup(e,{slots:t,emit:a}){const{renderTab:i}=vn(e,t,a);return()=>i("div")}});let ha=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,ha=e.scrollLeft>=0,e.remove()}function pn(e,t,a){const i=a===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const hn=["left","center","right","justify"];var Yt=je({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>hn.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:a}){const{proxy:i}=st(),{$q:n}=i,{registerTick:c}=Fa(),{registerTick:r}=Fa(),{registerTick:o}=Fa(),{registerTimeout:v,removeTimeout:b}=bo(),{registerTimeout:y,removeTimeout:V}=bo(),h=F(null),g=F(null),_=F(e.modelValue),H=F(!1),N=F(!0),ie=F(!1),j=F(!1),S=[],L=F(0),B=F(!1);let le=null,me=null,Ee;const Pe=f(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:pn(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),$e=f(()=>{const A=L.value,P=_.value;for(let G=0;G<A;G++)if(S[G].name.value===P)return!0;return!1}),Ae=f(()=>`q-tabs__content--align-${H.value===!0?"left":j.value===!0?"justify":e.align}`),J=f(()=>`q-tabs row no-wrap items-center q-tabs--${H.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),_e=f(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Ae.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),Be=f(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ce=f(()=>e.vertical!==!0&&n.lang.rtl===!0),He=f(()=>ha===!1&&ce.value===!0);it(ce,D),it(()=>e.modelValue,A=>{Qe({name:A,setCurrent:!0,skipEmit:!0})}),it(()=>e.outsideArrows,Ge);function Qe({name:A,setCurrent:P,skipEmit:G}){_.value!==A&&(G!==!0&&e["onUpdate:modelValue"]!==void 0&&a("update:modelValue",A),(P===!0||e["onUpdate:modelValue"]===void 0)&&(I(_.value,A),_.value=A))}function Ge(){c(()=>{he({width:h.value.offsetWidth,height:h.value.offsetHeight})})}function he(A){if(Be.value===void 0||g.value===null)return;const P=A[Be.value.container],G=Math.min(g.value[Be.value.scroll],Array.prototype.reduce.call(g.value.children,(we,de)=>we+(de[Be.value.content]||0),0)),Le=P>0&&G>P;H.value=Le,Le===!0&&r(D),j.value=P<parseInt(e.breakpoint,10)}function I(A,P){const G=A!=null&&A!==""?S.find(we=>we.name.value===A):null,Le=P!=null&&P!==""?S.find(we=>we.name.value===P):null;if(G&&Le){const we=G.tabIndicatorRef.value,de=Le.tabIndicatorRef.value;le!==null&&(clearTimeout(le),le=null),we.style.transition="none",we.style.transform="none",de.style.transition="none",de.style.transform="none";const re=we.getBoundingClientRect(),De=de.getBoundingClientRect();de.style.transform=e.vertical===!0?`translate3d(0,${re.top-De.top}px,0) scale3d(1,${De.height?re.height/De.height:1},1)`:`translate3d(${re.left-De.left}px,0,0) scale3d(${De.width?re.width/De.width:1},1,1)`,o(()=>{le=setTimeout(()=>{le=null,de.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",de.style.transform="none"},70)})}Le&&H.value===!0&&C(Le.rootRef.value)}function C(A){const{left:P,width:G,top:Le,height:we}=g.value.getBoundingClientRect(),de=A.getBoundingClientRect();let re=e.vertical===!0?de.top-Le:de.left-P;if(re<0){g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(re),D();return}re+=e.vertical===!0?de.height-we:de.width-G,re>0&&(g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(re),D())}function D(){const A=g.value;if(A===null)return;const P=A.getBoundingClientRect(),G=e.vertical===!0?A.scrollTop:Math.abs(A.scrollLeft);ce.value===!0?(N.value=Math.ceil(G+P.width)<A.scrollWidth-1,ie.value=G>0):(N.value=G>0,ie.value=e.vertical===!0?Math.ceil(G+P.height)<A.scrollHeight:Math.ceil(G+P.width)<A.scrollWidth)}function R(A){me!==null&&clearInterval(me),me=setInterval(()=>{p(A)===!0&&X()},5)}function ue(){R(He.value===!0?Number.MAX_SAFE_INTEGER:0)}function Ve(){R(He.value===!0?0:Number.MAX_SAFE_INTEGER)}function X(){me!==null&&(clearInterval(me),me=null)}function ee(A,P){const G=Array.prototype.filter.call(g.value.children,De=>De===P||De.matches&&De.matches(".q-tab.q-focusable")===!0),Le=G.length;if(Le===0)return;if(A===36)return C(G[0]),G[0].focus(),!0;if(A===35)return C(G[Le-1]),G[Le-1].focus(),!0;const we=A===(e.vertical===!0?38:37),de=A===(e.vertical===!0?40:39),re=we===!0?-1:de===!0?1:void 0;if(re!==void 0){const De=ce.value===!0?-1:1,Ne=G.indexOf(P)+re*De;return Ne>=0&&Ne<Le&&(C(G[Ne]),G[Ne].focus({preventScroll:!0})),!0}}const qe=f(()=>He.value===!0?{get:A=>Math.abs(A.scrollLeft),set:(A,P)=>{A.scrollLeft=-P}}:e.vertical===!0?{get:A=>A.scrollTop,set:(A,P)=>{A.scrollTop=P}}:{get:A=>A.scrollLeft,set:(A,P)=>{A.scrollLeft=P}});function p(A){const P=g.value,{get:G,set:Le}=qe.value;let we=!1,de=G(P);const re=A<de?-1:1;return de+=re*5,de<0?(we=!0,de=0):(re===-1&&de<=A||re===1&&de>=A)&&(we=!0,de=A),Le(P,de),D(),we}function q(A,P){for(const G in A)if(A[G]!==P[G])return!1;return!0}function Q(){let A=null,P={matchedLen:0,queryDiff:9999,hrefLen:0};const G=S.filter(re=>re.routeData!==void 0&&re.routeData.hasRouterLink.value===!0),{hash:Le,query:we}=i.$route,de=Object.keys(we).length;for(const re of G){const De=re.routeData.exact.value===!0;if(re.routeData[De===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Ne,query:Ze,matched:Je,href:yt}=re.routeData.resolvedLink.value,w=Object.keys(Ze).length;if(De===!0){if(Ne!==Le||w!==de||q(we,Ze)===!1)continue;A=re.name.value;break}if(Ne!==""&&Ne!==Le||w!==0&&q(Ze,we)===!1)continue;const Y={matchedLen:Je.length,queryDiff:de-w,hrefLen:yt.length-Ne.length};if(Y.matchedLen>P.matchedLen){A=re.name.value,P=Y;continue}else if(Y.matchedLen!==P.matchedLen)continue;if(Y.queryDiff<P.queryDiff)A=re.name.value,P=Y;else if(Y.queryDiff!==P.queryDiff)continue;Y.hrefLen>P.hrefLen&&(A=re.name.value,P=Y)}A===null&&S.some(re=>re.routeData===void 0&&re.name.value===_.value)===!0||Qe({name:A,setCurrent:!0})}function ae(A){if(b(),B.value!==!0&&h.value!==null&&A.target&&typeof A.target.closest=="function"){const P=A.target.closest(".q-tab");P&&h.value.contains(P)===!0&&(B.value=!0,H.value===!0&&C(P))}}function ge(){v(()=>{B.value=!1},30)}function K(){tt.avoidRouteWatcher===!1?y(Q):V()}function Se(){if(Ee===void 0){const A=it(()=>i.$route.fullPath,K);Ee=()=>{A(),Ee=void 0}}}function ve(A){S.push(A),L.value++,Ge(),A.routeData===void 0||i.$route===void 0?y(()=>{if(H.value===!0){const P=_.value,G=P!=null&&P!==""?S.find(Le=>Le.name.value===P):null;G&&C(G.rootRef.value)}}):(Se(),A.routeData.hasRouterLink.value===!0&&K())}function Ye(A){S.splice(S.indexOf(A),1),L.value--,Ge(),Ee!==void 0&&A.routeData!==void 0&&(S.every(P=>P.routeData===void 0)===!0&&Ee(),K())}const tt={currentModel:_,tabProps:Pe,hasFocus:B,hasActiveTab:$e,registerTab:ve,unregisterTab:Ye,verifyRouteModel:K,updateModel:Qe,onKbdNavigate:ee,avoidRouteWatcher:!1};xo(Do,tt);function mt(){le!==null&&clearTimeout(le),X(),Ee!==void 0&&Ee()}let Oe;return ga(mt),oo(()=>{Oe=Ee!==void 0,mt()}),lo(()=>{Oe===!0&&Se(),Ge()}),()=>m("div",{ref:h,class:J.value,role:"tablist",onFocusin:ae,onFocusout:ge},[m(jl,{onResize:he}),m("div",{ref:g,class:_e.value,onScroll:D},na(t.default)),m(Ie,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(N.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||n.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ue,onTouchstartPassive:ue,onMouseupPassive:X,onMouseleavePassive:X,onTouchendPassive:X}),m(Ie,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(ie.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||n.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Ve,onTouchstartPassive:Ve,onMouseupPassive:X,onMouseleavePassive:X,onTouchendPassive:X})])}}),ot=je({name:"QTabPanel",props:en,setup(e,{slots:t}){return()=>m("div",{class:"q-tab-panel",role:"tabpanel"},na(t.default))}}),ia=je({name:"QTabPanels",props:{...tn,...Jt},emits:an,setup(e,{slots:t}){const a=st(),i=Xt(e,a.proxy.$q),{updatePanelsList:n,getPanelContent:c,panelDirectives:r}=on(),o=f(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(n(t),La("div",{class:o.value},c(),"pan",e.swipeable,()=>r.value))}});const gn=[m("g",{transform:"translate(-20,-20)"},[m("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[m("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),m("g",{transform:"translate(20,20) rotate(15 50 50)"},[m("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[m("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var bn=je({name:"QSpinnerGears",props:Fo,setup(e){const{cSize:t,classes:a}=Uo(e);return()=>m("svg",{class:a.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},gn)}}),el=je({name:"QInnerLoading",props:{...Jt,...Kl,showing:Boolean,color:String,size:{type:[String,Number],default:42},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const a=st(),i=Xt(e,a.proxy.$q),{transitionProps:n,transitionStyle:c}=Ql(e),r=f(()=>"q-inner-loading absolute-full column flex-center"+(i.value===!0?" q-inner-loading--dark":"")),o=f(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function v(){const y=[m(Ea,{size:e.size,color:e.color})];return e.label!==void 0&&y.push(m("div",{class:o.value,style:e.labelStyle},[e.label])),y}function b(){return e.showing===!0?m("div",{class:r.value,style:c.value},t.default!==void 0?t.default():v()):null}return()=>m(yl,n.value,b)}}),tl=je({name:"QBar",props:{...Jt,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=st(),i=Xt(e,a),n=f(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${i.value===!0?"dark":"light"}`);return()=>m("div",{class:n.value,role:"toolbar"},na(t.default))}}),co=je({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const a=f(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>m(e.tag,{class:a.value},na(t.default))}});const yn=Ke({props:{icon:{type:String,required:!0},title:{type:String,required:!0},hoverShowBar:{type:Boolean,default:!1},transparentOnIdle:{type:Boolean,default:!1},defaultHeight:{type:Number,required:!0,default:400},defaultWidth:{type:Number,default:300},minimumHeight:{type:Number,default:50},minimumWidth:{type:Number,default:50},maximumHeight:{type:Number,default:void 0},maximumWidth:{type:Number,default:void 0},defaultTop:{type:Number,default:200},defaultLeft:{type:Number,default:400},minimumExposure:{type:Number,default:100},canMove:{type:Boolean,default:!0},canResize:{type:Boolean,default:!0},canResizeWidth:{type:Boolean,default:!0},canResizeHeight:{type:Boolean,default:!0},dragMoveDebounce:{type:Number,default:10},spawnSnappedTo:{type:String,default:void 0},managerProps:{type:Object,default:()=>({})}},setup(){return{applicationStore:zt}},data(e){return{height:e.defaultHeight,width:e.defaultWidth,top:e.defaultTop,left:e.defaultLeft,overlayStatus:"restored",heightWhenMinimized:32,hovered:!1,dragAction:"NONE",dragStart:{x:0,y:0},mouseCaptured:!1,onDragMoveReady:!0,windowCache:{}}},computed:{isMaximized(){return this.overlayStatus==="maximized"},isMinimized(){return this.overlayStatus==="minimized"},showWindowTitleBar(){return!this.hoverShowBar||this.hovered||this.isMinimized||this.isMaximized},showWindowContent(){return!this.isMinimized},getWindowStyle(){if(this.applicationStore.theme.globalStyle==="none")return this.$q.dark.isActive?"#121212":"#ffffff";const e={aero:"80",mica:"ff"};if(this.$props.transparentOnIdle&&!this.hovered)return"#0002";if(this.applicationStore.theme.windowStyle==="none")return this.$q.dark.isActive?"#1D1D1D":"#fff";const a={"gradient-top":"circle at 50% 0%","gradient-right":"circle at 100% 50%","gradient-bottom":"circle at 50% 100%","gradient-left":"circle at 0% 50%"}[this.applicationStore.theme.windowStyle],i=this.applicationStore.theme.colors.primary,n=this.applicationStore.theme.colors.secondary,c=this.$q.dark.isActive?"#121212":"#ffffff",r=e[this.applicationStore.theme.globalStyle];return`radial-gradient(${a}, ${n}30 15%, ${i}30 40%, ${c} 95%), linear-gradient(${c}${r}, ${c}${r})`}},watch:{overlayStatus(){this.refinePosition()},"managerProps.overlayStatus"(e){this.overlayStatus=e}},methods:{dragBehavior(e){let t=0,a=0,i=0,n=0;switch(e){case"move":t=1,a=1;break;case"resize-top":t=1,n=-1;break;case"resize-bottom":n=1;break;case"resize-left":a=1,i=-1;break;case"resize-right":i=1;break;case"resize-nw":t=1,a=1,n=-1,i=-1;break;case"resize-ne":t=1,n=-1,i=1;break;case"resize-sw":a=1,i=-1,n=1;break;case"resize-se":n=1,i=1;break}return{top:t,left:a,width:i,height:n}},beginAction(e,t){this.dragAction&&this.dragAction!=="NONE"||(this.cacheWindowParams(),this.dragStart=this.getEventPosition(e),this.dragAction=t,this.mouseCaptured=!0)},applyDrag(e,t){if(!this.dragAction||!this.dragStart)return;const a=this.dragBehavior(this.dragAction);let i=e-this.dragStart.x,n=t-this.dragStart.y,c=this.width+i*a.width;this.minimumWidth&&c<this.minimumWidth&&(c=this.minimumWidth,i=(c-this.width)*a.width),this.maximumWidth&&c>this.maximumWidth&&(c=this.maximumWidth,i=(c-this.width)*a.width);let r=this.height+n*a.height;this.minimumHeight&&r<this.minimumHeight&&(r=this.minimumHeight,n=(r-this.height)*a.height),this.maximumHeight&&r>this.maximumHeight&&(r=this.maximumHeight,n=(r-this.height)*a.height),this.width=c,this.height=r,this.top+=n*a.top,this.left+=i*a.left,this.dragStart={x:e,y:t}},onDragMove(e){if(this.cacheWindowParams(),this.onDragMoveReady){const t=this.getEventPosition(e);this.applyDrag(t.x,t.y),this.onDragMoveReady=!1,window.setTimeout(()=>{this.onDragMoveReady=!0},this.dragMoveDebounce)}},onDragDone(e){this.cacheWindowParams();const t=this.getEventPosition(e);this.applyDrag(t.x,t.y),this.mouseCaptured=!1,this.dragAction="NONE",this.dragStart={x:0,y:0},this.refinePosition()},snapTo(e){e==="top"?this.top=0:e==="right"?this.left=this.windowCache.innerWidth:e==="bottom"?this.top=this.windowCache.innerHeight:e==="left"&&(this.left=0)},cacheWindowParams(){var e;this.windowCache={innerWidth:window.innerWidth,innerHeight:((e=document.body.querySelector("main"))==null?void 0:e.clientHeight)||window.innerHeight}},refinePosition(){this.top<0&&(this.top=0),this.overlayStatus==="minimized"?this.top>this.windowCache.innerHeight-this.heightWhenMinimized&&(this.top=this.windowCache.innerHeight-this.heightWhenMinimized):this.top>this.windowCache.innerHeight-this.height&&(this.top=this.windowCache.innerHeight-this.height),this.left<0&&(this.left=0),this.left>this.windowCache.innerWidth-this.width&&(this.left=this.windowCache.innerWidth-this.width)},refineSize(){this.width<0&&(this.width=0),this.width>this.windowCache.innerWidth&&(this.width=this.windowCache.innerWidth),this.height<0&&(this.height=0),this.height>this.windowCache.innerHeight&&(this.height=this.windowCache.innerHeight)},getEventPosition(e){let t={x:0,y:300};return"touches"in e&&e.touches.length>0?t={x:e.touches[0].clientX,y:e.touches[0].clientY}:"changedTouches"in e&&e.changedTouches.length>0?t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:"clientX"in e&&(t={x:e.clientX,y:e.clientY}),t}},mounted(){this.cacheWindowParams(),this.snapTo(this.spawnSnappedTo),this.refinePosition(),this.refineSize(),window.addEventListener("resize",()=>{this.cacheWindowParams(),this.refinePosition()}),document.addEventListener("mousemove",e=>{this.mouseCaptured&&this.onDragMove(e)},!0),document.addEventListener("mouseup",e=>{this.mouseCaptured&&this.onDragDone(e)},!0),document.addEventListener("touchmove",e=>{this.mouseCaptured&&this.onDragMove(e)},!0),document.addEventListener("touchend",e=>{this.mouseCaptured&&this.onDragDone(e)},!0)}}),mo=e=>(ba("data-v-73cb2d70"),e=e(),ya(),e),Sn={key:0,version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 24 24",width:"1.715em",color:"inherit"},"xml:space":"preserve"},wn=mo(()=>E("path",{fill:"none",d:"M-2,2h24v24H-2V2z"},null,-1)),kn=mo(()=>E("path",{fill:"currentColor",d:`M16,6H4C2.9,6,2,6.9,2,8v12c0,1.1,0.9,2,2,
                            2h12c1.1,0,2-0.9,2-2V8C18,6.9,17.1,6,16,6z M16,20H4V8h12V20z`},null,-1)),Cn=mo(()=>E("path",{fill:"currentColor",d:`M20,18c1.1,0,2-0.9,
                            2-2V4c0-1.1-0.9-2-2-2H8C6.9,2,6,2.9,6,4v2l2,0V4h12v12h-2l0,2H20z`},null,-1)),An=[wn,kn,Cn];function Tn(e,t,a,i,n,c){return k(),oe(Ct,{class:"outer column no-wrap items-stretch",onMouseenter:t[25]||(t[25]=r=>e.hovered=!0),onMouseleave:t[26]||(t[26]=r=>e.hovered=!1),onMousedown:t[27]||(t[27]=r=>e.$emit("overlay-action","select")),style:lt({height:e.isMaximized?"100%":(e.showWindowContent?e.height:e.heightWhenMinimized)+"px",width:e.isMaximized?"100%":e.width+"px",top:`${e.isMaximized||e.top<0?0:e.showWindowContent?e.top>e.windowCache.innerHeight-e.height?e.windowCache.innerHeight-e.height:e.top:e.top>e.windowCache.innerHeight-e.heightWhenMinimized?e.windowCache.innerHeight-e.heightWhenMinimized:e.top}px`,left:`${e.isMaximized||e.left<0?0:e.left>e.windowCache.innerWidth-e.width?e.windowCache.innerWidth-e.width:e.left}px`,background:e.getWindowStyle,backgroundAttachment:"fixed",backdropFilter:e.applicationStore.theme.globalStyle==="aero"?"blur(10px)":"unset",borderRadius:e.isMaximized?"0px":"5px",transition:"0.2s ease background",overflow:e.showWindowContent?"hidden":"show"})},{default:s(()=>[E("div",{class:"bar-container",style:lt({position:e.hoverShowBar?"absolute":"relative"})},[l(tl,{class:Ht(["bar",{"bar-hidden":!e.showWindowTitleBar}])},{default:s(()=>[l(Ie,{name:e.icon,onMousedown:t[0]||(t[0]=r=>e.canMove&&e.beginAction(r,"move")),onTouchstart:t[1]||(t[1]=pe(r=>e.canMove&&e.beginAction(r,"move"),["stop"]))},null,8,["name"]),E("div",{class:"title",onMousedown:t[2]||(t[2]=r=>e.canMove&&e.beginAction(r,"move")),onTouchstart:t[3]||(t[3]=pe(r=>e.canMove&&e.beginAction(r,"move"),["stop"]))},ne(e.title),33),E("div",{class:"col full-height",onMousedown:t[4]||(t[4]=r=>e.canMove&&e.beginAction(r,"move")),onTouchstart:t[5]||(t[5]=pe(r=>e.canMove&&e.beginAction(r,"move"),["stop"]))},null,32),l(Z,{dense:"",flat:"",icon:e.overlayStatus==="minimized"?"expand_more":"minimize",onClick:t[6]||(t[6]=r=>e.$emit("overlay-action","minimize"))},null,8,["icon"]),l(Z,{dense:"",flat:"",icon:e.overlayStatus==="maximized"?void 0:"crop_square",onClick:t[7]||(t[7]=r=>e.$emit("overlay-action","maximize"))},{default:s(()=>[e.overlayStatus==="maximized"?(k(),U("svg",Sn,An)):Ue("",!0)]),_:1},8,["icon"]),l(Z,{dense:"",flat:"",icon:"close",onClick:t[8]||(t[8]=r=>e.$emit("overlay-action","close"))})]),_:1},8,["class"])],4),at(l(co,{class:"col q-pa-none",style:lt(e.hoverShowBar?"margin-top: 32px;":"")},{default:s(()=>[Ho(e.$slots,"default",{},void 0,!0)]),_:3},8,["style"]),[[va,e.showWindowContent]]),e.canResize&&e.canResizeHeight&&!e.isMinimized&&!e.isMaximized?(k(),U("div",{key:0,class:"resize resize-top",onMousedown:t[9]||(t[9]=r=>e.beginAction(r,"resize-top")),onTouchstart:t[10]||(t[10]=pe(r=>e.beginAction(r,"resize-top"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeHeight&&!e.isMinimized&&!e.isMaximized?(k(),U("div",{key:1,class:"resize resize-bottom",onMousedown:t[11]||(t[11]=r=>e.beginAction(r,"resize-bottom")),onTouchstart:t[12]||(t[12]=pe(r=>e.beginAction(r,"resize-bottom"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeWidth&&!e.isMaximized?(k(),U("div",{key:2,class:"resize resize-left",onMousedown:t[13]||(t[13]=r=>e.beginAction(r,"resize-left")),onTouchstart:t[14]||(t[14]=pe(r=>e.beginAction(r,"resize-left"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeWidth&&!e.isMaximized?(k(),U("div",{key:3,class:"resize resize-right",onMousedown:t[15]||(t[15]=r=>e.beginAction(r,"resize-right")),onTouchstart:t[16]||(t[16]=pe(r=>e.beginAction(r,"resize-right"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(k(),U("div",{key:4,class:"resize resize-nw",onMousedown:t[17]||(t[17]=r=>e.beginAction(r,"resize-nw")),onTouchstart:t[18]||(t[18]=pe(r=>e.beginAction(r,"resize-nw"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(k(),U("div",{key:5,class:"resize resize-ne",onMousedown:t[19]||(t[19]=r=>e.beginAction(r,"resize-ne")),onTouchstart:t[20]||(t[20]=pe(r=>e.beginAction(r,"resize-ne"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(k(),U("div",{key:6,class:"resize resize-sw",onMousedown:t[21]||(t[21]=r=>e.beginAction(r,"resize-sw")),onTouchstart:t[22]||(t[22]=pe(r=>e.beginAction(r,"resize-sw"),["stop"]))},null,32)):Ue("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(k(),U("div",{key:7,class:"resize resize-se",onMousedown:t[23]||(t[23]=r=>e.beginAction(r,"resize-se")),onTouchstart:t[24]||(t[24]=pe(r=>e.beginAction(r,"resize-se"),["stop"]))},null,32)):Ue("",!0)]),_:3},8,["style"])}var At=et(yn,[["render",Tn],["__scopeId","data-v-73cb2d70"]]);const Mn=Ke({name:"AudioOverlay",props:{propsToPass:{type:Object,default:()=>({}),required:!1}},components:{OverlayShell:At},setup(){return{applicationStore:zt,AudioIO:Ko}},data(){return{tab:"input",isListeningToFeedback:!1}},methods:{toggleMicrophoneMute(){this.applicationStore.audio.user.hasInputAccess&&Sl.muteAudio()},toggleInputFeedback(){this.isListeningToFeedback=!this.isListeningToFeedback,this.isListeningToFeedback?(this.$refs.audioInputFeedbackPlayer.muted=!1,this.$refs.audioInputFeedbackPlayer.play()):this.$refs.audioInputFeedbackPlayer.pause()},setFeedbackPlayerStream(e){this.isListeningToFeedback&&this.$refs.audioInputFeedbackPlayer&&(typeof e=="string"?this.$refs.audioInputFeedbackPlayer.src=e:this.$refs.audioInputFeedbackPlayer.srcObject=e)}},unmounted:function(){this.isListeningToFeedback=!1,this.setFeedbackPlayerStream(null)}}),$n={class:"row"},Vn={class:".col-4"},Ln={class:".col-8 row items-center"},En={key:0,class:"text-subtitle1 items-center"},_n={key:1,class:"text-subtitle1 items-center"},On={class:"row q-mt-sm"},In={key:0,class:"text-caption row items-center"},qn={key:1,class:"text-caption row items-center"},Rn={ref:"audioInputFeedbackPlayer"},Pn={key:0,class:"text-subtitle1 text-grey text-center"},Nn={class:".col-8 row items-center"},Dn={key:0,class:"text-subtitle1 items-center"},Bn={key:1,class:"text-subtitle1 items-center"};function zn(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"headphones",title:"Audio",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400},{default:s(()=>[l(Ct,{class:"column full-height"},{default:s(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tab=o),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:s(()=>[l(Xe,{name:"input",label:"Input"}),l(Xe,{name:"output",label:"Output"})]),_:1},8,["modelValue"]),l(Gt),l(Et,{class:"col"},{default:s(()=>[l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=o=>e.tab=o),animated:""},{default:s(()=>[l(ot,{name:"input"},{default:s(()=>[E("div",$n,[E("div",Vn,[l(Z,{fab:"",class:"q-mr-sm",color:e.applicationStore.audio.user.hasInputAccess?e.applicationStore.audio.user.muted?"red":"primary":"grey",icon:e.applicationStore.audio.user.muted?"mic_off":"mic",onClick:e.toggleMicrophoneMute},null,8,["color","icon","onClick"])]),E("div",Ln,[e.AudioIO.selectedInput!=="None selected"?(k(),U("span",En," Using "+ne(e.AudioIO.selectedInput),1)):(k(),U("span",_n," No microphone selected. "))])]),at(E("div",On,[l(Z,{flat:"",dense:"",round:"",class:"q-mr-sm",disabled:!e.applicationStore.audio.user.hasInputAccess,color:e.isListeningToFeedback?"primary":"red",icon:e.isListeningToFeedback?"hearing":"hearing_disabled",onClick:e.toggleInputFeedback},null,8,["disabled","color","icon","onClick"]),e.isListeningToFeedback?(k(),U("span",qn," Speak into your microphone to listen. ")):(k(),U("span",In," Click to test your microphone. ")),E("audio",Rn,null,512)],512),[[va,e.applicationStore.audio.user.hasInputAccess]]),l(Gt,{class:"q-my-md"}),e.applicationStore.audio.user.hasInputAccess?(k(),oe(dt,{key:1},{default:s(()=>[(k(!0),U(We,null,bt(e.applicationStore.audio.inputsList,o=>(k(),U("div",{key:o.deviceId},[l(yo,{onClick:v=>e.AudioIO.requestInputAccess(o.deviceId),modelValue:e.AudioIO.selectedInput,"onUpdate:modelValue":t[1]||(t[1]=v=>e.AudioIO.selectedInput=v),val:o.label,label:o.label,color:"primary"},null,8,["onClick","modelValue","val","label"])]))),128))]),_:1})):(k(),U("div",Pn," Please grant mic access to the app in order to speak. "))]),_:1}),l(ot,{name:"output"},{default:s(()=>[E("div",Nn,[e.AudioIO.selectedOutput?(k(),U("span",Dn," Using "+ne(e.AudioIO.selectedOutput),1)):(k(),U("span",Bn," No output selected. "))]),l(Gt,{class:"q-my-md"}),l(dt,null,{default:s(()=>[(k(!0),U(We,null,bt(e.applicationStore.audio.outputsList,o=>(k(),U("div",{key:o.deviceId},[l(yo,{onClick:v=>e.AudioIO.requestOutputAccess(o.deviceId),modelValue:e.AudioIO.selectedOutput,"onUpdate:modelValue":t[2]||(t[2]=v=>e.AudioIO.selectedOutput=v),val:o.label,label:o.label,color:"primary"},null,8,["onClick","modelValue","val","label"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(el,{showing:e.applicationStore.audio.inputsList.length===0},{default:s(()=>[l(bn,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1},8,["managerProps"])}var xn=et(Mn,[["render",zn]]);const Co="q-slider__marker-labels",Fn=e=>({value:e}),Un=({marker:e})=>m("div",{key:e.value,style:e.style,class:e.classes},e.label),al=[34,37,40,33,39,38],Hn={...Jt,..._a,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Wn=["pan","update:modelValue","change"];function jn({updateValue:e,updatePosition:t,getDragging:a,formAttrs:i}){const{props:n,emit:c,slots:r,proxy:{$q:o}}=st(),v=Xt(n,o),b=so(i),y=F(!1),V=F(!1),h=F(!1),g=F(!1),_=f(()=>n.vertical===!0?"--v":"--h"),H=f(()=>"-"+(n.switchLabelSide===!0?"switched":"standard")),N=f(()=>n.vertical===!0?n.reverse===!0:n.reverse!==(o.lang.rtl===!0)),ie=f(()=>isNaN(n.innerMin)===!0||n.innerMin<n.min?n.min:n.innerMin),j=f(()=>isNaN(n.innerMax)===!0||n.innerMax>n.max?n.max:n.innerMax),S=f(()=>n.disable!==!0&&n.readonly!==!0&&ie.value<j.value),L=f(()=>(String(n.step).trim().split(".")[1]||"").length),B=f(()=>n.step===0?1:n.step),le=f(()=>S.value===!0?n.tabindex||0:-1),me=f(()=>n.max-n.min),Ee=f(()=>j.value-ie.value),Pe=f(()=>Q(ie.value)),$e=f(()=>Q(j.value)),Ae=f(()=>n.vertical===!0?N.value===!0?"bottom":"top":N.value===!0?"right":"left"),J=f(()=>n.vertical===!0?"height":"width"),_e=f(()=>n.vertical===!0?"width":"height"),Be=f(()=>n.vertical===!0?"vertical":"horizontal"),ce=f(()=>{const w={role:"slider","aria-valuemin":ie.value,"aria-valuemax":j.value,"aria-orientation":Be.value,"data-step":n.step};return n.disable===!0?w["aria-disabled"]="true":n.readonly===!0&&(w["aria-readonly"]="true"),w}),He=f(()=>`q-slider q-slider${_.value} q-slider--${y.value===!0?"":"in"}active inline no-wrap `+(n.vertical===!0?"row":"column")+(n.disable===!0?" disabled":" q-slider--enabled"+(S.value===!0?" q-slider--editable":""))+(h.value==="both"?" q-slider--focus":"")+(n.label||n.labelAlways===!0?" q-slider--label":"")+(n.labelAlways===!0?" q-slider--label-always":"")+(v.value===!0?" q-slider--dark":"")+(n.dense===!0?" q-slider--dense q-slider--dense"+_.value:""));function Qe(w){const Y="q-slider__"+w;return`${Y} ${Y}${_.value} ${Y}${_.value}${H.value}`}function Ge(w){const Y="q-slider__"+w;return`${Y} ${Y}${_.value}`}const he=f(()=>{const w=n.selectionColor||n.color;return"q-slider__selection absolute"+(w!==void 0?` text-${w}`:"")}),I=f(()=>Ge("markers")+" absolute overflow-hidden"),C=f(()=>Ge("track-container")),D=f(()=>Qe("pin")),R=f(()=>Qe("label")),ue=f(()=>Qe("text-container")),Ve=f(()=>Qe("marker-labels-container")+(n.markerLabelsClass!==void 0?` ${n.markerLabelsClass}`:"")),X=f(()=>"q-slider__track relative-position no-outline"+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),ee=f(()=>{const w={[_e.value]:n.trackSize};return n.trackImg!==void 0&&(w.backgroundImage=`url(${n.trackImg}) !important`),w}),qe=f(()=>"q-slider__inner absolute"+(n.innerTrackColor!==void 0?` bg-${n.innerTrackColor}`:"")),p=f(()=>{const w={[Ae.value]:`${100*Pe.value}%`,[J.value]:`${100*($e.value-Pe.value)}%`};return n.innerTrackImg!==void 0&&(w.backgroundImage=`url(${n.innerTrackImg}) !important`),w});function q(w){const{min:Y,max:ke,step:fe}=n;let ze=Y+w*(ke-Y);if(fe>0){const ft=(ze-Y)%fe;ze+=(Math.abs(ft)>=fe/2?(ft<0?-1:1)*fe:0)-ft}return L.value>0&&(ze=parseFloat(ze.toFixed(L.value))),Qt(ze,ie.value,j.value)}function Q(w){return me.value===0?0:(w-n.min)/me.value}function ae(w,Y){const ke=wl(w),fe=n.vertical===!0?Qt((ke.top-Y.top)/Y.height,0,1):Qt((ke.left-Y.left)/Y.width,0,1);return Qt(N.value===!0?1-fe:fe,Pe.value,$e.value)}const ge=f(()=>kl(n.markers)===!0?n.markers:B.value),K=f(()=>{const w=[],Y=ge.value,ke=n.max;let fe=n.min;do w.push(fe),fe+=Y;while(fe<ke);return w.push(ke),w}),Se=f(()=>{const w=` ${Co}${_.value}-`;return Co+`${w}${n.switchMarkerLabelsSide===!0?"switched":"standard"}${w}${N.value===!0?"rtl":"ltr"}`}),ve=f(()=>n.markerLabels===!1?null:mt(n.markerLabels).map((w,Y)=>({index:Y,value:w.value,label:w.label||w.value,classes:Se.value+(w.classes!==void 0?" "+w.classes:""),style:{...Oe(w.value),...w.style||{}}}))),Ye=f(()=>({markerList:ve.value,markerMap:A.value,classes:Se.value,getStyle:Oe})),tt=f(()=>{if(Ee.value!==0){const w=100*ge.value/Ee.value;return{...p.value,backgroundSize:n.vertical===!0?`2px ${w}%`:`${w}% 2px`}}return null});function mt(w){if(w===!1)return null;if(w===!0)return K.value.map(Fn);if(typeof w=="function")return K.value.map(ke=>{const fe=w(ke);return Na(fe)===!0?{...fe,value:ke}:{value:ke,label:fe}});const Y=({value:ke})=>ke>=n.min&&ke<=n.max;return Array.isArray(w)===!0?w.map(ke=>Na(ke)===!0?ke:{value:ke}).filter(Y):Object.keys(w).map(ke=>{const fe=w[ke],ze=Number(ke);return Na(fe)===!0?{...fe,value:ze}:{value:ze,label:fe}}).filter(Y)}function Oe(w){return{[Ae.value]:`${100*(w-n.min)/me.value}%`}}const A=f(()=>{if(n.markerLabels===!1)return null;const w={};return ve.value.forEach(Y=>{w[Y.value]=Y}),w});function P(){if(r["marker-label-group"]!==void 0)return r["marker-label-group"](Ye.value);const w=r["marker-label"]||Un;return ve.value.map(Y=>w({marker:Y,...Ye.value}))}const G=f(()=>[[Qo,Le,void 0,{[Be.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Le(w){w.isFinal===!0?(g.value!==void 0&&(t(w.evt),w.touch===!0&&e(!0),g.value=void 0,c("pan","end")),y.value=!1,h.value=!1):w.isFirst===!0?(g.value=a(w.evt),t(w.evt),e(),y.value=!0,c("pan","start")):(t(w.evt),e())}function we(){h.value=!1}function de(w){t(w,a(w)),e(),V.value=!0,y.value=!0,document.addEventListener("mouseup",re,!0)}function re(){V.value=!1,y.value=!1,e(!0),we(),document.removeEventListener("mouseup",re,!0)}function De(w){t(w,a(w)),e(!0)}function Ne(w){al.includes(w.keyCode)&&e(!0)}function Ze(w){if(n.vertical===!0)return null;const Y=o.lang.rtl!==n.reverse?1-w:w;return{transform:`translateX(calc(${2*Y-1} * ${n.thumbSize} / 2 + ${50-100*Y}%))`}}function Je(w){const Y=f(()=>V.value===!1&&(h.value===w.focusValue||h.value==="both")?" q-slider--focus":""),ke=f(()=>`q-slider__thumb q-slider__thumb${_.value} q-slider__thumb${_.value}-${N.value===!0?"rtl":"ltr"} absolute non-selectable`+Y.value+(w.thumbColor.value!==void 0?` text-${w.thumbColor.value}`:"")),fe=f(()=>({width:n.thumbSize,height:n.thumbSize,[Ae.value]:`${100*w.ratio.value}%`,zIndex:h.value===w.focusValue?2:void 0})),ze=f(()=>w.labelColor.value!==void 0?` text-${w.labelColor.value}`:""),ft=f(()=>Ze(w.ratio.value)),Re=f(()=>"q-slider__text"+(w.labelTextColor.value!==void 0?` text-${w.labelTextColor.value}`:""));return()=>{const vt=[m("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[m("path",{d:n.thumbPath})]),m("div",{class:"q-slider__focus-ring fit"})];return(n.label===!0||n.labelAlways===!0)&&(vt.push(m("div",{class:D.value+" absolute fit no-pointer-events"+ze.value},[m("div",{class:R.value,style:{minWidth:n.thumbSize}},[m("div",{class:ue.value,style:ft.value},[m("span",{class:Re.value},w.label.value)])])])),n.name!==void 0&&n.disable!==!0&&b(vt,"push")),m("div",{class:ke.value,style:fe.value,...w.getNodeData()},vt)}}function yt(w,Y,ke,fe){const ze=[];n.innerTrackColor!=="transparent"&&ze.push(m("div",{key:"inner",class:qe.value,style:p.value})),n.selectionColor!=="transparent"&&ze.push(m("div",{key:"selection",class:he.value,style:w.value})),n.markers!==!1&&ze.push(m("div",{key:"marker",class:I.value,style:tt.value})),fe(ze);const ft=[La("div",{key:"trackC",class:C.value,tabindex:Y.value,...ke.value},[m("div",{class:X.value,style:ee.value},ze)],"slide",S.value,()=>G.value)];if(n.markerLabels!==!1){const Re=n.switchMarkerLabelsSide===!0?"unshift":"push";ft[Re](m("div",{key:"markerL",class:Ve.value},P()))}return ft}return ga(()=>{document.removeEventListener("mouseup",re,!0)}),{state:{active:y,focus:h,preventFocus:V,dragging:g,editable:S,classes:He,tabindex:le,attributes:ce,step:B,decimals:L,trackLen:me,innerMin:ie,innerMinRatio:Pe,innerMax:j,innerMaxRatio:$e,positionProp:Ae,sizeProp:J,isReversed:N},methods:{onActivate:de,onMobileClick:De,onBlur:we,onKeyup:Ne,getContent:yt,getThumbRenderFn:Je,convertRatioToModel:q,convertModelToRatio:Q,getDraggingRatio:ae}}}const Kn=()=>({});var Rt=je({name:"QSlider",props:{...Hn,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Wn,setup(e,{emit:t}){const{proxy:{$q:a}}=st(),{state:i,methods:n}=jn({updateValue:_,updatePosition:N,getDragging:H,formAttrs:Gl(e)}),c=F(null),r=F(0),o=F(0);function v(){o.value=e.modelValue===null?i.innerMin.value:Qt(e.modelValue,i.innerMin.value,i.innerMax.value)}it(()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,v),v();const b=f(()=>n.convertModelToRatio(o.value)),y=f(()=>i.active.value===!0?r.value:b.value),V=f(()=>{const S={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(y.value-i.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(S.backgroundImage=`url(${e.selectionImg}) !important`),S}),h=n.getThumbRenderFn({focusValue:!0,getNodeData:Kn,ratio:y,label:f(()=>e.labelValue!==void 0?e.labelValue:o.value),thumbColor:f(()=>e.thumbColor||e.color),labelColor:f(()=>e.labelColor),labelTextColor:f(()=>e.labelTextColor)}),g=f(()=>i.editable.value!==!0?{}:a.platform.is.mobile===!0?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:ie,onBlur:n.onBlur,onKeydown:j,onKeyup:n.onKeyup});function _(S){o.value!==e.modelValue&&t("update:modelValue",o.value),S===!0&&t("change",o.value)}function H(){return c.value.getBoundingClientRect()}function N(S,L=i.dragging.value){const B=n.getDraggingRatio(S,L);o.value=n.convertRatioToModel(B),r.value=e.snap!==!0||e.step===0?B:n.convertModelToRatio(o.value)}function ie(){i.focus.value=!0}function j(S){if(!al.includes(S.keyCode))return;ut(S);const L=([34,33].includes(S.keyCode)?10:1)*i.step.value,B=([34,37,40].includes(S.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*L;o.value=Qt(parseFloat((o.value+B).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),_()}return()=>{const S=n.getContent(V,i.tabindex,g,L=>{L.push(h())});return m("div",{ref:c,class:i.classes.value+(e.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},S)}}});const Qn={...Jt,...io,..._a,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Gn=["update:modelValue"];function Yn(e,t){const{props:a,slots:i,emit:n,proxy:c}=st(),{$q:r}=c,o=Xt(a,r),v=F(null),{refocusTargetEl:b,refocusTarget:y}=Yl(a,v),V=no(a,Jl),h=f(()=>a.val!==void 0&&Array.isArray(a.modelValue)),g=f(()=>{const J=aa(a.val);return h.value===!0?a.modelValue.findIndex(_e=>aa(_e)===J):-1}),_=f(()=>h.value===!0?g.value>-1:aa(a.modelValue)===aa(a.trueValue)),H=f(()=>h.value===!0?g.value===-1:aa(a.modelValue)===aa(a.falseValue)),N=f(()=>_.value===!1&&H.value===!1),ie=f(()=>a.disable===!0?-1:a.tabindex||0),j=f(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(a.disable===!0?" disabled":"")+(o.value===!0?` q-${e}--dark`:"")+(a.dense===!0?` q-${e}--dense`:"")+(a.leftLabel===!0?" reverse":"")),S=f(()=>{const J=_.value===!0?"truthy":H.value===!0?"falsy":"indet",_e=a.color!==void 0&&(a.keepColor===!0||(e==="toggle"?_.value===!0:H.value!==!0))?` text-${a.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${J}${_e}`}),L=f(()=>{const J={type:"checkbox"};return a.name!==void 0&&Object.assign(J,{".checked":_.value,"^checked":_.value===!0?"checked":void 0,name:a.name,value:h.value===!0?a.val:a.trueValue}),J}),B=so(L),le=f(()=>{const J={tabindex:ie.value,role:e==="toggle"?"switch":"checkbox","aria-label":a.label,"aria-checked":N.value===!0?"mixed":_.value===!0?"true":"false"};return a.disable===!0&&(J["aria-disabled"]="true"),J});function me(J){J!==void 0&&(ut(J),y(J)),a.disable!==!0&&n("update:modelValue",Ee(),J)}function Ee(){if(h.value===!0){if(_.value===!0){const J=a.modelValue.slice();return J.splice(g.value,1),J}return a.modelValue.concat([a.val])}if(_.value===!0){if(a.toggleOrder!=="ft"||a.toggleIndeterminate===!1)return a.falseValue}else if(H.value===!0){if(a.toggleOrder==="ft"||a.toggleIndeterminate===!1)return a.trueValue}else return a.toggleOrder!=="ft"?a.trueValue:a.falseValue;return a.indeterminateValue}function Pe(J){(J.keyCode===13||J.keyCode===32)&&ut(J)}function $e(J){(J.keyCode===13||J.keyCode===32)&&me(J)}const Ae=t(_,N);return Object.assign(c,{toggle:me}),()=>{const J=Ae();a.disable!==!0&&B(J,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const _e=[m("div",{class:S.value,style:V.value,"aria-hidden":"true"},J)];b.value!==null&&_e.push(b.value);const Be=a.label!==void 0?ao(i.default,[a.label]):na(i.default);return Be!==void 0&&_e.push(m("div",{class:`q-${e}__label q-anchor--skip`},Be)),m("div",{ref:v,class:j.value,...le.value,onClick:me,onKeydown:Pe,onKeyup:$e},_e)}}var Ut=je({name:"QToggle",props:{...Qn,icon:String,iconColor:String},emits:Gn,setup(e){function t(a,i){const n=f(()=>(a.value===!0?e.checkedIcon:i.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),c=f(()=>a.value===!0?e.iconColor:null);return()=>[m("div",{class:"q-toggle__track"}),m("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[m(Ie,{name:n.value,color:c.value})]:void 0)]}return Yn("toggle",t)}});class Ao{static formatKeyName(t){if(t.includes("Key"))return t.split("Key")[1];if(t.includes("Digit"))return t.split("Digit")[1];if(t.includes("Numpad"))return t.split("Numpad")[1];const a={ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192"};if(t in a)return a[t];const i={ShiftLeft:"Left Shift",ShiftRight:"Right Shift",ControlLeft:"Left Control",ControlRight:"Right Control",AltLeft:"Left Alt",AltRight:"Right Alt"};return t in i?i[t]:t}static getSpecialKeyIndicator(t){if(t.includes("Control")||t.includes("Alt"))return{icon:"priority_high",message:"This key may have unintended side effects."};if(t.includes("Numpad"))return{icon:"dialpad",message:"This key is on the number pad."};if(t.includes("Gamepad"))return{icon:"gamepad",message:"This button is on a gamepad."}}static keycodeAlreadyBound(t){return Boolean(Object.entries(Wt.controls.keyboard).find(a=>Object.entries(a[1]).find(i=>i[1].keycode===t)))}static rebindControl(t,a){if(!(!t||!a)&&!(a===""||a==="Escape"||a==="NumLock"||a.includes("Meta")||/^F[0-9]{1,2}$/iu.test(a))){if(this.keycodeAlreadyBound(a)&&t.keycode!==a){Cl.create({type:"negative",textColor:"white",icon:"warning",message:`"${this.formatKeyName(a)}" is already in use.`});return}t.keycode=a}}static rebindControlByName(t,a,i){var c,r;if(!t||!a||!i)return;const n=(r=(c=Wt.controls.keyboard)==null?void 0:c[t])==null?void 0:r[a];!n||this.rebindControl(n,i)}}const Jn=Ke({name:"ControlsOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{userStore:Wt,KeyboardSettings:Ao}},data(){return{tab:"mouse",currentlyBinding:void 0}},computed:{mouseSensitivity:{get(){return this.userStore.controls.mouse.sensitivity},set(e){Da.sensitivity=e}},mouseAcceleration:{get(){return this.userStore.controls.mouse.acceleration},set(e){Da.acceleration=e}},mouseInvert:{get(){return this.userStore.controls.mouse.invert},set(e){Da.invert=e}}},methods:{listenForRebind(e){const t=e.code;!t||!this.currentlyBinding||(Ao.rebindControl(this.currentlyBinding,t),this.currentlyBinding=void 0)}}}),ol=e=>(ba("data-v-0a79404a"),e=e(),ya(),e),Xn={for:"mouseSensitivity"},Zn={for:"mouseAcceleration"},ei={for:"mouseInvert"},ti=ol(()=>E("p",{class:"q-mt-xs q-mb-xs text-caption text-grey-6",style:{width:"100%","text-align":"center"}},"Select a control to rebind it.",-1)),ai=ol(()=>E("p",{class:"q-mb-sm text-caption text-grey-6",style:{width:"100%","text-align":"center"}},"Press ESC to cancel.",-1)),oi={key:0,class:"rebindPrompt text-grey-6"},li={key:1,class:"row q-gutter-x-sm"},ni={for:"bloom"};function ii(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"gamepad",title:"Controls",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400},{default:s(()=>[l(Ct,{class:"flex column no-wrap full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tab=o)},{default:s(()=>[l(Xe,{name:"mouse",icon:"mouse",label:""},{default:s(()=>[l(Ua,{class:"bg-black"},{default:s(()=>[x("Mouse")]),_:1})]),_:1}),l(Xe,{name:"keyboard",icon:"keyboard",label:""},{default:s(()=>[l(Ua,{class:"bg-black"},{default:s(()=>[x("Keyboard")]),_:1})]),_:1}),l(Xe,{name:"camera",icon:"camera",label:""},{default:s(()=>[l(Ua,{class:"bg-black"},{default:s(()=>[x("Camera")]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=o=>e.tab=o),animated:"",class:"full-height",style:{background:"transparent"}},{default:s(()=>[l(ot,{name:"mouse"},{default:s(()=>[l(Et,{class:"full-height"},{default:s(()=>[l(dt,{class:"q-pb-md"},{default:s(()=>[l(Me,null,{default:s(()=>[l(W,null,{default:s(()=>[l(wt,null,{default:s(()=>[x("Sensitivity")]),_:1})]),_:1}),l(W,{class:"q-pl-xl"},{default:s(()=>[l(Rt,{name:"mouseSensitivity",thumbSize:"26px",min:0,max:100,step:5,snap:"",modelValue:e.mouseSensitivity,"onUpdate:modelValue":t[1]||(t[1]=o=>e.mouseSensitivity=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",Xn,ne(e.mouseSensitivity),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,null,{default:s(()=>[l(wt,null,{default:s(()=>[x("Acceleration")]),_:1})]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"mouseAcceleration",modelValue:e.mouseAcceleration,"onUpdate:modelValue":t[2]||(t[2]=o=>e.mouseAcceleration=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",Zn,ne(e.mouseAcceleration?"On":"Off"),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,null,{default:s(()=>[l(wt,null,{default:s(()=>[x("Invert")]),_:1})]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"mouseInvert",modelValue:e.mouseInvert,"onUpdate:modelValue":t[3]||(t[3]=o=>e.mouseInvert=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",ei,ne(e.mouseInvert?"On":"Off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ot,{name:"keyboard",class:"q-px-none q-pb-none column no-wrap items-stretch"},{default:s(()=>[ti,ai,l(Et,{class:"full-height"},{default:s(()=>[l(dt,{class:"q-pb-md",onKeydown:t[4]||(t[4]=pe(o=>e.listenForRebind(o),["prevent","stop"]))},{default:s(()=>[(k(!0),U(We,null,bt(e.userStore.controls.keyboard,(o,v)=>(k(),U(We,{key:v},[l(wt,{header:"",style:{"text-transform":"capitalize"}},{default:s(()=>[x(ne(v),1)]),_:2},1024),(k(!0),U(We,null,bt(o,b=>at((k(),oe(Me,{key:b.name,clickable:"","inset-level":1,onClick:y=>e.currentlyBinding=b},{default:s(()=>[l(W,null,{default:s(()=>[l(wt,null,{default:s(()=>[x(ne(b.name),1)]),_:2},1024)]),_:2},1024),l(W,null,{default:s(()=>{var y,V,h;return[((y=e.currentlyBinding)==null?void 0:y.name)===b.name?(k(),U("div",oi,"Press any key...")):(k(),U("div",li,[E("kbd",null,ne(e.KeyboardSettings.formatKeyName(b.keycode)),1),e.KeyboardSettings.getSpecialKeyIndicator(b.keycode)?(k(),oe(Ie,{key:0,name:(V=e.KeyboardSettings.getSpecialKeyIndicator(b.keycode))==null?void 0:V.icon,title:(h=e.KeyboardSettings.getSpecialKeyIndicator(b.keycode))==null?void 0:h.message,class:"q-mt-sm"},null,8,["name","title"])):Ue("",!0)]))]}),_:2},1024)]),_:2},1032,["onClick"])),[[St]])),128))],64))),128))]),_:1})]),_:1})]),_:1}),l(ot,{name:"camera",class:"q-px-none q-pb-none column no-wrap items-stretch"},{default:s(()=>[l(Et,{class:"full-height"},{default:s(()=>[l(dt,{class:"q-pb-md"},{default:s(()=>[l(Me,null,{default:s(()=>[l(W,{title:"Camera Bobbing"},{default:s(()=>[x(" Camera Bobbing ")]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"bloom",modelValue:e.userStore.graphics.cameraBobbing,"onUpdate:modelValue":t[5]||(t[5]=o=>e.userStore.graphics.cameraBobbing=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",ni,ne(e.userStore.graphics.cameraBobbing?"On":"Off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["managerProps"])}var ri=et(Jn,[["render",ii],["__scopeId","data-v-0a79404a"]]);const si=Ke({name:"GraphicsOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{userStore:Wt}},computed:{fieldOfView:{get(){return this.userStore.graphics.fieldOfView},set(e){this.userStore.graphics.fieldOfView=typeof e=="string"?parseInt(e,10):e}},msaa:{get(){return this.userStore.graphics.msaa},set(e){this.userStore.graphics.msaa=typeof e=="string"?parseInt(e,10):e}}}}),ui={for:"fpsCounter"},di={for:"fieldOfView"},ci={for:"bloom"},mi={for:"bloom"},fi={for:"fxaaEnabled"},vi={for:"msaa"},pi={for:"sharpen"};function hi(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"desktop_windows",title:"Graphics",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[l(Et,{class:"q-mt-md full-height"},{default:s(()=>[l(dt,{class:"q-pb-md"},{default:s(()=>[l(Me,null,{default:s(()=>[l(W,{title:"FPS Counter"},{default:s(()=>[x(" FPS Counter ")]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"fpsCounter",modelValue:e.userStore.graphics.fpsCounter,"onUpdate:modelValue":t[0]||(t[0]=o=>e.userStore.graphics.fpsCounter=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",ui,ne(e.userStore.graphics.fpsCounter?"On":"Off"),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,{title:"Field of View"},{default:s(()=>[x(" Field of View ")]),_:1}),l(W,{class:"q-pl-xl"},{default:s(()=>[l(Rt,{name:"fieldOfView",thumbSize:"26px",min:70,max:120,step:5,snap:"",modelValue:e.fieldOfView,"onUpdate:modelValue":t[1]||(t[1]=o=>e.fieldOfView=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",di,ne(e.fieldOfView),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,{title:"Camera Bobbing"},{default:s(()=>[x(" Camera Bobbing ")]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"bloom",modelValue:e.userStore.graphics.cameraBobbing,"onUpdate:modelValue":t[2]||(t[2]=o=>e.userStore.graphics.cameraBobbing=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",ci,ne(e.userStore.graphics.cameraBobbing?"On":"Off"),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,{title:"Bloom"},{default:s(()=>[x(" Bloom ")]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"bloom",modelValue:e.userStore.graphics.bloom,"onUpdate:modelValue":t[3]||(t[3]=o=>e.userStore.graphics.bloom=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",mi,ne(e.userStore.graphics.bloom?"On":"Off"),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,{title:"Fast Approximate Anti-Aliasing"},{default:s(()=>[x(" FXAA ")]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"fxaaEnabled",modelValue:e.userStore.graphics.fxaaEnabled,"onUpdate:modelValue":t[4]||(t[4]=o=>e.userStore.graphics.fxaaEnabled=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",fi,ne(e.userStore.graphics.fxaaEnabled?"On":"Off"),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,{title:"Multisample Anti-Aliasing"},{default:s(()=>[x(" MSAA ")]),_:1}),l(W,{class:"q-pl-xl"},{default:s(()=>[l(Rt,{name:"msaa",thumbSize:"26px",min:1,max:8,step:1,snap:"",modelValue:e.msaa,"onUpdate:modelValue":t[5]||(t[5]=o=>e.msaa=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",vi,ne(e.msaa===1?"Off":`\xD7${e.msaa}`),1)]),_:1})]),_:1}),l(Me,null,{default:s(()=>[l(W,{title:"Sharpen"},{default:s(()=>[x(" Sharpen ")]),_:1}),l(W,{class:"q-pl-sm"},{default:s(()=>[l(Ut,{name:"sharpen",modelValue:e.userStore.graphics.sharpen,"onUpdate:modelValue":t[6]||(t[6]=o=>e.userStore.graphics.sharpen=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:s(()=>[E("output",pi,ne(e.userStore.graphics.sharpen?"On":"Off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["managerProps"])}var gi=et(si,[["render",hi]]),bi=je({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const a=f(()=>e.sent===!0?"sent":"received"),i=f(()=>`q-message-text-content q-message-text-content--${a.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),n=f(()=>`q-message-text q-message-text--${a.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),c=f(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),r=f(()=>e.size!==void 0?`col-${e.size}`:""),o=f(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function v(y){return t.stamp!==void 0?[y,m("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[y,m("div",{class:"q-message-stamp",[o.value.stamp]:e.stamp})]:[y]}function b(y,V){const h=V===!0?y.length>1?g=>g:g=>m("div",[g]):g=>m("div",{[o.value.msg]:g});return y.map((g,_)=>m("div",{key:_,class:n.value},[m("div",{class:i.value},v(h(g)))]))}return()=>{const y=[];t.avatar!==void 0?y.push(t.avatar()):e.avatar!==void 0&&y.push(m("img",{class:`q-message-avatar q-message-avatar--${a.value}`,src:e.avatar,"aria-hidden":"true"}));const V=[];t.name!==void 0?V.push(m("div",{class:`q-message-name q-message-name--${a.value}`},t.name())):e.name!==void 0&&V.push(m("div",{class:`q-message-name q-message-name--${a.value}`,[o.value.name]:e.name})),t.default!==void 0?V.push(b(Al(t.default()),!0)):e.text!==void 0&&V.push(b(e.text)),y.push(m("div",{class:r.value},V));const h=[];return t.label!==void 0?h.push(m("div",{class:"q-message-label"},t.label())):e.label!==void 0&&h.push(m("div",{class:"q-message-label",[o.value.label]:e.label})),h.push(m("div",{class:c.value},y)),m("div",{class:`q-message q-message-${a.value}`},h)}}});/*! @license DOMPurify 3.0.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.3/LICENSE */const{entries:ll,setPrototypeOf:To,isFrozen:yi,getPrototypeOf:Si,getOwnPropertyDescriptor:wi}=Object;let{freeze:rt,seal:_t,create:ki}=Object,{apply:Xa,construct:Za}=typeof Reflect<"u"&&Reflect;Xa||(Xa=function(t,a,i){return t.apply(a,i)});rt||(rt=function(t){return t});_t||(_t=function(t){return t});Za||(Za=function(t,a){return new t(...a)});const Ci=kt(Array.prototype.forEach),Mo=kt(Array.prototype.pop),ua=kt(Array.prototype.push),Va=kt(String.prototype.toLowerCase),Ha=kt(String.prototype.toString),Ai=kt(String.prototype.match),Mt=kt(String.prototype.replace),Ti=kt(String.prototype.indexOf),Mi=kt(String.prototype.trim),pt=kt(RegExp.prototype.test),da=$i(TypeError);function kt(e){return function(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];return Xa(e,t,i)}}function $i(e){return function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return Za(e,a)}}function se(e,t,a){var i;a=(i=a)!==null&&i!==void 0?i:Va,To&&To(e,null);let n=t.length;for(;n--;){let c=t[n];if(typeof c=="string"){const r=a(c);r!==c&&(yi(t)||(t[n]=r),c=r)}e[c]=!0}return e}function oa(e){const t=ki(null);for(const[a,i]of ll(e))t[a]=i;return t}function Ta(e,t){for(;e!==null;){const i=wi(e,t);if(i){if(i.get)return kt(i.get);if(typeof i.value=="function")return kt(i.value)}e=Si(e)}function a(i){return console.warn("fallback value for",i),null}return a}const $o=rt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wa=rt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ja=rt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Vi=rt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ka=rt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Li=rt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vo=rt(["#text"]),Lo=rt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Qa=rt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Eo=rt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ma=rt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ei=_t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_i=_t(/<%[\w\W]*|[\w\W]*%>/gm),Oi=_t(/\${[\w\W]*}/gm),Ii=_t(/^data-[\-\w.\u00B7-\uFFFF]/),qi=_t(/^aria-[\-\w]+$/),nl=_t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ri=_t(/^(?:\w+script|data):/i),Pi=_t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),il=_t(/^html$/i);var _o=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ei,ERB_EXPR:_i,TMPLIT_EXPR:Oi,DATA_ATTR:Ii,ARIA_ATTR:qi,IS_ALLOWED_URI:nl,IS_SCRIPT_OR_DATA:Ri,ATTR_WHITESPACE:Pi,DOCTYPE_NAME:il});const Ni=()=>typeof window>"u"?null:window,Di=function(t,a){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";a&&a.hasAttribute(n)&&(i=a.getAttribute(n));const c="dompurify"+(i?"#"+i:"");try{return t.createPolicy(c,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function rl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ni();const t=z=>rl(z);if(t.version="3.0.3",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const a=e.document,i=a.currentScript;let{document:n}=e;const{DocumentFragment:c,HTMLTemplateElement:r,Node:o,Element:v,NodeFilter:b,NamedNodeMap:y=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:V,DOMParser:h,trustedTypes:g}=e,_=v.prototype,H=Ta(_,"cloneNode"),N=Ta(_,"nextSibling"),ie=Ta(_,"childNodes"),j=Ta(_,"parentNode");if(typeof r=="function"){const z=n.createElement("template");z.content&&z.content.ownerDocument&&(n=z.content.ownerDocument)}let S,L="";const{implementation:B,createNodeIterator:le,createDocumentFragment:me,getElementsByTagName:Ee}=n,{importNode:Pe}=a;let $e={};t.isSupported=typeof ll=="function"&&typeof j=="function"&&B&&B.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ae,ERB_EXPR:J,TMPLIT_EXPR:_e,DATA_ATTR:Be,ARIA_ATTR:ce,IS_SCRIPT_OR_DATA:He,ATTR_WHITESPACE:Qe}=_o;let{IS_ALLOWED_URI:Ge}=_o,he=null;const I=se({},[...$o,...Wa,...ja,...Ka,...Vo]);let C=null;const D=se({},[...Lo,...Qa,...Eo,...Ma]);let R=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ue=null,Ve=null,X=!0,ee=!0,qe=!1,p=!0,q=!1,Q=!1,ae=!1,ge=!1,K=!1,Se=!1,ve=!1,Ye=!0,tt=!1;const mt="user-content-";let Oe=!0,A=!1,P={},G=null;const Le=se({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let we=null;const de=se({},["audio","video","img","source","image","track"]);let re=null;const De=se({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ne="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",Je="http://www.w3.org/1999/xhtml";let yt=Je,w=!1,Y=null;const ke=se({},[Ne,Ze,Je],Ha);let fe;const ze=["application/xhtml+xml","text/html"],ft="text/html";let Re,vt=null;const Oa=n.createElement("form"),Sa=function(d){return d instanceof RegExp||d instanceof Function},Zt=function(d){if(!(vt&&vt===d)){if((!d||typeof d!="object")&&(d={}),d=oa(d),fe=ze.indexOf(d.PARSER_MEDIA_TYPE)===-1?fe=ft:fe=d.PARSER_MEDIA_TYPE,Re=fe==="application/xhtml+xml"?Ha:Va,he="ALLOWED_TAGS"in d?se({},d.ALLOWED_TAGS,Re):I,C="ALLOWED_ATTR"in d?se({},d.ALLOWED_ATTR,Re):D,Y="ALLOWED_NAMESPACES"in d?se({},d.ALLOWED_NAMESPACES,Ha):ke,re="ADD_URI_SAFE_ATTR"in d?se(oa(De),d.ADD_URI_SAFE_ATTR,Re):De,we="ADD_DATA_URI_TAGS"in d?se(oa(de),d.ADD_DATA_URI_TAGS,Re):de,G="FORBID_CONTENTS"in d?se({},d.FORBID_CONTENTS,Re):Le,ue="FORBID_TAGS"in d?se({},d.FORBID_TAGS,Re):{},Ve="FORBID_ATTR"in d?se({},d.FORBID_ATTR,Re):{},P="USE_PROFILES"in d?d.USE_PROFILES:!1,X=d.ALLOW_ARIA_ATTR!==!1,ee=d.ALLOW_DATA_ATTR!==!1,qe=d.ALLOW_UNKNOWN_PROTOCOLS||!1,p=d.ALLOW_SELF_CLOSE_IN_ATTR!==!1,q=d.SAFE_FOR_TEMPLATES||!1,Q=d.WHOLE_DOCUMENT||!1,K=d.RETURN_DOM||!1,Se=d.RETURN_DOM_FRAGMENT||!1,ve=d.RETURN_TRUSTED_TYPE||!1,ge=d.FORCE_BODY||!1,Ye=d.SANITIZE_DOM!==!1,tt=d.SANITIZE_NAMED_PROPS||!1,Oe=d.KEEP_CONTENT!==!1,A=d.IN_PLACE||!1,Ge=d.ALLOWED_URI_REGEXP||nl,yt=d.NAMESPACE||Je,R=d.CUSTOM_ELEMENT_HANDLING||{},d.CUSTOM_ELEMENT_HANDLING&&Sa(d.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(R.tagNameCheck=d.CUSTOM_ELEMENT_HANDLING.tagNameCheck),d.CUSTOM_ELEMENT_HANDLING&&Sa(d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(R.attributeNameCheck=d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),d.CUSTOM_ELEMENT_HANDLING&&typeof d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(R.allowCustomizedBuiltInElements=d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(ee=!1),Se&&(K=!0),P&&(he=se({},[...Vo]),C=[],P.html===!0&&(se(he,$o),se(C,Lo)),P.svg===!0&&(se(he,Wa),se(C,Qa),se(C,Ma)),P.svgFilters===!0&&(se(he,ja),se(C,Qa),se(C,Ma)),P.mathMl===!0&&(se(he,Ka),se(C,Eo),se(C,Ma))),d.ADD_TAGS&&(he===I&&(he=oa(he)),se(he,d.ADD_TAGS,Re)),d.ADD_ATTR&&(C===D&&(C=oa(C)),se(C,d.ADD_ATTR,Re)),d.ADD_URI_SAFE_ATTR&&se(re,d.ADD_URI_SAFE_ATTR,Re),d.FORBID_CONTENTS&&(G===Le&&(G=oa(G)),se(G,d.FORBID_CONTENTS,Re)),Oe&&(he["#text"]=!0),Q&&se(he,["html","head","body"]),he.table&&(se(he,["tbody"]),delete ue.tbody),d.TRUSTED_TYPES_POLICY){if(typeof d.TRUSTED_TYPES_POLICY.createHTML!="function")throw da('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof d.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw da('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=d.TRUSTED_TYPES_POLICY,L=S.createHTML("")}else S===void 0&&(S=Di(g,i)),S!==null&&typeof L=="string"&&(L=S.createHTML(""));rt&&rt(d),vt=d}},wa=se({},["mi","mo","mn","ms","mtext"]),ra=se({},["foreignobject","desc","title","annotation-xml"]),ea=se({},["title","style","font","a","script"]),Ot=se({},Wa);se(Ot,ja),se(Ot,Vi);const It=se({},Ka);se(It,Li);const Ia=function(d){let T=j(d);(!T||!T.tagName)&&(T={namespaceURI:yt,tagName:"template"});const O=Va(d.tagName),be=Va(T.tagName);return Y[d.namespaceURI]?d.namespaceURI===Ze?T.namespaceURI===Je?O==="svg":T.namespaceURI===Ne?O==="svg"&&(be==="annotation-xml"||wa[be]):Boolean(Ot[O]):d.namespaceURI===Ne?T.namespaceURI===Je?O==="math":T.namespaceURI===Ze?O==="math"&&ra[be]:Boolean(It[O]):d.namespaceURI===Je?T.namespaceURI===Ze&&!ra[be]||T.namespaceURI===Ne&&!wa[be]?!1:!It[O]&&(ea[O]||!Ot[O]):!!(fe==="application/xhtml+xml"&&Y[d.namespaceURI]):!1},Pt=function(d){ua(t.removed,{element:d});try{d.parentNode.removeChild(d)}catch{d.remove()}},sa=function(d,T){try{ua(t.removed,{attribute:T.getAttributeNode(d),from:T})}catch{ua(t.removed,{attribute:null,from:T})}if(T.removeAttribute(d),d==="is"&&!C[d])if(K||Se)try{Pt(T)}catch{}else try{T.setAttribute(d,"")}catch{}},ka=function(d){let T,O;if(ge)d="<remove></remove>"+d;else{const u=Ai(d,/^[\r\n\t ]+/);O=u&&u[0]}fe==="application/xhtml+xml"&&yt===Je&&(d='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+d+"</body></html>");const be=S?S.createHTML(d):d;if(yt===Je)try{T=new h().parseFromString(be,fe)}catch{}if(!T||!T.documentElement){T=B.createDocument(yt,"template",null);try{T.documentElement.innerHTML=w?L:be}catch{}}const xe=T.body||T.documentElement;return d&&O&&xe.insertBefore(n.createTextNode(O),xe.childNodes[0]||null),yt===Je?Ee.call(T,Q?"html":"body")[0]:Q?T.documentElement:xe},Ca=function(d){return le.call(d.ownerDocument||d,d,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},qa=function(d){return d instanceof V&&(typeof d.nodeName!="string"||typeof d.textContent!="string"||typeof d.removeChild!="function"||!(d.attributes instanceof y)||typeof d.removeAttribute!="function"||typeof d.setAttribute!="function"||typeof d.namespaceURI!="string"||typeof d.insertBefore!="function"||typeof d.hasChildNodes!="function")},ta=function(d){return typeof o=="object"?d instanceof o:d&&typeof d=="object"&&typeof d.nodeType=="number"&&typeof d.nodeName=="string"},Tt=function(d,T,O){!$e[d]||Ci($e[d],be=>{be.call(t,T,O,vt)})},Aa=function(d){let T;if(Tt("beforeSanitizeElements",d,null),qa(d))return Pt(d),!0;const O=Re(d.nodeName);if(Tt("uponSanitizeElement",d,{tagName:O,allowedTags:he}),d.hasChildNodes()&&!ta(d.firstElementChild)&&(!ta(d.content)||!ta(d.content.firstElementChild))&&pt(/<[/\w]/g,d.innerHTML)&&pt(/<[/\w]/g,d.textContent))return Pt(d),!0;if(!he[O]||ue[O]){if(!ue[O]&&Dt(O)&&(R.tagNameCheck instanceof RegExp&&pt(R.tagNameCheck,O)||R.tagNameCheck instanceof Function&&R.tagNameCheck(O)))return!1;if(Oe&&!G[O]){const be=j(d)||d.parentNode,xe=ie(d)||d.childNodes;if(xe&&be){const u=xe.length;for(let M=u-1;M>=0;--M)be.insertBefore(H(xe[M],!0),N(d))}}return Pt(d),!0}return d instanceof v&&!Ia(d)||(O==="noscript"||O==="noembed")&&pt(/<\/no(script|embed)/i,d.innerHTML)?(Pt(d),!0):(q&&d.nodeType===3&&(T=d.textContent,T=Mt(T,Ae," "),T=Mt(T,J," "),T=Mt(T,_e," "),d.textContent!==T&&(ua(t.removed,{element:d.cloneNode()}),d.textContent=T)),Tt("afterSanitizeElements",d,null),!1)},Nt=function(d,T,O){if(Ye&&(T==="id"||T==="name")&&(O in n||O in Oa))return!1;if(!(ee&&!Ve[T]&&pt(Be,T))){if(!(X&&pt(ce,T))){if(!C[T]||Ve[T]){if(!(Dt(d)&&(R.tagNameCheck instanceof RegExp&&pt(R.tagNameCheck,d)||R.tagNameCheck instanceof Function&&R.tagNameCheck(d))&&(R.attributeNameCheck instanceof RegExp&&pt(R.attributeNameCheck,T)||R.attributeNameCheck instanceof Function&&R.attributeNameCheck(T))||T==="is"&&R.allowCustomizedBuiltInElements&&(R.tagNameCheck instanceof RegExp&&pt(R.tagNameCheck,O)||R.tagNameCheck instanceof Function&&R.tagNameCheck(O))))return!1}else if(!re[T]){if(!pt(Ge,Mt(O,Qe,""))){if(!((T==="src"||T==="xlink:href"||T==="href")&&d!=="script"&&Ti(O,"data:")===0&&we[d])){if(!(qe&&!pt(He,Mt(O,Qe,"")))){if(O)return!1}}}}}}return!0},Dt=function(d){return d.indexOf("-")>0},qt=function(d){let T,O,be,xe;Tt("beforeSanitizeAttributes",d,null);const{attributes:u}=d;if(!u)return;const M={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:C};for(xe=u.length;xe--;){T=u[xe];const{name:$,namespaceURI:te}=T;if(O=$==="value"?T.value:Mi(T.value),be=Re($),M.attrName=be,M.attrValue=O,M.keepAttr=!0,M.forceKeepAttr=void 0,Tt("uponSanitizeAttribute",d,M),O=M.attrValue,M.forceKeepAttr||(sa($,d),!M.keepAttr))continue;if(!p&&pt(/\/>/i,O)){sa($,d);continue}q&&(O=Mt(O,Ae," "),O=Mt(O,J," "),O=Mt(O,_e," "));const Te=Re(d.nodeName);if(!!Nt(Te,be,O)){if(tt&&(be==="id"||be==="name")&&(sa($,d),O=mt+O),S&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!te)switch(g.getAttributeType(Te,be)){case"TrustedHTML":{O=S.createHTML(O);break}case"TrustedScriptURL":{O=S.createScriptURL(O);break}}try{te?d.setAttributeNS(te,$,O):d.setAttribute($,O),Mo(t.removed)}catch{}}}Tt("afterSanitizeAttributes",d,null)},xt=function z(d){let T;const O=Ca(d);for(Tt("beforeSanitizeShadowDOM",d,null);T=O.nextNode();)Tt("uponSanitizeShadowNode",T,null),!Aa(T)&&(T.content instanceof c&&z(T.content),qt(T));Tt("afterSanitizeShadowDOM",d,null)};return t.sanitize=function(z){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T,O,be,xe;if(w=!z,w&&(z="<!-->"),typeof z!="string"&&!ta(z))if(typeof z.toString=="function"){if(z=z.toString(),typeof z!="string")throw da("dirty is not a string, aborting")}else throw da("toString is not a function");if(!t.isSupported)return z;if(ae||Zt(d),t.removed=[],typeof z=="string"&&(A=!1),A){if(z.nodeName){const $=Re(z.nodeName);if(!he[$]||ue[$])throw da("root node is forbidden and cannot be sanitized in-place")}}else if(z instanceof o)T=ka("<!---->"),O=T.ownerDocument.importNode(z,!0),O.nodeType===1&&O.nodeName==="BODY"||O.nodeName==="HTML"?T=O:T.appendChild(O);else{if(!K&&!q&&!Q&&z.indexOf("<")===-1)return S&&ve?S.createHTML(z):z;if(T=ka(z),!T)return K?null:ve?L:""}T&&ge&&Pt(T.firstChild);const u=Ca(A?z:T);for(;be=u.nextNode();)Aa(be)||(be.content instanceof c&&xt(be.content),qt(be));if(A)return z;if(K){if(Se)for(xe=me.call(T.ownerDocument);T.firstChild;)xe.appendChild(T.firstChild);else xe=T;return(C.shadowroot||C.shadowrootmod)&&(xe=Pe.call(a,xe,!0)),xe}let M=Q?T.outerHTML:T.innerHTML;return Q&&he["!doctype"]&&T.ownerDocument&&T.ownerDocument.doctype&&T.ownerDocument.doctype.name&&pt(il,T.ownerDocument.doctype.name)&&(M="<!DOCTYPE "+T.ownerDocument.doctype.name+`>
`+M),q&&(M=Mt(M,Ae," "),M=Mt(M,J," "),M=Mt(M,_e," ")),S&&ve?S.createHTML(M):M},t.setConfig=function(z){Zt(z),ae=!0},t.clearConfig=function(){vt=null,ae=!1},t.isValidAttribute=function(z,d,T){vt||Zt({});const O=Re(z),be=Re(d);return Nt(O,be,T)},t.addHook=function(z,d){typeof d=="function"&&($e[z]=$e[z]||[],ua($e[z],d))},t.removeHook=function(z){if($e[z])return Mo($e[z])},t.removeHooks=function(z){$e[z]&&($e[z]=[])},t.removeAllHooks=function(){$e={}},t}var Bi=rl();const zi=Ke({name:"ChatOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{applicationStore:zt,userStore:Wt}},data(){return{messageInput:"",subscribed:!1,worldChatHistory:[{displayName:"Hallo",username:"nani",self:!1,timestamp:new Date().toString(),message:"Hi, hru?"},{displayName:"Waifu",username:"testerino",self:!0,timestamp:new Date().toString(),message:"Sup holmes."},{displayName:"Hallo",username:"nani",self:!1,timestamp:new Date().toString(),message:"nammuch you?"},{displayName:"Waifu",username:"testerino",self:!0,timestamp:new Date().toString(),message:"you know the life."}],currentPrimaryMessages:[],previousScrollPos:0,scrollIsAtBottom:!0,lastPrimaryMessageIndex:-1,messageCombinationTimeLimit:12e4,sortedMessages:[]}},watch:{},methods:{sortMessages(e){const t=e;if(t.length<=0)return[];const a=[];let i=0;return t.forEach((n,c)=>{const r=a[c-1-i];if(a.length<=0||!r){a.push({root:n,text:[this.sanitizeMessageText(this.formatMessageLinks(this.msgText(n)))],time:n.whenReceived});return}r.root.senderId.stringify()===n.senderId.stringify()&&r.time.getTime()<n.whenReceived.getTime()&&n.whenReceived.getTime()<r.time.getTime()+this.messageCombinationTimeLimit?(r.text.push(this.sanitizeMessageText(this.formatMessageLinks(this.msgText(n)))),r.time=n.whenReceived,i+=1):a.push({root:n,text:[this.sanitizeMessageText(this.formatMessageLinks(this.msgText(n)))],time:n.whenReceived})}),a},getProfilePicture(e){if(e==="testerino")return"https://cdn.quasar.dev/img/avatar4.jpg"},msgSender(e){return e.messageJSON?e.messageJSON.displayName:e.senderId.stringify()},msgText(e){if(e.messageJSON){const t=e.messageJSON;if("message"in t)return t.message}return e.message},formatMessageLinks(e){const t=/\bhttps?:\/\/\S+|\bwss?:\/\/\S+/gi;return e.replace(t,i=>`<a href="${i}" target="_blank" rel="noreferrer">${i}</a>`)},sanitizeMessageText(e){return Bi.sanitize(e,{USE_PROFILES:{html:!0}})},formatMessageTime(e){return e?`${e.toDateString()}, ${e.toLocaleTimeString()}`:""},msgSentBySelf(e){return e.self??!1},msgIsFromThisClient(e){var t;if(Bt.ActiveDomain){const a=(t=Bt.ActiveDomain.DomainClient)==null?void 0:t.sessionUUID;if(e instanceof Tl&&(a==null?void 0:a.value())===(e==null?void 0:e.value())||typeof e=="string"&&(a==null?void 0:a.value().toString())===e)return!0}return!1},validateMessage(){return this.messageInput.length>0},submitMessage(){if(Bt.ActiveDomain){const e=Bt.ActiveDomain.MessageClient;if(e&&this.validateMessage()){const t={type:"TransmitChatMessage",channel:"Local",message:this.sanitizeMessageText(this.messageInput),colour:{red:255,blue:204,green:229},displayName:this.userStore.avatar.displayName,position:this.userStore.avatar.position};e.sendMessage(Ml.DefaultChatChannel,JSON.stringify(t)),this.messageInput="",this.scrollToBottom(!1)}}},scrollToLatestMessage({verticalPosition:e},t=!0){const i=this.$refs.listOfChats.$el.querySelector(".scroll"),n=i.scrollHeight,c=20,r=e===this.previousScrollPos;r?r&&this.scrollIsAtBottom&&i.scrollTo({top:n,left:0,behavior:t?"smooth":"auto"}):e<n-i.clientHeight-c?this.scrollIsAtBottom=!1:this.scrollIsAtBottom=!0,this.previousScrollPos=e},scrollToBottom(e=!0){const a=this.$refs.listOfChats.$el.querySelector(".scroll"),i=a.scrollHeight;a.scrollTo({top:i,left:0,behavior:e?"smooth":"auto"}),this.scrollIsAtBottom=!0},relatedToPrimaryMessageEntry(e,t){const a=this.applicationStore.messages.messages[this.lastPrimaryMessageIndex];return a?e.senderId!==a.senderId?(this.lastPrimaryMessageIndex=t,!1):Math.abs(a.whenReceived.getTime()-e.whenReceived.getTime())>5e3?(this.lastPrimaryMessageIndex=t,!1):!0:(this.lastPrimaryMessageIndex=t,!1)}},mounted(){this.sortedMessages=this.sortMessages(this.applicationStore.messages.messages),it(()=>JSON.stringify(this.applicationStore.messages.messages,(e,t)=>t instanceof window.BigInt?t.toString():t),()=>{this.sortedMessages=this.sortMessages(this.applicationStore.messages.messages)}),this.scrollToBottom(!1)}}),xi=["src"],Fi={key:1};function Ui(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"chat",title:"Chat",managerProps:e.propsToPass,defaultHeight:300,defaultWidth:600,defaultLeft:0,defaultTop:400,spawnSnappedTo:"bottom",hoverShowBar:!0,transparentOnIdle:!0,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[l(Et,{ref:"listOfChats",class:"col",style:{height:"100%"},onScroll:e.scrollToLatestMessage},{default:s(()=>[l(co,{class:"q-pt-none"},{default:s(()=>[(k(!0),U(We,null,bt(e.sortedMessages,(o,v)=>(k(),oe(bi,{key:v,text:o.text,"text-html":!0,sent:e.msgIsFromThisClient(o.root.senderId),name:e.msgIsFromThisClient(o.root.senderId)?`${e.msgSender(o.root)} (you)`:e.msgSender(o.root),stamp:e.formatMessageTime(o.time),"text-color":"white","bg-color":e.msgIsFromThisClient(o.root.senderId)?"primary":"grey-9"},{avatar:s(()=>[l(ro,{color:e.msgIsFromThisClient(o.root.senderId)?"primary":"grey-9",class:"q-mx-xs"},{default:s(()=>[e.getProfilePicture(e.msgSender(o.root))?(k(),U("img",{key:0,src:e.getProfilePicture(e.msgSender(o.root))},null,8,xi)):(k(),U("span",Fi,ne(e.msgSender(o.root).charAt(0)),1))]),_:2},1032,["color"])]),_:2},1032,["text","sent","name","stamp","bg-color"]))),128))]),_:1})]),_:1},8,["onScroll"]),l(ye,{class:"inputBox",placeholder:"Type a message...",outlined:"",modelValue:e.messageInput,"onUpdate:modelValue":t[0]||(t[0]=o=>e.messageInput=o),dense:!0,onKeydown:Kt(pe(e.submitMessage,["prevent"]),["enter"])},{append:s(()=>[l(Z,{title:"Click, or press Enter to send.",flat:"",round:"",dense:"",onClick:pe(e.submitMessage,["stop"])},{default:s(()=>[l(Ie,{name:"send",color:"primary"})]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeydown"])]),_:1})]),_:1},8,["managerProps","style"])}var Hi=et(zi,[["render",Ui],["__scopeId","data-v-5c4f1bba"]]);function ma(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const i=e.valueOf();if(Object(i)!==i){const n=new e.constructor(i);return t.set(e,n),n}}return t.set(e,a),e instanceof Set?e.forEach(i=>{a.add(ma(i,t))}):e instanceof Map&&e.forEach((i,n)=>{a.set(n,ma(i,t))}),Object.assign(a,...Object.keys(e).map(i=>({[i]:ma(e[i],t)})))}var Vt=je({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:i}=st(),{$q:n}=i,c=F(null),r=F(""),o=F("");let v=!1;const b=f(()=>$l({initialValue:r.value,validate:e.validate,set:y,cancel:V,updatePosition:h},"value",()=>o.value,L=>{o.value=L}));function y(){e.validate(o.value)!==!1&&(g()===!0&&(a("save",o.value,r.value),a("update:modelValue",o.value)),_())}function V(){g()===!0&&a("cancel",o.value,r.value),_()}function h(){ht(()=>{c.value.updatePosition()})}function g(){return jt(o.value,r.value)===!1}function _(){v=!0,c.value.hide()}function H(){v=!1,r.value=ma(e.modelValue),o.value=ma(e.modelValue),a("beforeShow")}function N(){a("show")}function ie(){v===!1&&g()===!0&&(e.autoSave===!0&&e.validate(o.value)===!0?(a("save",o.value,r.value),a("update:modelValue",o.value)):a("cancel",o.value,r.value)),a("beforeHide")}function j(){a("hide")}function S(){const L=t.default!==void 0?[].concat(t.default(b.value)):[];return e.title&&L.unshift(m("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&L.push(m("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[m(Z,{flat:!0,color:e.color,label:e.labelCancel||n.lang.label.cancel,onClick:V}),m(Z,{flat:!0,color:e.color,label:e.labelSet||n.lang.label.set,onClick:y})])),L}return Object.assign(i,{set:y,cancel:V,show(L){c.value!==null&&c.value.show(L)},hide(L){c.value!==null&&c.value.hide(L)},updatePosition:h}),()=>{if(e.disable!==!0)return m(Zo,{ref:c,class:"q-popup-edit",cover:e.cover,onBeforeShow:H,onShow:N,onBeforeHide:ie,onHide:j,onEscapeKey:V},S)}}});const Wi=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function Oo({r:e,g:t,b:a,a:i}){const n=i!==void 0;if(e=Math.round(e),t=Math.round(t),a=Math.round(a),e>255||t>255||a>255||n&&i>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return i=n?(Math.round(255*i/100)|1<<8).toString(16).slice(1):"","#"+(a|t<<8|e<<16|1<<24).toString(16).slice(1)+i}function Io({r:e,g:t,b:a,a:i}){return`rgb${i!==void 0?"a":""}(${e},${t},${a}${i!==void 0?","+i/100:""})`}function sl(e){if(typeof e!="string")throw new TypeError("Expected a string");e=e.replace(/^#/,""),e.length===3?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e.length===4&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((t&255)/2.55)}:{r:t>>16,g:t>>8&255,b:t&255}}function qo({h:e,s:t,v:a,a:i}){let n,c,r;t=t/100,a=a/100,e=e/360;const o=Math.floor(e*6),v=e*6-o,b=a*(1-t),y=a*(1-v*t),V=a*(1-(1-v)*t);switch(o%6){case 0:n=a,c=V,r=b;break;case 1:n=y,c=a,r=b;break;case 2:n=b,c=a,r=V;break;case 3:n=b,c=y,r=a;break;case 4:n=V,c=b,r=a;break;case 5:n=a,c=b,r=y;break}return{r:Math.round(n*255),g:Math.round(c*255),b:Math.round(r*255),a:i}}function Ga({r:e,g:t,b:a,a:i}){const n=Math.max(e,t,a),c=Math.min(e,t,a),r=n-c,o=n===0?0:r/n,v=n/255;let b;switch(n){case c:b=0;break;case e:b=t-a+r*(t<a?6:0),b/=6*r;break;case t:b=a-e+r*2,b/=6*r;break;case a:b=e-t+r*4,b/=6*r;break}return{h:Math.round(b*360),s:Math.round(o*100),v:Math.round(v*100),a:i}}function ul(e){if(typeof e!="string")throw new TypeError("Expected a string");const t=e.replace(/ /g,""),a=Wi.exec(t);if(a===null)return sl(t);const i={r:Math.min(255,parseInt(a[2],10)),g:Math.min(255,parseInt(a[3],10)),b:Math.min(255,parseInt(a[4],10))};if(a[1]){const n=parseFloat(a[5]);i.a=Math.min(1,isNaN(n)===!0?1:n)*100}return i}function ji(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?ul(e):e,a=t.r/255,i=t.g/255,n=t.b/255,c=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),r=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return .2126*c+.7152*r+.0722*o}const Ki=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],Ro="M5 5 h10 v10 h-10 v-10 z",Qi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==";var fa=je({name:"QColor",props:{...Jt,..._a,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:e=>["spectrum","tune","palette"].includes(e)},formatModel:{type:String,default:"auto",validator:e=>["auto","hex","rgb","hexa","rgba"].includes(e)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(e,{emit:t}){const{proxy:a}=st(),{$q:i}=a,n=Xt(e,i),{getCache:c}=nn(),r=F(null),o=F(null),v=f(()=>e.formatModel==="auto"?null:e.formatModel.indexOf("hex")>-1),b=f(()=>e.formatModel==="auto"?null:e.formatModel.indexOf("a")>-1),y=F(e.formatModel==="auto"?e.modelValue===void 0||e.modelValue===null||e.modelValue===""||e.modelValue.startsWith("#")?"hex":"rgb":e.formatModel.startsWith("hex")?"hex":"rgb"),V=F(e.defaultView),h=F(J(e.modelValue||e.defaultValue)),g=f(()=>e.disable!==!0&&e.readonly!==!0),_=f(()=>e.modelValue===void 0||e.modelValue===null||e.modelValue===""||e.modelValue.startsWith("#")),H=f(()=>v.value!==null?v.value:_.value),N=f(()=>({type:"hidden",name:e.name,value:h.value[H.value===!0?"hex":"rgb"]})),ie=so(N),j=f(()=>b.value!==null?b.value:h.value.a!==void 0),S=f(()=>({backgroundColor:h.value.rgb||"#000"})),L=f(()=>`q-color-picker__header-content q-color-picker__header-content--${(h.value.a!==void 0&&h.value.a<65?!0:ji(h.value)>.4)?"light":"dark"}`),B=f(()=>({background:`hsl(${h.value.h},100%,50%)`})),le=f(()=>({top:`${100-h.value.v}%`,[i.lang.rtl===!0?"right":"left"]:`${h.value.s}%`})),me=f(()=>e.palette!==void 0&&e.palette.length!==0?e.palette:Ki),Ee=f(()=>"q-color-picker"+(e.bordered===!0?" q-color-picker--bordered":"")+(e.square===!0?" q-color-picker--square no-border-radius":"")+(e.flat===!0?" q-color-picker--flat no-shadow":"")+(e.disable===!0?" disabled":"")+(n.value===!0?" q-color-picker--dark q-dark":"")),Pe=f(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{}),$e=f(()=>[[Qo,Ge,void 0,{prevent:!0,stop:!0,mouse:!0}]]);it(()=>e.modelValue,p=>{const q=J(p||e.defaultValue);q.hex!==h.value.hex&&(h.value=q)}),it(()=>e.defaultValue,p=>{if(!e.modelValue&&p){const q=J(p);q.hex!==h.value.hex&&(h.value=q)}});function Ae(p,q){h.value.hex=Oo(p),h.value.rgb=Io(p),h.value.r=p.r,h.value.g=p.g,h.value.b=p.b,h.value.a=p.a;const Q=h.value[H.value===!0?"hex":"rgb"];t("update:modelValue",Q),q===!0&&t("change",Q)}function J(p){const q=b.value!==void 0?b.value:e.formatModel==="auto"?null:e.formatModel.indexOf("a")>-1;if(typeof p!="string"||p.length===0||ln.anyColor(p.replace(/ /g,""))!==!0)return{h:0,s:0,v:0,r:0,g:0,b:0,a:q===!0?100:void 0,hex:void 0,rgb:void 0};const Q=ul(p);return q===!0&&Q.a===void 0&&(Q.a=100),Q.hex=Oo(Q),Q.rgb=Io(Q),Object.assign(Q,Ga(Q))}function _e(p,q,Q){const ae=r.value;if(ae===null)return;const ge=ae.clientWidth,K=ae.clientHeight,Se=ae.getBoundingClientRect();let ve=Math.min(ge,Math.max(0,p-Se.left));i.lang.rtl===!0&&(ve=ge-ve);const Ye=Math.min(K,Math.max(0,q-Se.top)),tt=Math.round(100*ve/ge),mt=Math.round(100*Math.max(0,Math.min(1,-(Ye/K)+1))),Oe=qo({h:h.value.h,s:tt,v:mt,a:j.value===!0?h.value.a:void 0});h.value.s=tt,h.value.v=mt,Ae(Oe,Q)}function Be(p,q){const Q=Math.round(p),ae=qo({h:Q,s:h.value.s,v:h.value.v,a:j.value===!0?h.value.a:void 0});h.value.h=Q,Ae(ae,q)}function ce(p,q,Q,ae,ge){if(ae!==void 0&&gt(ae),!/^[0-9]+$/.test(p)){ge===!0&&a.$forceUpdate();return}const K=Math.floor(Number(p));if(K<0||K>Q){ge===!0&&a.$forceUpdate();return}const Se={r:q==="r"?K:h.value.r,g:q==="g"?K:h.value.g,b:q==="b"?K:h.value.b,a:j.value===!0?q==="a"?K:h.value.a:void 0};if(q!=="a"){const ve=Ga(Se);h.value.h=ve.h,h.value.s=ve.s,h.value.v=ve.v}if(Ae(Se,ge),ae!==void 0&&ge!==!0&&ae.target.selectionEnd!==void 0){const ve=ae.target.selectionEnd;ht(()=>{ae.target.setSelectionRange(ve,ve)})}}function He(p,q){let Q;const ae=p.target.value;if(gt(p),y.value==="hex"){if(ae.length!==(j.value===!0?9:7)||!/^#[0-9A-Fa-f]+$/.test(ae))return!0;Q=sl(ae)}else{let K;if(ae.endsWith(")"))if(j.value!==!0&&ae.startsWith("rgb(")){if(K=ae.substring(4,ae.length-1).split(",").map(Se=>parseInt(Se,10)),K.length!==3||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(ae))return!0}else if(j.value===!0&&ae.startsWith("rgba(")){if(K=ae.substring(5,ae.length-1).split(","),K.length!==4||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(ae))return!0;for(let ve=0;ve<3;ve++){const Ye=parseInt(K[ve],10);if(Ye<0||Ye>255)return!0;K[ve]=Ye}const Se=parseFloat(K[3]);if(Se<0||Se>1)return!0;K[3]=Se}else return!0;else return!0;if(K[0]<0||K[0]>255||K[1]<0||K[1]>255||K[2]<0||K[2]>255||j.value===!0&&(K[3]<0||K[3]>1))return!0;Q={r:K[0],g:K[1],b:K[2],a:j.value===!0?K[3]*100:void 0}}const ge=Ga(Q);if(h.value.h=ge.h,h.value.s=ge.s,h.value.v=ge.v,Ae(Q,q),q!==!0){const K=p.target.selectionEnd;ht(()=>{p.target.setSelectionRange(K,K)})}}function Qe(p){const q=J(p),Q={r:q.r,g:q.g,b:q.b,a:q.a};Q.a===void 0&&(Q.a=h.value.a),h.value.h=q.h,h.value.s=q.s,h.value.v=q.v,Ae(Q,!0)}function Ge(p){p.isFinal?_e(p.position.left,p.position.top,!0):he(p)}const he=Vl(p=>{_e(p.position.left,p.position.top)},20);function I(p){_e(p.pageX-window.pageXOffset,p.pageY-window.pageYOffset,!0)}function C(p){_e(p.pageX-window.pageXOffset,p.pageY-window.pageYOffset)}function D(p){o.value!==null&&(o.value.$el.style.opacity=p?1:0)}function R(){const p=[];return e.noHeaderTabs!==!0&&p.push(m(Yt,{class:"q-color-picker__header-tabs",modelValue:y.value,dense:!0,align:"justify",...c("topVTab",{"onUpdate:modelValue":q=>{y.value=q}})},()=>[m(Xe,{label:"HEX"+(j.value===!0?"A":""),name:"hex",ripple:!1}),m(Xe,{label:"RGB"+(j.value===!0?"A":""),name:"rgb",ripple:!1})])),p.push(m("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[m("input",{class:"fit",value:h.value[y.value],...g.value!==!0?{readonly:!0}:{},...c("topIn",{onInput:q=>{D(He(q)===!0)},onChange:gt,onBlur:q=>{He(q,!0)===!0&&a.$forceUpdate(),D(!1)}})}),m(Ie,{ref:o,class:"q-color-picker__error-icon absolute no-pointer-events",name:i.iconSet.type.negative})])),m("div",{class:"q-color-picker__header relative-position overflow-hidden"},[m("div",{class:"q-color-picker__header-bg absolute-full"}),m("div",{class:L.value,style:S.value},p)])}function ue(){return m(ia,{modelValue:V.value,animated:!0},()=>[m(ot,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},X),m(ot,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},ee),m(ot,{class:"q-color-picker__palette-tab",name:"palette"},qe)])}function Ve(){return m("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[m(Yt,{class:"absolute-full",modelValue:V.value,dense:!0,align:"justify",...c("ftIn",{"onUpdate:modelValue":p=>{V.value=p}})},()=>[m(Xe,{icon:i.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),m(Xe,{icon:i.iconSet.colorPicker.tune,name:"tune",ripple:!1}),m(Xe,{icon:i.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])}function X(){const p={ref:r,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(g.value!==!0?" readonly":""),style:B.value,...g.value===!0?{onClick:I,onMousedown:C}:{}},q=[m("div",{style:{paddingBottom:"100%"}}),m("div",{class:"q-color-picker__spectrum-white absolute-full"}),m("div",{class:"q-color-picker__spectrum-black absolute-full"}),m("div",{class:"absolute",style:le.value},[h.value.hex!==void 0?m("div",{class:"q-color-picker__spectrum-circle"}):null])],Q=[m(Rt,{class:"q-color-picker__hue non-selectable",modelValue:h.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:g.value!==!0,thumbPath:Ro,"onUpdate:modelValue":Be,...c("lazyhue",{onChange:ae=>Be(ae,!0)})})];return j.value===!0&&Q.push(m(Rt,{class:"q-color-picker__alpha non-selectable",modelValue:h.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:Qi,readonly:g.value!==!0,hideSelection:!0,thumbPath:Ro,...c("alphaSlide",{"onUpdate:modelValue":ae=>ce(ae,"a",100),onChange:ae=>ce(ae,"a",100,void 0,!0)})})),[La("div",p,q,"spec",g.value,()=>$e.value),m("div",{class:"q-color-picker__sliders"},Q)]}function ee(){return[m("div",{class:"row items-center no-wrap"},[m("div","R"),m(Rt,{modelValue:h.value.r,min:0,max:255,color:"red",dark:n.value,readonly:g.value!==!0,...c("rSlide",{"onUpdate:modelValue":p=>ce(p,"r",255),onChange:p=>ce(p,"r",255,void 0,!0)})}),m("input",{value:h.value.r,maxlength:3,readonly:g.value!==!0,onChange:gt,...c("rIn",{onInput:p=>ce(p.target.value,"r",255,p),onBlur:p=>ce(p.target.value,"r",255,p,!0)})})]),m("div",{class:"row items-center no-wrap"},[m("div","G"),m(Rt,{modelValue:h.value.g,min:0,max:255,color:"green",dark:n.value,readonly:g.value!==!0,...c("gSlide",{"onUpdate:modelValue":p=>ce(p,"g",255),onChange:p=>ce(p,"g",255,void 0,!0)})}),m("input",{value:h.value.g,maxlength:3,readonly:g.value!==!0,onChange:gt,...c("gIn",{onInput:p=>ce(p.target.value,"g",255,p),onBlur:p=>ce(p.target.value,"g",255,p,!0)})})]),m("div",{class:"row items-center no-wrap"},[m("div","B"),m(Rt,{modelValue:h.value.b,min:0,max:255,color:"blue",readonly:g.value!==!0,dark:n.value,...c("bSlide",{"onUpdate:modelValue":p=>ce(p,"b",255),onChange:p=>ce(p,"b",255,void 0,!0)})}),m("input",{value:h.value.b,maxlength:3,readonly:g.value!==!0,onChange:gt,...c("bIn",{onInput:p=>ce(p.target.value,"b",255,p),onBlur:p=>ce(p.target.value,"b",255,p,!0)})})]),j.value===!0?m("div",{class:"row items-center no-wrap"},[m("div","A"),m(Rt,{modelValue:h.value.a,color:"grey",readonly:g.value!==!0,dark:n.value,...c("aSlide",{"onUpdate:modelValue":p=>ce(p,"a",100),onChange:p=>ce(p,"a",100,void 0,!0)})}),m("input",{value:h.value.a,maxlength:3,readonly:g.value!==!0,onChange:gt,...c("aIn",{onInput:p=>ce(p.target.value,"a",100,p),onBlur:p=>ce(p.target.value,"a",100,p,!0)})})]):null]}function qe(){const p=q=>m("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:q},...g.value===!0?c("palette#"+q,{onClick:()=>{Qe(q)}}):{}});return[m("div",{class:"row items-center q-color-picker__palette-rows"+(g.value===!0?" q-color-picker__palette-rows--editable":"")},me.value.map(p))]}return()=>{const p=[ue()];return e.name!==void 0&&e.disable!==!0&&ie(p,"push"),e.noHeader!==!0&&p.unshift(R()),e.noFooter!==!0&&p.push(Ve()),m("div",{class:Ee.value,...Pe.value},p)}}});const Gi=Ke({name:"ExploreOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{applicationStore:zt,userStore:Wt}},data(){return{placesList:new Array,loading:!1,filterText:"",locationInput:"",lastConnectedDomain:void 0,newBookmark:{name:"",color:""},locationBookmarked:!1,locationCopied:!1,domain:"",position:fo.Zero(),rotation:vo.Zero(),tab:"all"}},computed:{getLocation:function(){return this.userStore.avatar.location??"Not currently connected to a domain."},getDomainServerState:function(){return this.applicationStore.domain.url&&this.applicationStore.domain.url.length>0?`${this.applicationStore.domain.connectionState} (${this.applicationStore.domain.url})`:this.applicationStore.domain.connectionState},getShowConnect:function(){return!!(this.applicationStore.domain.url&&this.applicationStore.domain.url.length>0&&this.applicationStore.domain.connectionState==="DISCONNECTED"&&this.lastConnectedDomain)},getShowDisconnect:function(){return!!(this.applicationStore.domain.url&&this.applicationStore.domain.url.length>0&&this.applicationStore.domain.connectionState.startsWith("CONNECT"))},getDisconnectLabel:function(){return this.applicationStore.domain.connectionState==="CONNECTING"?"Cancel":this.applicationStore.domain.connectionState==="CONNECTED"?"Disconnect":"false"},filteredAndSortedData:function(){let e=this.placesList;return e=e.filter(t=>!t.name.toLowerCase().indexOf(this.filterText.toLowerCase())),e=e.sort((t,a)=>t.currentAttendance>a.currentAttendance?-1:t.currentAttendance<a.currentAttendance?1:t.name.toLowerCase()<a.name.toLowerCase()?-1:t.name.toLowerCase()>a.name.toLowerCase()?1:0),e}},methods:{async loadPlacesList(){this.loading=!0,this.placesList=await Ll.getActivePlaceList(),this.loading=!1},async openLocation(e){Ft.info(Ft.types.UI,`Connecting to... ${e}`);const t=new po(this.$route.path.replace("/","")),a=new po(e);await Ba.connectionSetup(t.hostname===a.hostname?a.pathname:e)},openDetails(e){alert("Not currently implemented: Show details - "+e.name)},async visitIconCallback(){this.filterText!==""&&await this.openLocation(this.filterText)},resetPosition(){pa.getScene().resetMyAvatarPositionAndOrientation()},connect:async function(){await this.connectToAddress(this.locationInput)},connectToLastAddress:async function(){this.lastConnectedDomain&&await this.connectToAddress(this.lastConnectedDomain)},connectToAddress:async function(e){Ft.info(Ft.types.UI,`Connecting to... ${e}`),await Ba.connectionSetup(e)},disconnect:function(){Ft.info(Ft.types.UI,`Disconnecting from... ${this.userStore.avatar.location}`),this.lastConnectedDomain=this.userStore.avatar.location,Ba.disconnectActiveDomain()},parseLocation(e,t){try{if(e.length>0){const a=new URL(e);if(t==="protocol"){const i=a.protocol.toUpperCase();return i.includes(":")?i.split(":")[0]:i}if(t==="domain")return a.hostname;if(t==="port")return a.port;if(t==="position"){const i=a.pathname.split("/")[1];return new fo(parseFloat(i.split(",")[0]),parseFloat(i.split(",")[1]),parseFloat(i.split(",")[2]))}if(t==="rotation"){const i=a.pathname.split("/")[2];return new vo(parseFloat(i.split(",")[0]),parseFloat(i.split(",")[1]),parseFloat(i.split(",")[2]),parseFloat(i.split(",")[3]))}}}catch{return"None"}return"None"},loadLocation(e){this.domain=this.parseLocation(e,"domain"),this.position=this.parseLocation(e,"position"),this.rotation=this.parseLocation(e,"rotation")},setLocation(){const e=`${this.position.x.toString()},${this.position.y.toString()},${this.position.z.toString()}`,t=`${this.rotation.x.toString()},${this.rotation.y.toString()},${this.rotation.z.toString()},${this.rotation.w.toString()}`,a=`${this.domain}/${e}/${t}`;(async()=>await this.openLocation(a))()},protocolIsSecure(e){return e==="WSS"||e==="HTTPS"},addLocationToBookmarks(){this.userStore.bookmarks.locations.push({name:this.newBookmark.name,color:this.newBookmark.color,url:this.userStore.avatar.location}),this.newBookmark.name="",this.newBookmark.color=""},updateBookmark(e){const t=this.userStore.bookmarks.locations[e].url;this.userStore.bookmarks.locations.splice(e,1,{name:this.newBookmark.name,color:this.newBookmark.color,url:t}),this.newBookmark.name="",this.newBookmark.color=""},deleteBookmark(e){this.userStore.bookmarks.locations.splice(e,1)},async copyLocationToClipboard(){this.locationCopied=!0,await navigator.clipboard.writeText(this.getLocation);const e=1700;window.setTimeout(()=>{this.locationCopied=!1},e)},validateBookmarkName(e){return/^(?=[a-z0-9._-\s]{2,20}$)(?!.*[-_.\s]{2})[^-_.\s].*[^-_.\s]$/i.test(e)}},created(){this.loadPlacesList()},beforeMount(){this.loadLocation(this.userStore.avatar.location),it(()=>this.userStore.avatar.location,e=>this.loadLocation(e))}}),dl=e=>(ba("data-v-73047ab2"),e=e(),ya(),e),Yi=["src","alt"],Ji=["title"],Xi={class:"row q-gutter-x-md q-mt-xs"},Zi=["title"],er={class:"row q-gutter-x-md q-mt-xs"},tr=["title"],ar={class:"row q-gutter-x-md q-mt-xs"},or={class:"locationBookmark"},lr={class:"row q-gutter-x-md q-mt-xs"},nr={class:"locationCopy"},ir={class:"locationButton"},rr={class:"row"},sr=dl(()=>E("div",{class:"exploreItemBackground"},null,-1)),ur={key:0,class:"text-grey-6 q-pt-lg",style:{width:"100%","text-align":"center"}},dr={class:"col",style:{width:"100%",overflow:"hidden"}},cr={class:"q-ma-none text-no-wrap ellipsis"},mr=["title"],fr={class:"row q-gutter-x-md q-mt-xs"},vr={class:"row q-px-md q-py-sm",style:{"align-items":"center",gap:"16px","border-top":"1px solid #8888"}},pr=dl(()=>E("p",{class:"q-ma-none"},"Stuck?",-1));function hr(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"travel_explore",title:"Explore",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400,defaultLeft:250,defaultTop:10,hoverShowBar:!1,style:{border:"none"}},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[E("div",{class:Ht(["exploreLocationInfo q-pa-sm",{connected:e.applicationStore.metaverse.connectionState==="CONNECTED",connecting:e.applicationStore.metaverse.connectionState==="CONNECTING",disconnected:e.applicationStore.metaverse.connectionState==="DISCONNECTED"}])},[E("img",{src:e.applicationStore.theme.logo,alt:`${e.applicationStore.theme.productName} logo`},null,8,Yi),E("p",{class:"locationDomain text-no-wrap ellipsis cursor-pointer",title:"Domain: "+e.parseLocation(e.getLocation,"domain")},[l(Ie,{name:e.protocolIsSecure(e.parseLocation(e.getLocation,"protocol"))?"lock":"no_encryption",size:"1em",title:e.protocolIsSecure(e.parseLocation(e.getLocation,"protocol"))?"Connection secured with "+e.parseLocation(e.getLocation,"protocol"):e.parseLocation(e.getLocation,"protocol")},null,8,["name","title"]),x(" "+ne(e.parseLocation(e.getLocation,"domain"))+" ",1),l(Vt,{modelValue:e.domain,"onUpdate:modelValue":t[1]||(t[1]=o=>e.domain=o)},{default:s(o=>[x(" Domain "),l(ye,{dense:"",autofocus:"",modelValue:e.domain,"onUpdate:modelValue":t[0]||(t[0]=v=>e.domain=v)},null,8,["modelValue"]),E("div",Xi,[l(Z,{onClick:()=>{o.cancel(),e.loadLocation(e.userStore.avatar.location)}},{default:s(()=>[x("Cancel")]),_:2},1032,["onClick"]),l(Z,{color:"primary",onClick:()=>{o.set(),e.setLocation()}},{default:s(()=>[x("Ok")]),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])],8,Ji),E("p",{class:"locationPosition text-no-wrap ellipsis cursor-pointer",title:"Position: "+e.parseLocation(e.getLocation,"position").toString().replace("{","").replace("}","")},[x(ne(e.parseLocation(e.getLocation,"position").toString().replace("{","").replace("}",""))+" ",1),l(Vt,{modelValue:e.position,"onUpdate:modelValue":t[5]||(t[5]=o=>e.position=o)},{default:s(o=>[x(" Position "),l(ye,{dense:"",type:"number",label:"X",modelValue:e.position.x,"onUpdate:modelValue":t[2]||(t[2]=v=>e.position.x=v)},null,8,["modelValue"]),l(ye,{dense:"",type:"number",label:"Y",modelValue:e.position.y,"onUpdate:modelValue":t[3]||(t[3]=v=>e.position.y=v)},null,8,["modelValue"]),l(ye,{dense:"",type:"number",label:"Z",modelValue:e.position.z,"onUpdate:modelValue":t[4]||(t[4]=v=>e.position.z=v)},null,8,["modelValue"]),E("div",er,[l(Z,{onClick:()=>{o.cancel(),e.loadLocation(e.userStore.avatar.location)}},{default:s(()=>[x("Cancel")]),_:2},1032,["onClick"]),l(Z,{color:"primary",onClick:()=>{o.set(),e.setLocation()}},{default:s(()=>[x("Ok")]),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])],8,Zi),E("p",{class:"locationRotation text-no-wrap ellipsis cursor-pointer",title:"Rotation: "+e.parseLocation(e.getLocation,"rotation").toString().replace("{","").replace("}","")},[x(ne(e.parseLocation(e.getLocation,"rotation").toString().replace("{","").replace("}",""))+" ",1),l(Vt,{modelValue:e.rotation,"onUpdate:modelValue":t[10]||(t[10]=o=>e.rotation=o)},{default:s(o=>[x(" Rotation "),l(ye,{dense:"",type:"number",label:"X",modelValue:e.rotation.x,"onUpdate:modelValue":t[6]||(t[6]=v=>e.rotation.x=v)},null,8,["modelValue"]),l(ye,{dense:"",type:"number",label:"Y",modelValue:e.rotation.y,"onUpdate:modelValue":t[7]||(t[7]=v=>e.rotation.y=v)},null,8,["modelValue"]),l(ye,{dense:"",type:"number",label:"Z",modelValue:e.rotation.z,"onUpdate:modelValue":t[8]||(t[8]=v=>e.rotation.z=v)},null,8,["modelValue"]),l(ye,{dense:"",type:"number",label:"W",modelValue:e.rotation.w,"onUpdate:modelValue":t[9]||(t[9]=v=>e.rotation.w=v)},null,8,["modelValue"]),E("div",ar,[l(Z,{onClick:()=>{o.cancel(),e.loadLocation(e.userStore.avatar.location)}},{default:s(()=>[x("Cancel")]),_:2},1032,["onClick"]),l(Z,{color:"primary",onClick:()=>{o.set(),e.setLocation()}},{default:s(()=>[x("Ok")]),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])],8,tr),E("div",or,[at((k(),oe(Z,{flat:"",round:"",icon:e.locationBookmarked?"done":"bookmark",disable:e.locationBookmarked,size:"sm",class:"q-pa-none",title:"Bookmark this location"},{default:s(()=>[l(Vt,{modelValue:e.newBookmark,"onUpdate:modelValue":t[13]||(t[13]=o=>e.newBookmark=o)},{default:s(o=>[x(" New Bookmark "),l(ye,{dense:"",label:"Name",counter:"",modelValue:e.newBookmark.name,"onUpdate:modelValue":t[11]||(t[11]=v=>e.newBookmark.name=v),validate:e.validateBookmarkName},null,8,["modelValue","validate"]),l(fa,{"no-header":"","no-footer":"",class:"q-mt-xs","format-model":"hex",modelValue:e.newBookmark.color,"onUpdate:modelValue":t[12]||(t[12]=v=>e.newBookmark.color=v)},null,8,["modelValue"]),E("div",lr,[l(Z,{onClick:()=>{o.cancel()}},{default:s(()=>[x("Cancel")]),_:2},1032,["onClick"]),l(Z,{color:"primary",onClick:()=>{o.set(),e.addLocationToBookmarks()}},{default:s(()=>[x("Ok")]),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])]),_:1},8,["icon","disable"])),[[St]])]),E("div",nr,[at(l(Z,{flat:"",round:"",icon:e.locationCopied?"done":"content_copy",disable:e.locationCopied,size:"sm",class:"q-pa-none",title:"Copy location link",onClick:t[14]||(t[14]=pe(o=>e.copyLocationToClipboard(),["stop"]))},null,8,["icon","disable"]),[[St]])]),E("div",ir,[at(l(Z,{dense:"",color:"secondary",size:"sm",class:"q-ml-sm absolute",style:{"margin-top":"-4px"},onClick:t[15]||(t[15]=o=>e.disconnect()),label:e.getDisconnectLabel},null,8,["label"]),[[va,e.getShowDisconnect]]),at(l(Z,{dense:"",color:"secondary",size:"sm",class:"q-ml-sm absolute",style:{"margin-top":"-4px"},onClick:t[16]||(t[16]=o=>e.connectToLastAddress()),label:"Connect"},null,512),[[va,e.getShowConnect]])])],2),E("div",rr,[l(ye,{borderless:"",dense:"",filled:"",debounce:"300",modelValue:e.filterText,"onUpdate:modelValue":t[17]||(t[17]=o=>e.filterText=o),placeholder:"Search or enter location",class:"col","append-icon":"mdi-location-enter",onKeyup:Kt(e.visitIconCallback,["enter"])},{append:s(()=>[l(Ie,{name:"search"}),at(l(Ie,{name:"launch",onClick:e.visitIconCallback,clickable:""},null,8,["onClick"]),[[St]])]),_:1},8,["modelValue","onKeyup"])]),l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[18]||(t[18]=o=>e.tab=o),"no-caps":"",dense:"",class:"text-white shadow-2"},{default:s(()=>[l(Xe,{name:"all",label:"All"}),l(Xe,{name:"bookmarks",label:"Bookmarks"})]),_:1},8,["modelValue"]),l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[22]||(t[22]=o=>e.tab=o),animated:"",class:"full-height"},{default:s(()=>[l(ot,{name:"all",class:"q-pa-none non-selectable"},{default:s(()=>[l(dt,{showing:!e.loading},{default:s(()=>[(k(!0),U(We,null,bt(e.filteredAndSortedData,o=>at((k(),oe(Me,{key:o.placeId,clickable:"",onClick:v=>e.openLocation(o.address),style:lt(o.thumbnail?"background-image: url("+o.thumbnail+");":""),class:"exploreItem"},{default:s(()=>[sr,l(W,{side:""},{default:s(()=>[l(Z,{round:"",color:"white",icon:"fas fa-info",clickable:"",onClick:pe(v=>e.openDetails(o),["stop"]),class:"text-secondary",size:"10px"},null,8,["onClick"])]),_:2},1024),l(W,{top:""},{default:s(()=>[l(wt,{lines:"1",class:Ht([e.$q.dark.isActive?"bg-dark":"bg-white","exploreLabel"])},{default:s(()=>[x(ne(o.name),1)]),_:2},1032,["class"]),l(wt,{caption:"",lines:"1",class:Ht([e.$q.dark.isActive?"bg-dark":"bg-white","exploreLabel"])},{default:s(()=>[x(ne(o.description),1)]),_:2},1032,["class"])]),_:2},1024),l(W,{side:""},{default:s(()=>[l(Go,{color:"white","text-color":"black"},{default:s(()=>[x(ne(o.currentAttendance)+" ",1),l(Ie,{name:"people",size:"14px",class:"q-ml-xs"})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","style"])),[[St]])),128))]),_:1},8,["showing"])]),_:1}),l(ot,{name:"bookmarks",class:"full-height q-pa-none non-selectable"},{default:s(()=>[l(dt,{showing:!e.loading},{default:s(()=>[e.userStore.bookmarks.locations.length<=0?(k(),U("p",ur,"You have no bookmarks")):(k(!0),U(We,{key:1},bt(e.userStore.bookmarks.locations,(o,v)=>at((k(),oe(Me,{key:o.name,clickable:"",style:{height:"4em"},onClick:b=>e.openLocation(o.url)},{default:s(()=>[l(W,{side:""},{default:s(()=>[l(ro,{style:lt({backgroundColor:o.color,border:"4px solid #888"}),size:"md"},null,8,["style"])]),_:2},1024),l(W,null,{default:s(()=>[E("div",dr,[E("p",cr,ne(o.name),1),E("p",{class:"q-ma-none text-caption text-grey-5 text-no-wrap ellipsis",title:o.url},ne(o.url),9,mr)])]),_:2},1024),l(W,null,{default:s(()=>[l(Z,{dense:"",flat:"","fab-mini":"",icon:"edit",title:"Edit bookmark",onClick:pe(()=>{e.newBookmark.name=o.name,e.newBookmark.color=o.color},["stop"])},{default:s(()=>[l(Vt,{modelValue:e.newBookmark,"onUpdate:modelValue":t[21]||(t[21]=b=>e.newBookmark=b)},{default:s(b=>[x(" New Bookmark "),l(ye,{dense:"",label:"Name",counter:"",modelValue:e.newBookmark.name,"onUpdate:modelValue":t[19]||(t[19]=y=>e.newBookmark.name=y),validate:e.validateBookmarkName},null,8,["modelValue","validate"]),l(fa,{"no-header":"","no-footer":"",class:"q-mt-xs","format-model":"hex",modelValue:e.newBookmark.color,"onUpdate:modelValue":t[20]||(t[20]=y=>e.newBookmark.color=y)},null,8,["modelValue"]),E("div",fr,[l(Z,{onClick:()=>{b.cancel()}},{default:s(()=>[x("Cancel")]),_:2},1032,["onClick"]),l(Z,{color:"primary",onClick:()=>{b.set(),e.updateBookmark(v)}},{default:s(()=>[x("Ok")]),_:2},1032,["onClick"])])]),_:2},1032,["modelValue"])]),_:2},1032,["onClick"]),l(Z,{dense:"",flat:"","fab-mini":"",color:"red",icon:"delete",title:"Delete bookmark",onClick:pe(b=>e.deleteBookmark(v),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])),[[St]])),128))]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]),E("div",vr,[pr,l(Z,{size:"sm",color:"secondary",onClick:t[23]||(t[23]=o=>e.resetPosition())},{default:s(()=>[x("Reset position")]),_:1})])]),_:1}),l(el,{showing:e.loading},{default:s(()=>[l(Ea,{size:"xl",color:"primary"})]),_:1},8,["showing"])]),_:1},8,["managerProps"])}var gr=et(Gi,[["render",hr],["__scopeId","data-v-73047ab2"]]);const br={...io,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},eo=50,cl=2*eo,ml=cl*Math.PI,yr=Math.round(ml*1e3)/1e3;var Sr=je({name:"QCircularProgress",props:{...br,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=st(),i=no(e),n=f(()=>{const h=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-h}deg)`:`rotate3d(0, 0, 1, ${h-90}deg)`}}),c=f(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),r=f(()=>cl/(1-e.thickness/2)),o=f(()=>`${r.value/2} ${r.value/2} ${r.value} ${r.value}`),v=f(()=>Qt(e.value,e.min,e.max)),b=f(()=>ml*(1-(v.value-e.min)/(e.max-e.min))),y=f(()=>e.thickness/2*r.value);function V({thickness:h,offset:g,color:_,cls:H,rounded:N}){return m("circle",{class:"q-circular-progress__"+H+(_!==void 0?` text-${_}`:""),style:c.value,fill:"transparent",stroke:"currentColor","stroke-width":h,"stroke-dasharray":yr,"stroke-dashoffset":g,"stroke-linecap":N,cx:r.value,cy:r.value,r:eo})}return()=>{const h=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&h.push(m("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:eo-y.value/2,cx:r.value,cy:r.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&h.push(V({cls:"track",thickness:y.value,offset:0,color:e.trackColor})),h.push(V({cls:"circle",thickness:y.value,offset:b.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[m("svg",{class:"q-circular-progress__svg",style:n.value,viewBox:o.value,"aria-hidden":"true"},h)];return e.showValue===!0&&g.push(m("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[m("div",v.value)])),m("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:i.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:v.value},Wo(t.internal,g))}}});const wr=Ke({name:"PeopleOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{applicationStore:zt}},data(){return{showVolumeSlider:{},canKick:!1}},methods:{getProfilePicture(e){},getDisplayName(e){return e.displayName??"anonymous"},setVolume(e,t){var a;if(typeof t=="number"){const i=(a=Bt.ActiveDomain)==null?void 0:a.DomainClient;i&&i.users.setAvatarGain(e,El.getGainFromPercentage(t)),this.applicationStore.updateAvatarProperty(e,"volume",t)}},complementMuted(e){var i;const t=!e.muted,a=(i=Bt.ActiveDomain)==null?void 0:i.DomainClient;a&&a.users.setPersonalMute(e.sessionId,t),this.applicationStore.updateAvatarProperty(e.sessionId,"muted",t)},teleportToAvatar(e){pa.getScene().teleportMyAvatarToOtherPeople(e.sessionId.stringify())},banByIP(){return za.BanFlags.BAN_BY_USERNAME+za.BanFlags.BAN_BY_FINGERPRINT+za.BanFlags.BAN_BY_IP},adminServerMute(e){var a;const t=(a=Bt.ActiveDomain)==null?void 0:a.DomainClient;t&&t.users.mute(e)},adminKick(e,t){var i;const a=(i=Bt.ActiveDomain)==null?void 0:i.DomainClient;a&&a.users.kick(e,t)}},mounted(){var t;const e=(t=Bt.ActiveDomain)==null?void 0:t.DomainClient;this.canKick=Boolean(e==null?void 0:e.users.canKick),e==null||e.users.canKickChanged.connect(()=>{this.canKick=Boolean(e==null?void 0:e.users.canKick)})}}),kr=e=>(ba("data-v-1615dc0e"),e=e(),ya(),e),Cr=["src"],Ar={key:1,style:{"user-select":"none"}},Tr={class:"row",style:{"justify-content":"space-between","align-items":"center",gap:"16px"}},Mr={class:"row",style:{position:"relative","justify-content":"flex-end","align-items":"center",gap:"4px"}},$r={style:{all:"inherit",position:"relative"}},Vr=kr(()=>E("span",{class:"volumeIcon"},null,-1)),Lr={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"};function Er(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"people",title:`People (${Array.from(e.applicationStore.avatars.avatarsInfo.keys()).length})`,managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400,defaultLeft:300,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[l(Et,{class:"col",style:{height:"100%"}},{default:s(()=>[Array.from(e.applicationStore.avatars.avatarsInfo.keys()).length>0?(k(),oe(dt,{key:0},{default:s(()=>[(k(!0),U(We,null,bt(e.applicationStore.avatars.avatarsInfo.values(),o=>(k(),oe(Me,{key:o.sessionId.stringify(),class:"q-mb-none q-pa-sm",dense:""},{default:s(()=>[l(W,{avatar:"",class:"q-gutter-y-sm"},{default:s(()=>[l(ro,{color:"primary"},{default:s(()=>[e.getProfilePicture(o)?(k(),U("img",{key:0,src:e.getProfilePicture(o)},null,8,Cr)):(k(),U("span",Ar,ne(e.getDisplayName(o).substring(0,2)),1))]),_:2},1024),o.isAdmin?(k(),oe(wt,{key:0,caption:"",lines:"1"},{default:s(()=>[x("Admin")]),_:1})):Ue("",!0)]),_:2},1024),l(W,null,{default:s(()=>{var v;return[E("div",Tr,[l(wt,null,{default:s(()=>[x(ne(e.getDisplayName(o)),1)]),_:2},1024),E("div",Mr,[E("div",{style:lt({opacity:e.showVolumeSlider[o.sessionId.stringify()]?0:1,transition:e.showVolumeSlider[o.sessionId.stringify()]?"none":"0.25s ease opacity",pointerEvents:e.showVolumeSlider[o.sessionId.stringify()]?"none":"all"})},[l(Z,{icon:"place","text-color":"primary",flat:"",round:"",dense:"",ripple:"",title:`Teleport to ${o.displayName}`,onClick:pe(b=>e.teleportToAvatar(o),["stop"])},null,8,["title","onClick"]),l(Z,{icon:"person_add_alt_1","text-color":"primary",flat:"",round:"",dense:"",ripple:"",title:`Add ${o.displayName} as a friend`,disable:"",onClick:t[0]||(t[0]=pe(()=>{},["stop"]))},null,8,["title"]),e.canKick?(k(),U(We,{key:0},[l(Z,{icon:"logout","text-color":"negative",flat:"",round:"",dense:"",ripple:"",title:`Kick ${o.displayName}`,disable:!e.canKick,onClick:pe(b=>e.adminKick(o.sessionId),["stop"])},null,8,["title","disable","onClick"]),l(Z,{icon:"remove_circle","text-color":"negative",flat:"",round:"",dense:"",ripple:"",title:`IP Ban ${o.displayName}`,disable:!e.canKick,onClick:pe(b=>e.adminKick(o.sessionId,e.banByIP()),["stop"])},null,8,["title","disable","onClick"]),l(Z,{icon:"mic_off","text-color":"negative",flat:"",round:"",dense:"",ripple:"",title:`Server mute ${o.displayName}`,disable:!e.canKick,onClick:pe(b=>e.adminServerMute(o.sessionId),["stop"])},null,8,["title","disable","onClick"])],64)):Ue("",!0)],4),E("div",$r,[l(Rt,{thumbSize:"26px",min:0,max:100,step:5,snap:"",dark:"",color:o.muted||o.volume===0?"red":"primary",title:`Volume: ${o.volume}%`,class:"volumeSlider",style:lt({opacity:e.showVolumeSlider[o.sessionId.stringify()]?1:0,transition:e.showVolumeSlider[o.sessionId.stringify()]?"0.25s ease opacity":"none",pointerEvents:e.showVolumeSlider[o.sessionId.stringify()]?"all":"none"}),"model-value":o.volume,"onUpdate:modelValue":b=>e.setVolume(o.sessionId,b)},null,8,["color","title","style","model-value","onUpdate:modelValue"]),l(Z,{"text-color":o.muted||o.volume===0?"red":"primary",flat:"",round:"",dense:"",ripple:"",title:`Adjust ${((v=o.displayName[o.displayName.length-1])==null?void 0:v.toLowerCase())==="s"?o.displayName+"'":o.displayName+"'s"} volume`,onClick:pe(b=>e.showVolumeSlider[o.sessionId.stringify()]=!e.showVolumeSlider[o.sessionId.stringify()],["stop"])},{default:s(()=>[l(Sr,{angle:180,value:o.volume,"instant-feedback":"",size:"xs",thickness:.3,"track-color":"transparent","show-value":"",class:"q-ma-none"},{default:s(()=>[Vr]),_:2},1032,["value"])]),_:2},1032,["text-color","title","onClick"])]),l(Z,{icon:o.muted||o.volume===0?"volume_off":"volume_up","text-color":o.muted||o.volume===0?"red":"primary",flat:"",round:"",dense:"",ripple:"",title:o.muted||o.volume===0?`Unmute ${o.displayName}`:`Mute ${o.displayName}`,onClick:pe(b=>e.complementMuted(o),["stop"])},null,8,["icon","text-color","title","onClick"])])])]}),_:2},1024)]),_:2},1024))),128))]),_:1})):(k(),U("p",Lr,"There is no one else in this server."))]),_:1})]),_:1})]),_:1},8,["title","managerProps","style"])}var _r=et(wr,[["render",Er],["__scopeId","data-v-1615dc0e"]]);const Or=Ke({name:"AvatarOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{userStore:Wt}},data(){return{AvatarStoreInterface:$t,avatarList:{},listFilterValue:"",modelCreateDialog:!1,customModel:{name:"",image:"",url:""},loadingAvatar:!1,fallbackModelId:_l()}},computed:{displayNameStore:{get:function(){return this.userStore.avatar.displayName},set:function(e){var i;Ft.debug(Ft.types.AVATAR,`Avatar.vue: set displayNameStore. inputInfo=${e}`);const a=(i=pa.getScene()._myAvatar)==null?void 0:i.getComponent(ho.typeName);a instanceof ho&&(a.displayName=e),this.userStore.avatar.displayName=e}},activeModelNameStore:{get:function(){return $t.getActiveModelData("name")},set:function(e){$t.setActiveModelData("name",e)}},activeModelFileStore:{get:function(){return $t.getActiveModelData("file")},set:function(e){$t.setActiveModelData("file",e)}}},methods:{loadAvatarList(){this.avatarList={};const e=this.sortAvatarList(this.listFilterValue);for(let t=0;t<e.length;t++){const a=e[t][0],i=e[t][1];this.avatarList[a]={avatar:i,showMoreOptions:!1}}},async selectAvatar(e,t){!this.loadingAvatar&&e in this.userStore.avatar.models&&(this.loadingAvatar=!0,$t.setActiveModel(e),await pa.getScene().loadMyAvatar($t.getModelData(e,"file"),t),this.loadingAvatar=!1)},validateDisplayName(e){return/^(?=[a-z0-9._-\s]{2,20}$)(?!.*[-_.\s]{2})[^-_.\s].*[^-_.\s]$/i.test(e)},validateModelName(e){return/^(?=[a-z0-9._-\s]{2,20}$)(?!.*[-_.\s]{2})[^-_.\s].*[^-_.\s]$/i.test(e)},validateModelFile(e){return/(?:\.glb|\.gltf)$/iu.test(e)},validateModelImage(e){return/(?:\.png|\.jpg|\.jpeg|\.webp)$/iu.test(e)},filterAvatarList(e){if(!e||e==="")return this.userStore.avatar.models;const t={};return Object.entries(this.userStore.avatar.models).forEach(a=>{a[1].name.toLowerCase().includes(e.toLowerCase())&&(t[a[0]]=a[1])}),t},sortAvatarList(e){const t=Object.entries(this.filterAvatarList(e));return t.sort((a,i)=>{let n=0;const c=a[1].starred,r=i[1].starred;return c&&c!==r?n=-1:n=1,n}),t},saveCustomAvatar(){this.validateModelName(this.customModel.name)&&this.validateModelFile(this.customModel.url)&&($t.createNewModel({name:this.customModel.name,image:this.customModel.image,file:this.customModel.url,scale:1,starred:!0},!0),this.customModel.name="",this.customModel.image="",this.customModel.url="",this.loadAvatarList())}},beforeMount(){this.loadAvatarList()}}),fl=e=>(ba("data-v-2f333a1e"),e=e(),ya(),e),Ir={class:"row q-mb-sm q-px-md"},qr={class:"col"},Rr={title:"Display name",class:"text-h5 text-left q-pl-md q-mt-md q-mb-sm cursor-pointer"},Pr=fl(()=>E("span",{class:"q-focus-helper"},null,-1)),Nr={class:"row q-ml-md q-pl-xs",style:{border:"1px solid #8888","border-radius":"7px"}},Dr={class:"q-my-xs q-mr-sm q-ml-auto"},Br={class:"row q-gutter-x-md text-subtitle1 text-left q-px-md q-mt-sm q-mb-xs",style:{"flex-flow":"row nowrap"}},zr=fl(()=>E("p",{class:"q-my-auto"},"My Avatars",-1)),xr={class:"row q-gutter-x-md"},Fr={style:{height:"100%"},class:"column no-wrap items-stretch full-height"},Ur={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"},Hr={class:"text-subtitle1 text-center q-mt-xs q-mb-xs"};function Wr(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"directions_run",title:"Avatar",managerProps:e.propsToPass,defaultHeight:730,defaultWidth:380,defaultLeft:250,defaultTop:50,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height non-selectable",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[E("div",Ir,[e.AvatarStoreInterface.getActiveModelData("image")?(k(),oe(So,{key:0,src:e.AvatarStoreInterface.getActiveModelData("image"),draggable:!1,width:"100px",height:"100px",ratio:"1",class:"q-mt-md q-mb-xs",style:{"border-radius":"7px"}},null,8,["src"])):(k(),oe(Ie,{key:1,name:"mood",size:"xl",class:"q-pt-md q-pb-xs",style:{width:"100px",height:"100px"}})),E("div",qr,[E("div",Rr,[x(ne(e.displayNameStore)+" ",1),at((k(),oe(Ie,{title:"Edit display name","q-hoverable":"",name:"edit",class:"text-grey q-ml-sm"},{default:s(()=>[Pr]),_:1})),[[St]]),l(Vt,{modelValue:e.displayNameStore,"onUpdate:modelValue":t[0]||(t[0]=o=>e.displayNameStore=o),"auto-save":"",validate:e.validateDisplayName},{default:s(o=>[l(ye,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,dense:"",autofocus:"",counter:"",label:"Display Name",color:e.validateDisplayName(o.value)?"primary":"negative",onKeyup:Kt(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:1},8,["modelValue","validate"])]),E("div",Nr,[E("div",{class:Ht(["q-my-auto q-ml-sm text-subtitle2 text-no-wrap ellipsis",{"cursor-pointer":e.userStore.avatar.activeModel!==e.fallbackModelId}]),title:"Avatar name"},[x(ne(e.activeModelNameStore)+" ",1),e.userStore.avatar.activeModel!==e.fallbackModelId?(k(),oe(Vt,{key:0,modelValue:e.activeModelNameStore,"onUpdate:modelValue":t[1]||(t[1]=o=>e.activeModelNameStore=o),"auto-save":"",validate:e.validateModelName},{default:s(o=>[l(ye,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v,dense:"",autofocus:"",counter:"",label:"Avatar name",color:e.validateModelName(o.value)?"primary":"negative",onKeyup:Kt(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:1},8,["modelValue","validate"])):Ue("",!0)],2),E("div",Dr,[l(Z,{flat:"",round:"",dense:"",ripple:"",icon:e.AvatarStoreInterface.getActiveModelData("starred")?"star":"star_outline","text-color":e.AvatarStoreInterface.getActiveModelData("starred")?"yellow":e.$q.dark.isActive?"white":"dark",title:"Favorite",class:"text-caption",onClick:t[2]||(t[2]=pe(()=>{e.AvatarStoreInterface.setActiveModelData("starred",!e.AvatarStoreInterface.getActiveModelData("starred")),e.loadAvatarList()},["stop"]))},null,8,["icon","text-color"]),l(Z,{flat:"",round:"",dense:"",ripple:"",icon:"refresh",title:"Reload",class:"text-caption",onClick:t[3]||(t[3]=pe(o=>e.selectAvatar(e.userStore.avatar.activeModel,!0),["stop"]))})])])])]),l(Gt,{inset:"",spaced:""}),E("div",Br,[zr,l(Z,{dense:"",round:"",color:"primary",icon:"add",title:"Add a new avatar",class:"q-mt-xs",style:{width:"2.4em",height:"2.4em"}},{default:s(()=>[l(Vt,{modelValue:e.modelCreateDialog,"onUpdate:modelValue":t[7]||(t[7]=o=>e.modelCreateDialog=o)},{default:s(o=>[x(" New Avatar "),l(ye,{modelValue:e.customModel.image,"onUpdate:modelValue":t[4]||(t[4]=v=>e.customModel.image=v),label:"Image URL (optional)",dense:"",color:e.validateModelImage(e.customModel.image)||e.customModel.image.length<1?"primary":"negative"},null,8,["modelValue","color"]),l(ye,{modelValue:e.customModel.url,"onUpdate:modelValue":t[5]||(t[5]=v=>e.customModel.url=v),label:"Model URL",dense:"",color:e.validateModelFile(e.customModel.url)||e.customModel.url.length<1?"primary":"negative"},null,8,["modelValue","color"]),l(ye,{modelValue:e.customModel.name,"onUpdate:modelValue":t[6]||(t[6]=v=>e.customModel.name=v),label:"Name",dense:"",counter:"",color:e.validateModelName(o.value)?"primary":"negative"},null,8,["modelValue","color"]),E("div",xr,[l(Z,{onClick:()=>{o.cancel()}},{default:s(()=>[x("Cancel")]),_:2},1032,["onClick"]),l(Z,{color:"primary",onClick:()=>{o.set(),e.saveCustomAvatar()}},{default:s(()=>[x("Ok")]),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])]),_:1}),l(ye,{standout:"",dense:"",rounded:"",class:"avatar-search",style:{"max-width":"40%","margin-left":"auto"},label:"Search",modelValue:e.listFilterValue,"onUpdate:modelValue":t[8]||(t[8]=o=>e.listFilterValue=o),clearable:"",onKeyup:t[9]||(t[9]=o=>e.loadAvatarList()),onChange:t[10]||(t[10]=o=>e.loadAvatarList()),onClear:t[11]||(t[11]=o=>e.loadAvatarList())},null,8,["modelValue"])]),E("div",Fr,[l(Et,{class:"col",style:{height:"100%"}},{default:s(()=>[Object.entries(e.avatarList).length>0?(k(),oe(dt,{key:0},{default:s(()=>[(k(!0),U(We,null,bt(e.avatarList,(o,v)=>at((k(),oe(Me,{key:v,active:v===e.userStore.avatar.activeModel,class:"q-mb-sm",clickable:"",onClick:b=>e.selectAvatar(v)},{default:s(()=>[l(W,{avatar:""},{default:s(()=>[o.avatar.image?(k(),oe(So,{key:0,src:o.avatar.image,draggable:!1,ratio:"1",style:{"border-radius":"7px"}},null,8,["src"])):(k(),oe(Ie,{key:1,name:"mood",size:"lg"}))]),_:2},1024),l(Ol,{name:"slide-left"},{default:s(()=>[o.showMoreOptions?(k(),oe(W,{key:"back",style:{top:"8px !important","flex-flow":"row nowrap","justify-content":"flex-start",height:"60%","margin-top":"3px"}},{default:s(()=>[v!==e.fallbackModelId?(k(),U(We,{key:0},[l(Z,{flat:"",round:"",dense:"",ripple:"",icon:"edit","text-color":e.$q.dark.isActive?"white":"dark",title:"Rename",onClick:t[12]||(t[12]=pe(()=>{},["stop"]))},{default:s(()=>[l(Vt,{"model-value":o.avatar.name,"onUpdate:modelValue":b=>{e.AvatarStoreInterface.setModelData(v,"name",b)},"auto-save":"",validate:e.validateModelName,buttons:""},{default:s(b=>[l(ye,{modelValue:b.value,"onUpdate:modelValue":y=>b.value=y,dense:"",autofocus:"",counter:"",label:"Avatar Name",color:e.validateModelName(b.value)?"primary":"negative",onKeyup:Kt(b.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue","validate"])]),_:2},1032,["text-color"]),l(Z,{flat:"",round:"",dense:"",ripple:"",icon:"image","text-color":e.$q.dark.isActive?"white":"dark",title:"Change avatar image",onClick:t[13]||(t[13]=pe(()=>{},["stop"]))},{default:s(()=>[l(Vt,{"model-value":o.avatar.image,"onUpdate:modelValue":b=>{e.AvatarStoreInterface.setModelData(v,"image",b)},"auto-save":"",validate:e.validateModelImage,buttons:""},{default:s(b=>[l(ye,{modelValue:b.value,"onUpdate:modelValue":y=>b.value=y,dense:"",autofocus:"",counter:"",label:"Image URL",color:e.validateModelImage(b.value)?"primary":"negative",onKeyup:Kt(b.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue","validate"])]),_:2},1032,["text-color"]),l(Z,{flat:"",round:"",dense:"",ripple:"",icon:"link","text-color":e.$q.dark.isActive?"white":"dark",title:"Change avatar file",onClick:t[14]||(t[14]=pe(()=>{},["stop"]))},{default:s(()=>[l(Vt,{"model-value":o.avatar.file,"onUpdate:modelValue":b=>{e.AvatarStoreInterface.setModelData(v,"file",b)},"auto-save":"",validate:e.validateModelFile,buttons:""},{default:s(b=>[l(ye,{modelValue:b.value,"onUpdate:modelValue":y=>b.value=y,dense:"",autofocus:"",counter:"",label:"Model URL",color:e.validateModelFile(b.value)?"primary":"negative",onKeyup:Kt(b.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue","validate"])]),_:2},1032,["text-color"]),l(Z,{flat:"",round:"",dense:"",ripple:"",icon:"delete","text-color":"red",title:"Remove avatar",onClick:pe(b=>{e.AvatarStoreInterface.removeModel(v),e.loadAvatarList()},["stop"])},null,8,["onClick"])],64)):Ue("",!0)]),_:2},1024)):(k(),oe(W,{key:"front"},{default:s(()=>[x(ne(o.avatar.name),1)]),_:2},1024))]),_:2},1024),l(W,{style:{"flex-flow":"row nowrap",flex:"none",height:"100%","margin-top":"3px"}},{default:s(()=>[v!==e.fallbackModelId?(k(),oe(Z,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"more_horiz","text-color":e.$q.dark.isActive?"white":"dark",title:"More options",onClick:pe(b=>o.showMoreOptions=!o.showMoreOptions,["stop"])},null,8,["text-color","onClick"])):Ue("",!0),l(Z,{flat:"",round:"",dense:"",ripple:"",icon:o.avatar.starred?"star":"star_outline","text-color":o.avatar.starred?"yellow":e.$q.dark.isActive?"white":"dark",title:"Favorite",onClick:pe(b=>e.AvatarStoreInterface.setModelData(v,"starred",!o.avatar.starred),["stop"])},null,8,["icon","text-color","onClick"])]),_:2},1024)]),_:2},1032,["active","onClick"])),[[St]])),128))]),_:1})):(k(),U("p",Ur,"You have no saved avatars."))]),_:1})]),l(Gt,{inset:"",spaced:""}),E("p",Hr,ne(Object.entries(e.userStore.avatar.models).length>0?"Or c":"C")+"reate your own avatar with: ",1),l(Me,{class:"q-pb-lg"},{default:s(()=>[l(W,null,{default:s(()=>[l(Z,{color:"cyan-12","text-color":"dark",onClick:t[15]||(t[15]=o=>e.$emit("overlay-action","openOverlay:ReadyPlayerMe"))},{default:s(()=>[x("Ready Player Me")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["managerProps","style"])}var jr=et(Or,[["render",Wr],["__scopeId","data-v-2f333a1e"]]);const Kr=Ke({name:"ReadyPlayerMeOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},data(){return{loading:!1,longLoad:!1,error:!1,frame:{},subdomain:"vircadia"}},methods:{parse(e){try{return JSON.parse(e.data)}catch{return null}},subscribe(e){const t=this.parse(e);if((t==null?void 0:t.source)==="readyplayerme"){if(this.frame.contentWindow&&(t==null?void 0:t.eventName)==="v1.frame.ready"&&this.frame.contentWindow.postMessage(JSON.stringify({target:"readyplayerme",type:"subscribe",eventName:"v1.**"}),"*"),(t==null?void 0:t.eventName)==="v1.avatar.exported"){const a=t.data.url;console.log(`Avatar URL: ${a}`),this.setAvatar(a)}(t==null?void 0:t.eventName)==="v1.user.set"&&console.log(`User with id ${t.data.id} set: ${JSON.stringify(t)}`)}},renderAvatarImage(e){const a={model:$t.getModelData(e,"file"),scene:"fullbody-portrait-v1-transparent",blendShapes:{Wolf3D_Avatar:{mouthSmile:.5}}},i=new XMLHttpRequest;i.open("POST","https://render.readyplayer.me/render"),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(a)),i.onload=function(){const c=JSON.parse(i.responseText).renders[0];$t.setModelData(e,"image",c)}},setAvatar(e){const t=pa.getScene();this.loading=!0;const a=window.setTimeout(()=>{this.longLoad=!0},15e3),i=$t.createNewModel({name:"New Avatar",image:"",file:e,scale:1,starred:!0});this.renderAvatarImage(i),t.loadMyAvatar(e).then(()=>{this.loading=!1,window.clearTimeout(a),this.longLoad=!1,this.closeOverlay()}).catch(n=>{console.warn("Failed to load RPM avatar:",n),this.loading=!1,window.clearTimeout(a),this.longLoad=!1,this.error=!0,window.setTimeout(()=>{this.error=!1},1e3)})},closeOverlay(){this.$emit("overlay-action","close")}},mounted(){this.frame=document.getElementById("rpm_frame"),this.frame.src=`https://${this.subdomain}.readyplayer.me/avatar?frameApi`,window.addEventListener("message",e=>{this.subscribe(e)}),document.addEventListener("message",e=>{this.subscribe(e)})}}),Qr={key:0,class:"absolute-center",style:{display:"flex","flex-flow":"column nowrap","align-items":"center",gap:"10px","text-align":"center"}},Gr={key:0},Yr={key:1},Jr={key:1,class:"absolute-center bg-negative q-px-md q-py-sm rounded-borders"},Xr={id:"rpm_frame",title:"Ready Player Me",name:"ReadyPlayerMe",width:"800",height:"600",allowfullscreen:"false",allowpaymentrequest:"false",allow:"camera *; microphone *; clipboard-write",frameBorder:"0",style:{width:"100%",height:"100%"}};function Zr(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"face",title:"Ready Player Me",managerProps:e.propsToPass,defaultHeight:800,defaultWidth:800,defaultLeft:300,defaultTop:10,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[e.loading&&!e.error?(k(),U("div",Qr,[l(Ea,{size:"xl",class:"q-ma-none",style:{"margin-left":"-16px"}}),e.longLoad?(k(),U("p",Gr,"This is taking longer than usual. Hang on...")):(k(),U("p",Yr,"Loading avatar..."))])):Ue("",!0),e.error?(k(),U("p",Jr,"Something went wrong. Please try again.")):Ue("",!0),at(E("iframe",Xr,null,512),[[va,!e.loading&&!e.error]])]),_:1})]),_:1},8,["managerProps","style"])}var es=et(Kr,[["render",Zr]]);const ts=Ke({name:"MenuOverlay",props:{propsToPass:{type:Object,default:()=>({})},buildMode:{type:String,default:()=>"production"}},components:{OverlayShell:At},data:()=>({userMenu:[{icon:"people",label:"People",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"chat",label:"Chat",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"travel_explore",label:"Explore",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"directions_run",label:"Avatar",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"groups",label:"Conference",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"directions_bus",label:"Debug",link:"",isCategory:!1,separator:!0,action:void 0,devonly:!0}]}),computed:{},methods:{}}),as={key:0};function os(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"menu",title:"Menu",managerProps:e.propsToPass,defaultHeight:325,defaultWidth:200,defaultLeft:10,defaultTop:10,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height non-selectable",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[l(Et,{class:"col",style:{height:"100%"}},{default:s(()=>[l(dt,null,{default:s(()=>[(k(!0),U(We,null,bt(e.userMenu,(o,v)=>(k(),U(We,{key:v},[!o.devonly||e.buildMode=="development"?(k(),U("span",as,[o.isCategory?(k(),oe(wt,{key:0,header:""},{default:s(()=>[x(ne(o.label),1)]),_:2},1024)):at((k(),oe(Me,{key:1,clickable:"",onClick:b=>o.action?o.action:e.$emit("overlay-action","toggleOverlay:"+(o.link||o.label))},{default:s(()=>[l(W,{avatar:""},{default:s(()=>[l(Ie,{name:o.icon},null,8,["name"])]),_:2},1024),l(W,null,{default:s(()=>[x(ne(o.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[St]])])):Ue("",!0),o.separator?(k(),oe(Gt,{key:"sep"+v})):Ue("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["managerProps","style"])}var ls=et(ts,[["render",os],["__scopeId","data-v-22035fa2"]]),ns=je({name:"QField",inheritAttrs:!1,props:uo,emits:Yo,setup(){return Jo(Xo())}});const is={xs:8,sm:10,md:14,lg:20,xl:24};var rs=je({name:"QChip",props:{...Jt,...io,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:a}){const{proxy:{$q:i}}=st(),n=Xt(e,i),c=no(e,is),r=f(()=>e.selected===!0||e.icon!==void 0),o=f(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),v=f(()=>e.iconRemove||i.iconSet.chip.remove),b=f(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),y=f(()=>{const N=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(N?` text-${N} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(b.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(n.value===!0?" q-chip--dark q-dark":"")}),V=f(()=>{const N=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},ie={...N,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||i.lang.label.remove};return{chip:N,remove:ie}});function h(N){N.keyCode===13&&g(N)}function g(N){e.disable||(a("update:selected",!e.selected),a("click",N))}function _(N){(N.keyCode===void 0||N.keyCode===13)&&(ut(N),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function H(){const N=[];b.value===!0&&N.push(m("div",{class:"q-focus-helper"})),r.value===!0&&N.push(m(Ie,{class:"q-chip__icon q-chip__icon--left",name:o.value}));const ie=e.label!==void 0?[m("div",{class:"ellipsis"},[e.label])]:void 0;return N.push(m("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Wo(t.default,ie))),e.iconRight&&N.push(m(Ie,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&N.push(m(Ie,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:v.value,...V.value.remove,onClick:_,onKeyup:_})),N}return()=>{if(e.modelValue===!1)return;const N={class:y.value,style:c.value};return b.value===!0&&Object.assign(N,V.value.chip,{onClick:g,onKeyup:h}),La("div",N,H(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[St,e.ripple]])}}});const Lt=1e3,ss=["start","center","end","start-force","center-force","end-force"],vl=Array.prototype.filter,us=window.getComputedStyle(document.body).overflowAnchor===void 0?Il:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];vl.call(a,n=>n.dataset&&n.dataset.qVsAnchor!==void 0).forEach(n=>{delete n.dataset.qVsAnchor});const i=a[t];i&&i.dataset&&(i.dataset.qVsAnchor="")}))};function la(e,t){return e+t}function Ya(e,t,a,i,n,c,r,o){const v=e===window?document.scrollingElement||document.documentElement:e,b=n===!0?"offsetWidth":"offsetHeight",y={scrollStart:0,scrollViewSize:-r-o,scrollMaxSize:0,offsetStart:-r,offsetEnd:-o};if(n===!0?(e===window?(y.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,y.scrollViewSize+=document.documentElement.clientWidth):(y.scrollStart=v.scrollLeft,y.scrollViewSize+=v.clientWidth),y.scrollMaxSize=v.scrollWidth,c===!0&&(y.scrollStart=(ha===!0?y.scrollMaxSize-y.scrollViewSize:0)-y.scrollStart)):(e===window?(y.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,y.scrollViewSize+=document.documentElement.clientHeight):(y.scrollStart=v.scrollTop,y.scrollViewSize+=v.clientHeight),y.scrollMaxSize=v.scrollHeight),a!==null)for(let V=a.previousElementSibling;V!==null;V=V.previousElementSibling)V.classList.contains("q-virtual-scroll--skip")===!1&&(y.offsetStart+=V[b]);if(i!==null)for(let V=i.nextElementSibling;V!==null;V=V.nextElementSibling)V.classList.contains("q-virtual-scroll--skip")===!1&&(y.offsetEnd+=V[b]);if(t!==e){const V=v.getBoundingClientRect(),h=t.getBoundingClientRect();n===!0?(y.offsetStart+=h.left-V.left,y.offsetEnd-=h.width):(y.offsetStart+=h.top-V.top,y.offsetEnd-=h.height),e!==window&&(y.offsetStart+=y.scrollStart),y.offsetEnd+=y.scrollMaxSize-y.offsetStart}return y}function Po(e,t,a,i){t==="end"&&(t=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(i===!0&&(t=(ha===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):a===!0?(i===!0&&(t=(ha===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function ca(e,t,a,i){if(a>=i)return 0;const n=t.length,c=Math.floor(a/Lt),r=Math.floor((i-1)/Lt)+1;let o=e.slice(c,r).reduce(la,0);return a%Lt!==0&&(o-=t.slice(c*Lt,a).reduce(la,0)),i%Lt!==0&&i!==n&&(o-=t.slice(i,r*Lt).reduce(la,0)),o}const ds={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},cs={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ds};function ms({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:a,virtualScrollItemSizeComputed:i}){const n=st(),{props:c,emit:r,proxy:o}=n,{$q:v}=o;let b,y,V,h=[],g;const _=F(0),H=F(0),N=F({}),ie=F(null),j=F(null),S=F(null),L=F({from:0,to:0}),B=f(()=>c.tableColspan!==void 0?c.tableColspan:100);i===void 0&&(i=f(()=>c.virtualScrollItemSize));const le=f(()=>i.value+";"+c.virtualScrollHorizontal),me=f(()=>le.value+";"+c.virtualScrollSliceRatioBefore+";"+c.virtualScrollSliceRatioAfter);it(me,()=>{He()}),it(le,Ee);function Ee(){ce(y,!0)}function Pe(C){ce(C===void 0?y:C)}function $e(C,D){const R=t();if(R==null||R.nodeType===8)return;const ue=Ya(R,a(),ie.value,j.value,c.virtualScrollHorizontal,v.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd);V!==ue.scrollViewSize&&He(ue.scrollViewSize),J(R,ue,Math.min(e.value-1,Math.max(0,parseInt(C,10)||0)),0,ss.indexOf(D)>-1?D:y>-1&&C>y?"end":"start")}function Ae(){const C=t();if(C==null||C.nodeType===8)return;const D=Ya(C,a(),ie.value,j.value,c.virtualScrollHorizontal,v.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd),R=e.value-1,ue=D.scrollMaxSize-D.offsetStart-D.offsetEnd-H.value;if(b===D.scrollStart)return;if(D.scrollMaxSize<=0){J(C,D,0,0);return}V!==D.scrollViewSize&&He(D.scrollViewSize),_e(L.value.from);const Ve=Math.floor(D.scrollMaxSize-Math.max(D.scrollViewSize,D.offsetEnd)-Math.min(g[R],D.scrollViewSize/2));if(Ve>0&&Math.ceil(D.scrollStart)>=Ve){J(C,D,R,D.scrollMaxSize-D.offsetEnd-h.reduce(la,0));return}let X=0,ee=D.scrollStart-D.offsetStart,qe=ee;if(ee<=ue&&ee+D.scrollViewSize>=_.value)ee-=_.value,X=L.value.from,qe=ee;else for(let p=0;ee>=h[p]&&X<R;p++)ee-=h[p],X+=Lt;for(;ee>0&&X<R;)ee-=g[X],ee>-D.scrollViewSize?(X++,qe=ee):qe=g[X]+ee;J(C,D,X,qe)}function J(C,D,R,ue,Ve){const X=typeof Ve=="string"&&Ve.indexOf("-force")>-1,ee=X===!0?Ve.replace("-force",""):Ve,qe=ee!==void 0?ee:"start";let p=Math.max(0,R-N.value[qe]),q=p+N.value.total;q>e.value&&(q=e.value,p=Math.max(0,q-N.value.total)),b=D.scrollStart;const Q=p!==L.value.from||q!==L.value.to;if(Q===!1&&ee===void 0){Ge(R);return}const{activeElement:ae}=document,ge=S.value;Q===!0&&ge!==null&&ge!==ae&&ge.contains(ae)===!0&&(ge.addEventListener("focusout",Be),setTimeout(()=>{ge!==null&&ge.removeEventListener("focusout",Be)})),us(ge,R-p);const K=ee!==void 0?g.slice(p,R).reduce(la,0):0;if(Q===!0){const Se=q>=L.value.from&&p<=L.value.to?L.value.to:q;L.value={from:p,to:Se},_.value=ca(h,g,0,p),H.value=ca(h,g,q,e.value),requestAnimationFrame(()=>{L.value.to!==q&&b===D.scrollStart&&(L.value={from:L.value.from,to:q},H.value=ca(h,g,q,e.value))})}requestAnimationFrame(()=>{if(b!==D.scrollStart)return;Q===!0&&_e(p);const Se=g.slice(p,R).reduce(la,0),ve=Se+D.offsetStart+_.value,Ye=ve+g[R];let tt=ve+ue;if(ee!==void 0){const mt=Se-K,Oe=D.scrollStart+mt;tt=X!==!0&&Oe<ve&&Ye<Oe+D.scrollViewSize?Oe:ee==="end"?Ye-D.scrollViewSize:ve-(ee==="start"?0:Math.round((D.scrollViewSize-g[R])/2))}b=tt,Po(C,tt,c.virtualScrollHorizontal,v.lang.rtl),Ge(R)})}function _e(C){const D=S.value;if(D){const R=vl.call(D.children,p=>p.classList&&p.classList.contains("q-virtual-scroll--skip")===!1),ue=R.length,Ve=c.virtualScrollHorizontal===!0?p=>p.getBoundingClientRect().width:p=>p.offsetHeight;let X=C,ee,qe;for(let p=0;p<ue;){for(ee=Ve(R[p]),p++;p<ue&&R[p].classList.contains("q-virtual-scroll--with-prev")===!0;)ee+=Ve(R[p]),p++;qe=ee-g[X],qe!==0&&(g[X]+=qe,h[Math.floor(X/Lt)]+=qe),X++}}}function Be(){S.value!==null&&S.value!==void 0&&S.value.focus()}function ce(C,D){const R=1*i.value;(D===!0||Array.isArray(g)===!1)&&(g=[]);const ue=g.length;g.length=e.value;for(let X=e.value-1;X>=ue;X--)g[X]=R;const Ve=Math.floor((e.value-1)/Lt);h=[];for(let X=0;X<=Ve;X++){let ee=0;const qe=Math.min((X+1)*Lt,e.value);for(let p=X*Lt;p<qe;p++)ee+=g[p];h.push(ee)}y=-1,b=void 0,_.value=ca(h,g,0,L.value.from),H.value=ca(h,g,L.value.to,e.value),C>=0?(_e(L.value.from),ht(()=>{$e(C)})):he()}function He(C){if(C===void 0&&typeof window<"u"){const ee=t();ee!=null&&ee.nodeType!==8&&(C=Ya(ee,a(),ie.value,j.value,c.virtualScrollHorizontal,v.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd).scrollViewSize)}V=C;const D=parseFloat(c.virtualScrollSliceRatioBefore)||0,R=parseFloat(c.virtualScrollSliceRatioAfter)||0,ue=1+D+R,Ve=C===void 0||C<=0?1:Math.ceil(C/i.value),X=Math.max(1,Ve,Math.ceil((c.virtualScrollSliceSize>0?c.virtualScrollSliceSize:10)/ue));N.value={total:Math.ceil(X*ue),start:Math.ceil(X*D),center:Math.ceil(X*(.5+D)),end:Math.ceil(X*(1+D)),view:Ve}}function Qe(C,D){const R=c.virtualScrollHorizontal===!0?"width":"height",ue={["--q-virtual-scroll-item-"+R]:i.value+"px"};return[C==="tbody"?m(C,{class:"q-virtual-scroll__padding",key:"before",ref:ie},[m("tr",[m("td",{style:{[R]:`${_.value}px`,...ue},colspan:B.value})])]):m(C,{class:"q-virtual-scroll__padding",key:"before",ref:ie,style:{[R]:`${_.value}px`,...ue}}),m(C,{class:"q-virtual-scroll__content",key:"content",ref:S,tabindex:-1},D.flat()),C==="tbody"?m(C,{class:"q-virtual-scroll__padding",key:"after",ref:j},[m("tr",[m("td",{style:{[R]:`${H.value}px`,...ue},colspan:B.value})])]):m(C,{class:"q-virtual-scroll__padding",key:"after",ref:j,style:{[R]:`${H.value}px`,...ue}})]}function Ge(C){y!==C&&(c.onVirtualScroll!==void 0&&r("virtualScroll",{index:C,from:L.value.from,to:L.value.to-1,direction:C<y?"decrease":"increase",ref:o}),y=C)}He();const he=ql(Ae,v.platform.is.ios===!0?120:35);Rl(()=>{He()});let I=!1;return oo(()=>{I=!0}),lo(()=>{if(I!==!0)return;const C=t();b!==void 0&&C!==void 0&&C!==null&&C.nodeType!==8?Po(C,b,c.virtualScrollHorizontal,v.lang.rtl):$e(y)}),ga(()=>{he.cancel()}),Object.assign(o,{scrollTo:$e,reset:Ee,refresh:Pe}),{virtualScrollSliceRange:L,virtualScrollSliceSizeComputed:N,setVirtualScrollSize:He,onVirtualScrollEvt:he,localResetVirtualScroll:ce,padVirtualScroll:Qe,scrollTo:$e,reset:Ee,refresh:Pe}}const No=e=>["add","add-unique","toggle"].includes(e),fs=".*+?^${}()|[]\\",vs=Object.keys(uo);var Ja=je({name:"QSelect",inheritAttrs:!1,props:{...cs,..._a,...uo,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:No},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Yo,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:t,emit:a}){const{proxy:i}=st(),{$q:n}=i,c=F(!1),r=F(!1),o=F(-1),v=F(""),b=F(!1),y=F(!1);let V=null,h,g,_,H=null,N,ie,j,S;const L=F(null),B=F(null),le=F(null),me=F(null),Ee=F(null),Pe=Xl(e),$e=rn(ra),Ae=f(()=>Array.isArray(e.options)?e.options.length:0),J=f(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:_e,virtualScrollSliceSizeComputed:Be,localResetVirtualScroll:ce,padVirtualScroll:He,onVirtualScrollEvt:Qe,scrollTo:Ge,setVirtualScrollSize:he}=ms({virtualScrollLength:Ae,getVirtualScrollTarget:Oa,getVirtualScrollEl:vt,virtualScrollItemSizeComputed:J}),I=Xo(),C=f(()=>{const u=e.mapOptions===!0&&e.multiple!==!0,M=e.modelValue!==void 0&&(e.modelValue!==null||u===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const $=e.mapOptions===!0&&h!==void 0?h:[],te=M.map(Te=>yt(Te,$));return e.modelValue===null&&u===!0?te.filter(Te=>Te!==null):te}return M}),D=f(()=>{const u={};return vs.forEach(M=>{const $=e[M];$!==void 0&&(u[M]=$)}),u}),R=f(()=>e.optionsDark===null?I.isDark.value:e.optionsDark),ue=f(()=>ko(C.value)),Ve=f(()=>{let u="q-field__input q-placeholder col";return e.hideSelected===!0||C.value.length===0?[u,e.inputClass]:(u+=" q-field__input--padding",e.inputClass===void 0?u:[u,e.inputClass])}),X=f(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),ee=f(()=>Ae.value===0),qe=f(()=>C.value.map(u=>A.value(u)).join(", ")),p=f(()=>e.displayValue!==void 0?e.displayValue:qe.value),q=f(()=>e.optionsHtml===!0?()=>!0:u=>u!=null&&u.html===!0),Q=f(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||C.value.some(q.value))),ae=f(()=>I.focused.value===!0?e.tabindex:-1),ge=f(()=>{const u={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${I.targetUid.value}_lb`};return o.value>=0&&(u["aria-activedescendant"]=`${I.targetUid.value}_${o.value}`),u}),K=f(()=>({id:`${I.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Se=f(()=>C.value.map((u,M)=>({index:M,opt:u,html:q.value(u),selected:!0,removeAtIndex:re,toggleOption:Ne,tabindex:ae.value}))),ve=f(()=>{if(Ae.value===0)return[];const{from:u,to:M}=_e.value;return e.options.slice(u,M).map(($,te)=>{const Te=P.value($)===!0,Ce=u+te,Fe={clickable:!0,active:!1,activeClass:mt.value,manualFocus:!0,focused:!1,disable:Te,tabindex:-1,dense:e.optionsDense,dark:R.value,role:"option",id:`${I.targetUid.value}_${Ce}`,onClick:()=>{Ne($)}};return Te!==!0&&(Y($)===!0&&(Fe.active=!0),o.value===Ce&&(Fe.focused=!0),Fe["aria-selected"]=Fe.active===!0?"true":"false",n.platform.is.desktop===!0&&(Fe.onMousemove=()=>{c.value===!0&&Ze(Ce)})),{index:Ce,opt:$,html:q.value($),label:A.value($),selected:Fe.active,focused:Fe.focused,toggleOption:Ne,setOptionIndex:Ze,itemProps:Fe}})}),Ye=f(()=>e.dropdownIcon!==void 0?e.dropdownIcon:n.iconSet.arrow.dropdown),tt=f(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),mt=f(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Oe=f(()=>w(e.optionValue,"value")),A=f(()=>w(e.optionLabel,"label")),P=f(()=>w(e.optionDisable,"disable")),G=f(()=>C.value.map(u=>Oe.value(u))),Le=f(()=>{const u={onInput:ra,onChange:$e,onKeydown:Re,onKeyup:ze,onKeypress:ft,onFocus:ke,onClick(M){g===!0&&gt(M)}};return u.onCompositionstart=u.onCompositionupdate=u.onCompositionend=$e,u});it(C,u=>{h=u,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&I.innerLoading.value!==!0&&(r.value!==!0&&c.value!==!0||ue.value!==!0)&&(_!==!0&&xt(),(r.value===!0||c.value===!0)&&It(""))},{immediate:!0}),it(()=>e.fillInput,xt),it(c,z),it(Ae,d);function we(u){return e.emitValue===!0?Oe.value(u):u}function de(u){if(u>-1&&u<C.value.length)if(e.multiple===!0){const M=e.modelValue.slice();a("remove",{index:u,value:M.splice(u,1)[0]}),a("update:modelValue",M)}else a("update:modelValue",null)}function re(u){de(u),I.focus()}function De(u,M){const $=we(u);if(e.multiple!==!0){e.fillInput===!0&&Ot(A.value(u),!0,!0),a("update:modelValue",$);return}if(C.value.length===0){a("add",{index:0,value:$}),a("update:modelValue",e.multiple===!0?[$]:$);return}if(M===!0&&Y(u)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const te=e.modelValue.slice();a("add",{index:te.length,value:$}),te.push($),a("update:modelValue",te)}function Ne(u,M){if(I.editable.value!==!0||u===void 0||P.value(u)===!0)return;const $=Oe.value(u);if(e.multiple!==!0){M!==!0&&(Ot(e.fillInput===!0?A.value(u):"",!0,!0),qt()),B.value!==null&&B.value.focus(),(C.value.length===0||jt(Oe.value(C.value[0]),$)!==!0)&&a("update:modelValue",e.emitValue===!0?$:u);return}if((g!==!0||b.value===!0)&&I.focus(),ke(),C.value.length===0){const Ce=e.emitValue===!0?$:u;a("add",{index:0,value:Ce}),a("update:modelValue",e.multiple===!0?[Ce]:Ce);return}const te=e.modelValue.slice(),Te=G.value.findIndex(Ce=>jt(Ce,$));if(Te>-1)a("remove",{index:Te,value:te.splice(Te,1)[0]});else{if(e.maxValues!==void 0&&te.length>=e.maxValues)return;const Ce=e.emitValue===!0?$:u;a("add",{index:te.length,value:Ce}),te.push(Ce)}a("update:modelValue",te)}function Ze(u){if(n.platform.is.desktop!==!0)return;const M=u>-1&&u<Ae.value?u:-1;o.value!==M&&(o.value=M)}function Je(u=1,M){if(c.value===!0){let $=o.value;do $=wo($+u,-1,Ae.value-1);while($!==-1&&$!==o.value&&P.value(e.options[$])===!0);o.value!==$&&(Ze($),Ge($),M!==!0&&e.useInput===!0&&e.fillInput===!0&&ea($>=0?A.value(e.options[$]):N))}}function yt(u,M){const $=te=>jt(Oe.value(te),u);return e.options.find($)||M.find($)||u}function w(u,M){const $=u!==void 0?u:M;return typeof $=="function"?$:te=>te!==null&&typeof te=="object"&&$ in te?te[$]:te}function Y(u){const M=Oe.value(u);return G.value.find($=>jt($,M))!==void 0}function ke(u){e.useInput===!0&&B.value!==null&&(u===void 0||B.value===u.target&&u.target.value===qe.value)&&B.value.select()}function fe(u){Bo(u,27)===!0&&c.value===!0&&(gt(u),qt(),xt()),a("keyup",u)}function ze(u){const{value:M}=u.target;if(u.keyCode!==void 0){fe(u);return}if(u.target.value="",V!==null&&(clearTimeout(V),V=null),xt(),typeof M=="string"&&M.length!==0){const $=M.toLocaleLowerCase(),te=Ce=>{const Fe=e.options.find(nt=>Ce.value(nt).toLocaleLowerCase()===$);return Fe===void 0?!1:(C.value.indexOf(Fe)===-1?Ne(Fe):qt(),!0)},Te=Ce=>{te(Oe)!==!0&&(te(A)===!0||Ce===!0||It(M,!0,()=>Te(!0)))};Te()}else I.clearValue(u)}function ft(u){a("keypress",u)}function Re(u){if(a("keydown",u),zo(u)===!0)return;const M=v.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),$=u.shiftKey!==!0&&e.multiple!==!0&&(o.value>-1||M===!0);if(u.keyCode===27){xa(u);return}if(u.keyCode===9&&$===!1){Nt();return}if(u.target===void 0||u.target.id!==I.targetUid.value)return;if(u.keyCode===40&&I.innerLoading.value!==!0&&c.value===!1){ut(u),Dt();return}if(u.keyCode===8&&e.hideSelected!==!0&&v.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?de(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(u.keyCode===35||u.keyCode===36)&&(typeof v.value!="string"||v.value.length===0)&&(ut(u),o.value=-1,Je(u.keyCode===36?1:-1,e.multiple)),(u.keyCode===33||u.keyCode===34)&&Be.value!==void 0&&(ut(u),o.value=Math.max(-1,Math.min(Ae.value,o.value+(u.keyCode===33?-1:1)*Be.value.view)),Je(u.keyCode===33?1:-1,e.multiple)),(u.keyCode===38||u.keyCode===40)&&(ut(u),Je(u.keyCode===38?-1:1,e.multiple));const te=Ae.value;if((j===void 0||S<Date.now())&&(j=""),te>0&&e.useInput!==!0&&u.key!==void 0&&u.key.length===1&&u.altKey===!1&&u.ctrlKey===!1&&u.metaKey===!1&&(u.keyCode!==32||j.length!==0)){c.value!==!0&&Dt(u);const Te=u.key.toLocaleLowerCase(),Ce=j.length===1&&j[0]===Te;S=Date.now()+1500,Ce===!1&&(ut(u),j+=Te);const Fe=new RegExp("^"+j.split("").map(Ra=>fs.indexOf(Ra)>-1?"\\"+Ra:Ra).join(".*"),"i");let nt=o.value;if(Ce===!0||nt<0||Fe.test(A.value(e.options[nt]))!==!0)do nt=wo(nt+1,-1,te-1);while(nt!==o.value&&(P.value(e.options[nt])===!0||Fe.test(A.value(e.options[nt]))!==!0));o.value!==nt&&ht(()=>{Ze(nt),Ge(nt),nt>=0&&e.useInput===!0&&e.fillInput===!0&&ea(A.value(e.options[nt]))});return}if(!(u.keyCode!==13&&(u.keyCode!==32||e.useInput===!0||j!=="")&&(u.keyCode!==9||$===!1))){if(u.keyCode!==9&&ut(u),o.value>-1&&o.value<te){Ne(e.options[o.value]);return}if(M===!0){const Te=(Ce,Fe)=>{if(Fe){if(No(Fe)!==!0)return}else Fe=e.newValueMode;if(Ce==null)return;Ot("",e.multiple!==!0,!0),(Fe==="toggle"?Ne:De)(Ce,Fe==="add-unique"),e.multiple!==!0&&(B.value!==null&&B.value.focus(),qt())};if(e.onNewValue!==void 0?a("newValue",v.value,Te):Te(v.value),e.multiple!==!0)return}c.value===!0?Nt():I.innerLoading.value!==!0&&Dt()}}function vt(){return g===!0?Ee.value:le.value!==null&&le.value.contentEl!==null?le.value.contentEl:void 0}function Oa(){return vt()}function Sa(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?Se.value.map(u=>t["selected-item"](u)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?Se.value.map((u,M)=>m(rs,{key:"option-"+M,removable:I.editable.value===!0&&P.value(u.opt)!==!0,dense:!0,textColor:e.color,tabindex:ae.value,onRemove(){u.removeAtIndex(M)}},()=>m("span",{class:"ellipsis",[u.html===!0?"innerHTML":"textContent"]:A.value(u.opt)}))):[m("span",{[Q.value===!0?"innerHTML":"textContent"]:p.value})]}function Zt(){if(ee.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:v.value}):void 0;const u=t.option!==void 0?t.option:$=>m(Me,{key:$.index,...$.itemProps},()=>m(W,()=>m(wt,()=>m("span",{[$.html===!0?"innerHTML":"textContent"]:$.label}))));let M=He("div",ve.value.map(u));return t["before-options"]!==void 0&&(M=t["before-options"]().concat(M)),ao(t["after-options"],M)}function wa(u,M){const $=M===!0?{...ge.value,...I.splitAttrs.attributes.value}:void 0,te={ref:M===!0?B:void 0,key:"i_t",class:Ve.value,style:e.inputStyle,value:v.value!==void 0?v.value:"",type:"search",...$,id:M===!0?I.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":u===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Le.value};return u!==!0&&g===!0&&(Array.isArray(te.class)===!0?te.class=[...te.class,"no-pointer-events"]:te.class+=" no-pointer-events"),m("input",te)}function ra(u){V!==null&&(clearTimeout(V),V=null),!(u&&u.target&&u.target.qComposing===!0)&&(ea(u.target.value||""),_=!0,N=v.value,I.focused.value!==!0&&(g!==!0||b.value===!0)&&I.focus(),e.onFilter!==void 0&&(V=setTimeout(()=>{V=null,It(v.value)},e.inputDebounce)))}function ea(u){v.value!==u&&(v.value=u,a("inputValue",u))}function Ot(u,M,$){_=$!==!0,e.useInput===!0&&(ea(u),(M===!0||$!==!0)&&(N=u),M!==!0&&It(u))}function It(u,M,$){if(e.onFilter===void 0||M!==!0&&I.focused.value!==!0)return;I.innerLoading.value===!0?a("filterAbort"):(I.innerLoading.value=!0,y.value=!0),u!==""&&e.multiple!==!0&&C.value.length!==0&&_!==!0&&u===A.value(C.value[0])&&(u="");const te=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);H!==null&&clearTimeout(H),H=te,a("filter",u,(Te,Ce)=>{(M===!0||I.focused.value===!0)&&H===te&&(clearTimeout(H),typeof Te=="function"&&Te(),y.value=!1,ht(()=>{I.innerLoading.value=!1,I.editable.value===!0&&(M===!0?c.value===!0&&qt():c.value===!0?z(!0):c.value=!0),typeof Ce=="function"&&ht(()=>{Ce(i)}),typeof $=="function"&&ht(()=>{$(i)})}))},()=>{I.focused.value===!0&&H===te&&(clearTimeout(H),I.innerLoading.value=!1,y.value=!1),c.value===!0&&(c.value=!1)})}function Ia(){return m(Zo,{ref:le,class:X.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&ee.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:R.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:tt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...K.value,onScrollPassive:Qe,onBeforeShow:O,onBeforeHide:Pt,onShow:sa},Zt)}function Pt(u){be(u),Nt()}function sa(){he()}function ka(u){gt(u),B.value!==null&&B.value.focus(),b.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Ca(u){gt(u),ht(()=>{b.value=!1})}function qa(){const u=[m(ns,{class:`col-auto ${I.fieldClass.value}`,...D.value,for:I.targetUid.value,dark:R.value,square:!0,loading:y.value,itemAligned:!1,filled:!0,stackLabel:v.value.length!==0,...I.splitAttrs.listeners.value,onFocus:ka,onBlur:Ca},{...t,rawControl:()=>I.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&u.push(m("div",{ref:Ee,class:X.value+" scroll",style:e.popupContentStyle,...K.value,onClick:xa,onScrollPassive:Qe},Zt())),m(un,{ref:me,modelValue:r.value,position:e.useInput===!0?"top":void 0,transitionShow:ie,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:O,onBeforeHide:ta,onHide:Tt,onShow:Aa},()=>m("div",{class:"q-select__dialog"+(R.value===!0?" q-select__dialog--dark q-dark":"")+(b.value===!0?" q-select__dialog--focused":"")},u))}function ta(u){be(u),me.value!==null&&me.value.__updateRefocusTarget(I.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),I.focused.value=!1}function Tt(u){qt(),I.focused.value===!1&&a("blur",u),xt()}function Aa(){const u=document.activeElement;(u===null||u.id!==I.targetUid.value)&&B.value!==null&&B.value!==u&&B.value.focus(),he()}function Nt(){r.value!==!0&&(o.value=-1,c.value===!0&&(c.value=!1),I.focused.value===!1&&(H!==null&&(clearTimeout(H),H=null),I.innerLoading.value===!0&&(a("filterAbort"),I.innerLoading.value=!1,y.value=!1)))}function Dt(u){I.editable.value===!0&&(g===!0?(I.onControlFocusin(u),r.value=!0,ht(()=>{I.focus()})):I.focus(),e.onFilter!==void 0?It(v.value):(ee.value!==!0||t["no-option"]!==void 0)&&(c.value=!0))}function qt(){r.value=!1,Nt()}function xt(){e.useInput===!0&&Ot(e.multiple!==!0&&e.fillInput===!0&&C.value.length!==0&&A.value(C.value[0])||"",!0,!0)}function z(u){let M=-1;if(u===!0){if(C.value.length!==0){const $=Oe.value(C.value[0]);M=e.options.findIndex(te=>jt(Oe.value(te),$))}ce(M)}Ze(M)}function d(u,M){c.value===!0&&I.innerLoading.value===!1&&(ce(-1,!0),ht(()=>{c.value===!0&&I.innerLoading.value===!1&&(u>M?ce():z(!0))}))}function T(){r.value===!1&&le.value!==null&&le.value.updatePosition()}function O(u){u!==void 0&&gt(u),a("popupShow",u),I.hasPopupOpen=!0,I.onControlFocusin(u)}function be(u){u!==void 0&&gt(u),a("popupHide",u),I.hasPopupOpen=!1,I.onControlFocusout(u)}function xe(){g=n.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||ee.value===!1:!0),ie=n.platform.is.ios===!0&&g===!0&&e.useInput===!0?"fade":e.transitionShow}return Pl(xe),Nl(T),xe(),ga(()=>{V!==null&&clearTimeout(V)}),Object.assign(i,{showPopup:Dt,hidePopup:qt,removeAtIndex:de,add:De,toggleOption:Ne,getOptionIndex:()=>o.value,setOptionIndex:Ze,moveOptionSelection:Je,filter:It,updateMenuPosition:T,updateInputValue:Ot,isOptionSelected:Y,getEmittingOptionValue:we,isOptionDisabled:(...u)=>P.value.apply(null,u)===!0,getOptionValue:(...u)=>Oe.value.apply(null,u),getOptionLabel:(...u)=>A.value.apply(null,u)}),Object.assign(I,{innerValue:C,fieldClass:f(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:L,targetRef:B,hasValue:ue,showPopup:Dt,floatingLabel:f(()=>e.hideSelected!==!0&&ue.value===!0||typeof v.value=="number"||v.value.length!==0||ko(e.displayValue)),getControlChild:()=>{if(I.editable.value!==!1&&(r.value===!0||ee.value!==!0||t["no-option"]!==void 0))return g===!0?qa():Ia();I.hasPopupOpen===!0&&(I.hasPopupOpen=!1)},controlEvents:{onFocusin(u){I.onControlFocusin(u)},onFocusout(u){I.onControlFocusout(u,()=>{xt(),Nt()})},onClick(u){if(xa(u),g!==!0&&c.value===!0){Nt(),B.value!==null&&B.value.focus();return}Dt(u)}},getControl:u=>{const M=Sa(),$=u===!0||r.value!==!0||g!==!0;if(e.useInput===!0)M.push(wa(u,$));else if(I.editable.value===!0){const Te=$===!0?ge.value:void 0;M.push(m("input",{ref:$===!0?B:void 0,key:"d_t",class:"q-select__focus-target",id:$===!0?I.targetUid.value:void 0,value:p.value,readonly:!0,"data-autofocus":u===!0||e.autofocus===!0||void 0,...Te,onKeydown:Re,onKeyup:fe,onKeypress:ft})),$===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&M.push(m("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ze}))}if(Pe.value!==void 0&&e.disable!==!0&&G.value.length!==0){const Te=G.value.map(Ce=>m("option",{value:Ce,selected:!0}));M.push(m("select",{class:"hidden",name:Pe.value,multiple:e.multiple},Te))}const te=e.useInput===!0||$!==!0?void 0:I.splitAttrs.attributes.value;return m("div",{class:"q-field__native row items-center",...te,...I.splitAttrs.listeners.value},M)},getInnerAppend:()=>e.loading!==!0&&y.value!==!0&&e.hideDropdownIcon!==!0?[m(Ie,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:Ye.value})]:null}),Jo(I)}});const ps=Ke({name:"DebugOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{applicationStore:zt,userStore:Wt}},data(){return{messageInput:"",tab:null,subscribed:!1,theme:{defaultMode:{options:["light","dark"]},globalStyle:{options:["none","aero","mica"]},headerStyle:{options:["none","gradient-left","gradient-right"]},windowStyle:{options:["none","gradient-top","gradient-right","gradient-bottom","gradient-left"]}}}},methods:{getProfilePicture(e){return e==="testerino"?"https://cdn.quasar.dev/img/avatar4.jpg":null},msgSender(e){return e.messageJSON?e.messageJSON.displayName:e.senderId.stringify()},msgText(e){return e.messageJSON?e.messageJSON.message:e.message}}}),hs={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"},gs=E("div",null,null,-1),bs={class:"col"},ys={class:"row",style:{display:"flex",gap:"20px"}},Ss={class:"col"},ws={class:"col"},ks={class:"col"};function Cs(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"directions_bus",title:"Debug",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:600,defaultLeft:40,defaultTop:400,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tab=o),dense:""},{default:s(()=>[l(Xe,{name:"Domains",icon:"travel_explore",label:"Domains"}),l(Xe,{name:"Messages",icon:"chat",label:"Messages"}),l(Xe,{name:"Avatars",icon:"people",label:"Avatars"}),l(Xe,{name:"Theme",icon:"palette",label:"Theme"})]),_:1},8,["modelValue"]),l(ia,{style:{height:"calc(100% - 56px)","background-color":"transparent"},modelValue:e.tab,"onUpdate:modelValue":t[11]||(t[11]=o=>e.tab=o),animated:""},{default:s(()=>[l(ot,{name:"Domains"}),l(ot,{name:"Messages"},{default:s(()=>[e.applicationStore.messages.messages.length>0?(k(),oe(dt,{key:0},{default:s(()=>[(k(!0),U(We,null,bt(e.applicationStore.messages.messages,o=>(k(),U("div",{key:o.id},ne(e.msgSender(o))+" : "+ne(e.msgText(o)),1))),128))]),_:1})):(k(),U("p",hs,"There are no messages to show."))]),_:1}),l(ot,{name:"Avatars"},{default:s(()=>[E("div",null,"DisplayName: "+ne(e.userStore.avatar.displayName),1),E("div",null,"Location: "+ne(e.userStore.avatar.location),1),gs,E("div",null,"Avatars: "+ne(e.applicationStore.avatars.count),1),(k(!0),U(We,null,bt(e.applicationStore.avatars.avatarsInfo.values(),o=>(k(),oe(dt,{key:o.sessionId.stringify()},{default:s(()=>[E("div",null,ne(o),1)]),_:2},1024))),128))]),_:1}),l(ot,{name:"Theme"},{default:s(()=>[l(Et,{class:"col",style:{height:"100%"}},{default:s(()=>[l(Me,null,{default:s(()=>[l(ye,{name:"brandName",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.brandName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.applicationStore.theme.brandName=o)},null,8,["modelValue"])]),_:1}),l(Me,null,{default:s(()=>[l(ye,{name:"productName",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.productName,"onUpdate:modelValue":t[2]||(t[2]=o=>e.applicationStore.theme.productName=o)},null,8,["modelValue"])]),_:1}),l(Me,null,{default:s(()=>[l(ye,{name:"tagline",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.tagline,"onUpdate:modelValue":t[3]||(t[3]=o=>e.applicationStore.theme.tagline=o)},null,8,["modelValue"])]),_:1}),l(Me,null,{default:s(()=>[l(ye,{name:"globalServiceTerm",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.globalServiceTerm,"onUpdate:modelValue":t[4]||(t[4]=o=>e.applicationStore.theme.globalServiceTerm=o)},null,8,["modelValue"])]),_:1}),l(Me,null,{default:s(()=>[E("div",bs,[x(" Colors: "),E("div",ys,[E("div",Ss,[x(" Primary: "),l(fa,{name:"primary",modelValue:e.applicationStore.theme.colors.primary,"onUpdate:modelValue":t[5]||(t[5]=o=>e.applicationStore.theme.colors.primary=o)},null,8,["modelValue"])]),E("div",ws,[x(" Secondary: "),l(fa,{name:"secondary",modelValue:e.applicationStore.theme.colors.secondary,"onUpdate:modelValue":t[6]||(t[6]=o=>e.applicationStore.theme.colors.secondary=o)},null,8,["modelValue"])]),E("div",ks,[x(" Accent: "),l(fa,{name:"accent",modelValue:e.applicationStore.theme.colors.accent,"onUpdate:modelValue":t[7]||(t[7]=o=>e.applicationStore.theme.colors.accent=o)},null,8,["modelValue"])])])])]),_:1}),l(Me,null,{default:s(()=>[l(Ja,{name:"globalStyle",label:"globalStyle",dense:"","options-dense":"",style:{width:"100%"},options:e.theme.globalStyle.options,modelValue:e.applicationStore.theme.globalStyle,"onUpdate:modelValue":t[8]||(t[8]=o=>e.applicationStore.theme.globalStyle=o)},null,8,["options","modelValue"])]),_:1}),l(Me,null,{default:s(()=>[l(Ja,{name:"headerStyle",label:"headerStyle",dense:"","options-dense":"",style:{width:"100%"},options:e.theme.headerStyle.options,modelValue:e.applicationStore.theme.headerStyle,"onUpdate:modelValue":t[9]||(t[9]=o=>e.applicationStore.theme.headerStyle=o)},null,8,["options","modelValue"])]),_:1}),l(Me,null,{default:s(()=>[l(Ja,{name:"windowStyle",label:"windowStyle",dense:"","options-dense":"",style:{width:"100%"},options:e.theme.windowStyle.options,modelValue:e.applicationStore.theme.windowStyle,"onUpdate:modelValue":t[10]||(t[10]=o=>e.applicationStore.theme.windowStyle=o)},null,8,["options","modelValue"])]),_:1}),l(Me)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["managerProps","style"])}var As=et(ps,[["render",Cs]]);const Ts=[m("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[m("circle",{cx:"22",cy:"22",r:"1"},[m("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),m("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),m("circle",{cx:"22",cy:"22",r:"1"},[m("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),m("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Ms=je({name:"QSpinnerPuff",props:Fo,setup(e){const{cSize:t,classes:a}=Uo(e);return()=>m("svg",{class:a.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},Ts)}});const $s=Ke({name:"ConferenceOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},setup(){return{applicationStore:zt}},data(){return{isAdmin:!0}},computed:{},methods:{joinConferenceRoom(e){this.applicationStore.joinConferenceRoom(e),this.$emit("overlay-action","openOverlay:Jitsi")}}}),Vs={style:{position:"relative",display:"flex","justify-content":"center","align-items":"center"}},Ls={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"};function Es(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"groups",title:"Conference",managerProps:e.propsToPass,defaultHeight:300,defaultWidth:400,defaultLeft:300,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[l(Et,{class:"col",style:{height:"100%"}},{default:s(()=>[Array.from(e.applicationStore.conference.activeRooms.keys()).length>0?(k(),oe(dt,{key:0},{default:s(()=>[(k(!0),U(We,null,bt(e.applicationStore.conference.activeRooms,o=>at((k(),oe(Me,{key:o.name,class:"q-mb-sm",clickable:""},{default:s(()=>[l(W,{avatar:"",style:{"min-width":"20px"},title:"Meeting is in progress"},{default:s(()=>[E("div",Vs,[l(Ms,{size:"md",color:"red",class:"absolute"}),l(Ie,{name:"fiber_manual_record",size:"xs",color:"red"})])]),_:1}),l(W,null,{default:s(()=>[l(wt,null,{default:s(()=>[x(ne(o.name),1)]),_:2},1024),l(Go,{"text-color":e.$q.dark.isActive?"white":"black",class:Ht(["q-mt-xs",e.$q.dark.isActive?"bg-dark":"bg-white"]),style:{width:"fit-content"},title:"There are 0 people in this meeting."},{default:s(()=>[x(" 0 "),l(Ie,{name:"people",size:"14px",class:"q-ml-xs"})]),_:1},8,["text-color","class"])]),_:2},1024),l(W,{side:""},{default:s(()=>[l(Z,{color:"cyan-12","text-color":"dark",onClick:v=>e.joinConferenceRoom(o)},{default:s(()=>[x("Join")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[St]])),128))]),_:1})):(k(),U("p",Ls,"There are no meetings in this domain."))]),_:1})]),_:1})]),_:1},8,["managerProps","style"])}var _s=et($s,[["render",Es],["__scopeId","data-v-04988dec"]]);const Os=Ke({name:"JitsiOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:At},data(){return{room:void 0,jitsiElement:void 0}},methods:{getWebEntityController(){const e=Dl.getGameObjectByID(this.room.entity.id),t=e==null?void 0:e.getComponent(go.typeName);return t instanceof go?t:void 0}},mounted(){this.room=zt.conference.currentRoom;const e=this.getWebEntityController();e&&e.externalElement&&(this.jitsiElement=e.externalElement,e.externalElement=null,this.$refs.JitsiContainer.appendChild(this.jitsiElement))},beforeUnmount(){if(this.room&&this.jitsiElement){const e=this.getWebEntityController();e?e.externalElement=this.jitsiElement:(this.jitsiElement.remove(),this.jitsiElement=void 0)}}}),Is={class:"absolute-center"},qs={style:{width:"100%",height:"100%"},ref:"JitsiContainer"};function Rs(e,t,a,i,n,c){const r=ct("OverlayShell");return k(),oe(r,{icon:"groups",title:e.propsToPass.name,managerProps:e.propsToPass,defaultHeight:600,defaultWidth:800,defaultLeft:300,hoverShowBar:!1,style:lt({"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"})},{default:s(()=>[E("div",Is,[l(Ea,{size:"xl"})]),l(Ct,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:s(()=>[(k(),oe(Bl,null,[E("div",qs,null,512)],1024))]),_:1})]),_:1},8,["title","managerProps","style"])}var Ps=et(Os,[["render",Rs],["__scopeId","data-v-46728a48"]]);const pl="meet.jit.si",Ns="stage.8x8.vc",Ds="8x8.vc",Bs=(e,t)=>t?`${t}/${e}`:e,zs=e=>e?Ns:Ds;let xs=0;const Fs=e=>`${e}-${xs++}`,Us=async e=>new Promise((t,a)=>{if(window.JitsiMeetExternalAPI)return t(window.JitsiMeetExternalAPI);const i=document.createElement("script");i.async=!0,i.src=`https://${e}/external_api.js`,i.onload=()=>t(window.JitsiMeetExternalAPI),i.onerror=()=>a(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)});let $a;const Hs=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pl;return $a||($a=Us(e),$a)},Ws=["id"];var hl=Ke({__name:"jitsi-meeting",props:{domain:{default:pl},roomName:null,width:{default:600},height:{default:400},configOverwrite:null,interfaceConfigOverwrite:null,jwt:null,invitees:null,devices:null,userInfo:null,lang:{default:"en"}},emits:["onApiReady","onReadyToClose","getIframeRefOnApiReady"],setup(e,t){let{emit:a}=t;const i=e,{domain:n,roomName:c,width:r,height:o,configOverwrite:v,interfaceConfigOverwrite:b,jwt:y,invitees:V,devices:h,userInfo:g,lang:_}=i,H=F(""),N=F(!1),ie=F(!1),j=F(),S=F(),L=F(null);to(()=>{H.value=Fs("jitsiMeeting"),Hs(n).then(async le=>{j.value=le,ie.value=!0,await ht(),B(j.value)}).catch(le=>console.error(le.message))});const B=le=>{S.value=new le(n,{roomName:c,width:r,height:o,configOverwrite:v,interfaceConfigOverwrite:b,jwt:y,invitees:V,devices:h,userInfo:g,parentNode:L.value,lang:_}),N.value=!1,S.value&&(a("onApiReady",S.value),S.value.on("readyToClose",()=>{a("onReadyToClose")}),L.value&&a("getIframeRefOnApiReady",L.value))};return(le,me)=>(k(),U(We,null,[N.value||!S.value?Ho(le.$slots,"spinner",{key:0}):Ue("",!0),(k(),U("div",{id:H.value,key:H.value,ref_key:"meetingRef",ref:L},null,8,Ws))],64))}}),js=Ke({__name:"jaas-meeting",props:{appId:null,useStaging:{type:Boolean,default:!0}},setup(e){const t=e,{appId:a,useStaging:i,roomName:n}=t,c=F(zs(i)),r=F(Bs(n,a));return(o,v)=>(k(),oe(xl(hl),zl({...o.$props,...o.$attrs},{domain:c.value,"room-name":r.value}),null,16,["domain","room-name"]))}}),Ks=Object.freeze({__proto__:null,JitsiMeeting:hl,JaaSMeeting:js});const Qs=function(t){Object.entries(Ks).forEach(a=>{let[i,n]=a;t.component(i,n)})},Gs=Ke({name:"LoginDialog",emits:["close"],setup(){return{applicationStore:zt,tab:F("metaverseLogin")}}}),Ys={class:"title"};function Js(e,t,a,i,n,c){const r=ct("MetaverseLogin"),o=ct("MetaverseRegister");return k(),U(We,null,[l(tl,{class:"bar"},{default:s(()=>[E("div",Ys,ne(e.applicationStore.theme.globalServiceTerm)+" Login",1),l(sn),l(Z,{dense:"",flat:"",icon:"close",onClick:t[0]||(t[0]=v=>e.$emit("close"))})]),_:1}),l(co,{class:"q-pt-none"},{default:s(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=v=>e.tab=v),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:s(()=>[l(Xe,{name:"metaverseLogin",label:"Login"}),l(Xe,{name:"metaverseRegister",label:"Register"})]),_:1},8,["modelValue"]),l(Gt),l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=v=>e.tab=v),animated:""},{default:s(()=>[l(ot,{name:"metaverseLogin"},{default:s(()=>[l(r,{onSuccess:t[2]||(t[2]=v=>e.$emit("close"))})]),_:1}),l(ot,{name:"metaverseRegister"},{default:s(()=>[l(o,{onSuccess:t[3]||(t[3]=v=>e.tab="metaverseLogin")})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}var Xs=et(Gs,[["render",Js]]);const Zs=Ke({name:"AudioLevel",props:{color:{type:String,required:!1},compact:{type:Boolean,required:!1},level:{type:Number,required:!1}},setup(){return{AudioIO:Ko}}});function eu(e,t,a,i,n,c){return k(),U("div",{class:Ht(["verticalAudioLevel q-my-auto",{"q-ml-sm":e.compact}])},[E("span",{class:Ht(`text-${e.color??"primary"}`),style:lt({height:`${e.level??e.AudioIO.inputLevel}%`})},null,6)],2)}var tu=et(Zs,[["render",eu],["__scopeId","data-v-5a4a1f97"]]),gl=je({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:a}){const i=st(),n=F(null);let c=0;const r=[];function o(g){const _=typeof g=="boolean"?g:e.noErrorFocus!==!0,H=++c,N=(S,L)=>{a("validation"+(S===!0?"Success":"Error"),L)},ie=S=>{const L=S.validate();return typeof L.then=="function"?L.then(B=>({valid:B,comp:S}),B=>({valid:!1,comp:S,err:B})):Promise.resolve({valid:L,comp:S})};return(e.greedy===!0?Promise.all(r.map(ie)).then(S=>S.filter(L=>L.valid!==!0)):r.reduce((S,L)=>S.then(()=>ie(L).then(B=>{if(B.valid===!1)return Promise.reject(B)})),Promise.resolve()).catch(S=>[S])).then(S=>{if(S===void 0||S.length===0)return H===c&&N(!0),!0;if(H===c){const{comp:L,err:B}=S[0];if(B!==void 0&&console.error(B),N(!1,L),_===!0){const le=S.find(({comp:me})=>typeof me.focus=="function"&&Fl(me.$)===!1);le!==void 0&&le.comp.focus()}}return!1})}function v(){c++,r.forEach(g=>{typeof g.resetValidation=="function"&&g.resetValidation()})}function b(g){g!==void 0&&ut(g);const _=c+1;o().then(H=>{_===c&&H===!0&&(e.onSubmit!==void 0?a("submit",g):g!==void 0&&g.target!==void 0&&typeof g.target.submit=="function"&&g.target.submit())})}function y(g){g!==void 0&&ut(g),a("reset"),ht(()=>{v(),e.autofocus===!0&&e.noResetFocus!==!0&&V()})}function V(){Zl(()=>{if(n.value===null)return;const g=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),_=>_.tabIndex>-1);g!=null&&g.focus({preventScroll:!0})})}xo(Ul,{bindComponent(g){r.push(g)},unbindComponent(g){const _=r.indexOf(g);_>-1&&r.splice(_,1)}});let h=!1;return oo(()=>{h=!0}),lo(()=>{h===!0&&e.autofocus===!0&&V()}),to(()=>{e.autofocus===!0&&V()}),Object.assign(i.proxy,{validate:o,resetValidation:v,submit:b,reset:y,focus:V,getValidationComponents:()=>r}),()=>m("form",{class:"q-form",ref:n,onSubmit:b,onReset:y},na(t.default))}});const au=Ke({name:"MetaverseLogin",emits:["success"],data(){return{username:"",password:"",showPassword:!1,loading:!1,loginError:!1}},methods:{async submit(){this.loading=!0,await jo.login(this.username,this.password)?(this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Welcome "+this.username+"."}),this.loginError=!1,this.$emit("success")):(this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Please check your username/password."}),this.loginError=!0),this.loading=!1}}});function ou(e,t,a,i,n,c){return k(),oe(gl,{onSubmit:e.submit,class:"column q-gutter-y-md"},{default:s(()=>[l(ye,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=r=>e.username=r),filled:"",dense:"",label:"Username",hint:"Enter your username.",disable:e.loading,error:e.loginError,onFocus:t[1]||(t[1]=r=>e.loginError=!1)},null,8,["modelValue","disable","error"]),l(ye,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=r=>e.password=r),filled:"",dense:"",label:"Password",type:e.showPassword?"text":"password",hint:"Enter your password.",disable:e.loading,error:e.loginError,onFocus:t[4]||(t[4]=r=>e.loginError=!1)},{append:s(()=>[l(Ie,{name:e.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[2]||(t[2]=r=>e.showPassword=!e.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","disable","error"]),l(Z,{label:"Login",type:"submit",color:"primary",class:"q-ml-auto",disable:e.username.length<=0||e.password.length<=0,loading:e.loading},null,8,["disable","loading"])]),_:1},8,["onSubmit"])}var lu=et(au,[["render",ou]]);const nu=Ke({name:"MetaverseRegister",emits:["success","failure"],data(){return{username:"",email:"",password:"",confirmPassword:"",showPassword:!1,showConfirmPassword:!1,loading:!1}},methods:{async submit(){this.loading=!0;const e=await jo.createAccount(this.username,this.password,this.email);if(this.loading=!1,!e){this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Something went wrong..."}),this.$emit("failure");return}e.accountAwaitingVerification?this.$q.notify({type:"info",textColor:"white",icon:"email",timeout:0,message:"Check your email to complete registration.",actions:[{label:"Dismiss",color:"white"}]}):this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Registration successful."}),this.$refs.registrationForm.reset(),this.$emit("success")}}});function iu(e,t,a,i,n,c){return k(),oe(gl,{class:"column q-gutter-y-md",ref:"registrationForm",onSubmit:e.submit},{default:s(()=>[l(ye,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=r=>e.username=r),filled:"",dense:"",label:"Username",hint:"Enter your username.","lazy-rules":"",rules:[r=>r&&r.length>0||"Please enter a username."],disable:e.loading},null,8,["modelValue","rules","disable"]),l(ye,{modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=r=>e.email=r),filled:"",dense:"",label:"Email",hint:"Enter your email.","lazy-rules":"",rules:[r=>r&&r.length>0||"Please enter an email."],disable:e.loading},null,8,["modelValue","rules","disable"]),l(ye,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=r=>e.password=r),filled:"",dense:"",label:"Password",type:e.showPassword?"text":"password",hint:"Enter your password.","lazy-rules":"",rules:[r=>r&&r.length>0||"Please enter a password."],disable:e.loading},{append:s(()=>[l(Ie,{name:e.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[2]||(t[2]=r=>e.showPassword=!e.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),l(ye,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=r=>e.confirmPassword=r),filled:"",dense:"",label:"Confirm Password",type:e.showConfirmPassword?"text":"password",hint:"Enter your password again.","lazy-rules":"",rules:[r=>r&&r.length>0&&r===e.password||"Please ensure your passwords match."],disable:e.loading},{append:s(()=>[l(Ie,{name:e.showConfirmPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[4]||(t[4]=r=>e.showConfirmPassword=!e.showConfirmPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),l(Z,{label:"Register",type:"submit",color:"primary",class:"q-ml-auto",loading:e.loading},null,8,["loading"])]),_:1},8,["onSubmit"])}var ru=et(nu,[["render",iu]]),mu=Hl(({app:e})=>{e.component("AudioOverlay",xn),e.component("ControlsOverlay",ri),e.component("GraphicsOverlay",gi),e.component("ChatOverlay",Hi),e.component("ExploreOverlay",gr),e.component("PeopleOverlay",_r),e.component("AvatarOverlay",jr),e.component("ReadyPlayerMeOverlay",es),e.component("MenuOverlay",ls),e.component("DebugOverlay",As),e.component("ConferenceOverlay",_s),e.component("JitsiOverlay",Ps),e.component("JitsiContainer",dn),Qs(e),e.component("LoginDialog",Xs),e.component("AudioLevel",tu),e.component("MetaverseLogin",lu),e.component("MetaverseRegister",ru)});export{mu as default};
